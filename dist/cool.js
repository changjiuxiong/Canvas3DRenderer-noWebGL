!function(t){var c={};function g(I){if(c[I])return c[I].exports;var n=c[I]={i:I,l:!1,exports:{}};return t[I].call(n.exports,n,n.exports,g),n.l=!0,n.exports}g.m=t,g.c=c,g.d=function(t,c,I){g.o(t,c)||Object.defineProperty(t,c,{enumerable:!0,get:I})},g.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},g.t=function(t,c){if(1&c&&(t=g(t)),8&c)return t;if(4&c&&"object"==typeof t&&t&&t.__esModule)return t;var I=Object.create(null);if(g.r(I),Object.defineProperty(I,"default",{enumerable:!0,value:t}),2&c&&"string"!=typeof t)for(var n in t)g.d(I,n,function(c){return t[c]}.bind(null,n));return I},g.n=function(t){var c=t&&t.__esModule?function(){return t.default}:function(){return t};return g.d(c,"a",c),c},g.o=function(t,c){return Object.prototype.hasOwnProperty.call(t,c)},g.p="",g(g.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/material/Material.js\n\r\nclass Material {\r\n    constructor(param) {\r\n        param = param || {};\r\n        this.type = 'Material';\r\n        this.map = param.map;\r\n        this.envMap = param.envMap;\r\n        this.color = param.color || [1,1,1,1];\r\n        this.opacity = this.color[3];\r\n        if(this.color[3] && this.color[3]<1){\r\n            this.transparent = true;\r\n        }else {\r\n            this.transparent = false;\r\n        }\r\n        this.metalness = param.metalness == undefined ? 0.5 : param.metalness;\r\n\r\n        this.wireframe = param.wireframe == undefined ? false : param.wireframe;\r\n\r\n        var VSHADER_SOURCE =\r\n\r\n            'precision highp int;\\n' +\r\n            'precision highp float;\\n' +\r\n            'attribute vec4 a_Position;\\n' +\r\n            'uniform mat4 u_MvMatrix;\\n' +\r\n            'uniform mat4 u_PMatrix;\\n' +\r\n\r\n            '#ifdef USE_Shadow\\n' +\r\n            'uniform mat4 u_PMatrixFromLight;\\n' +\r\n            'varying vec4 v_PositionFromLight;\\n' +\r\n            '#endif\\n' +\r\n\r\n            'attribute vec2 a_TexCoord;\\n' +\r\n            'varying vec2 v_TexCoord;\\n' +\r\n            'attribute vec3 a_Normal;\\n' +\r\n            'varying vec3 v_Normal;\\n' +\r\n\r\n            '#ifdef USE_SColor\\n' +\r\n            'varying vec3 v_PositionV3;\\n' +\r\n            '#else\\n' +\r\n            '   #ifdef USE_envMap\\n' +\r\n            '   varying vec3 v_PositionV3;\\n' +\r\n            '   #endif\\n' +\r\n            '#endif\\n' +\r\n\r\n            'void main() {\\n' +\r\n            '  vec4 positionV4 = u_PMatrix * u_MvMatrix * a_Position;\\n' +\r\n            '  gl_Position = positionV4;\\n' +\r\n            '  v_TexCoord = a_TexCoord;\\n' +\r\n            '  v_Normal = mat3(u_MvMatrix) * a_Normal;\\n' +\r\n            // '  v_Normal = (u_MvMatrix * vec4(a_Normal, 0.0)).xyz;\\n' +\r\n            // '  v_Normal = a_Normal;\\n' +\r\n\r\n            '#ifdef USE_Shadow\\n' +\r\n            '  v_PositionFromLight = u_PMatrixFromLight * u_MvMatrix * a_Position;\\n' +\r\n            '#endif\\n' +\r\n\r\n            '#ifdef USE_SColor\\n' +\r\n            '  vec4 positionV4Rel = u_MvMatrix * a_Position;\\n' +\r\n            '  v_PositionV3 = positionV4Rel.xyz / positionV4Rel.w;\\n' +\r\n            '#else\\n' +\r\n            '   #ifdef USE_envMap\\n' +\r\n            '   vec4 positionV4Rel = u_MvMatrix * a_Position;\\n' +\r\n            '   v_PositionV3 = positionV4Rel.xyz / positionV4Rel.w;\\n' +\r\n            '   #endif\\n' +\r\n            '#endif\\n' +\r\n\r\n            '}\\n';\r\n\r\n        var FSHADER_SOURCE =\r\n            'precision highp int;\\n' +\r\n            'precision highp float;\\n' +\r\n            'uniform vec4 u_Color;\\n' +\r\n            'varying vec2 v_TexCoord;\\n' +\r\n            'varying vec3 v_Normal;\\n' +\r\n\r\n            'uniform float u_Metalness;\\n' +\r\n\r\n            '#ifdef USE_Map\\n' +\r\n            'uniform sampler2D u_Sampler;\\n' +\r\n            '#endif\\n' +\r\n\r\n            '#ifdef USE_envMap\\n' +\r\n            'uniform samplerCube u_envMap;\\n' +\r\n            '#endif\\n' +\r\n\r\n            '#ifdef USE_AmbientLight\\n' +\r\n            'uniform vec3 u_AmbientLight_Color;\\n' +\r\n            '#endif\\n' +\r\n\r\n            '#ifdef USE_DirectionalLight\\n' +\r\n            'uniform vec3 u_DirectionalLight_Direction;\\n' +\r\n            'uniform vec3 u_DirectionalLight_Color;\\n' +\r\n            '#endif\\n' +\r\n\r\n            '#ifdef USE_SColor\\n' +\r\n            'uniform vec3 u_Camera_Position;\\n' +\r\n            'varying vec3 v_PositionV3;\\n' +\r\n            '#else\\n' +\r\n            '   #ifdef USE_envMap\\n' +\r\n            '   uniform vec3 u_Camera_Position;\\n' +\r\n            '   varying vec3 v_PositionV3;\\n' +\r\n            '   #endif\\n' +\r\n            '#endif\\n' +\r\n\r\n            '#ifdef USE_Shadow\\n' +\r\n            'uniform sampler2D u_ShadowMap;\\n' +\r\n            'varying vec4 v_PositionFromLight;\\n' +\r\n\r\n            'float unpackDepth(const in vec4 rgbaDepth) {\\n' +\r\n            '  const vec4 bitShift = vec4(1.0, 1.0/256.0, 1.0/(256.0*256.0), 1.0/(256.0*256.0*256.0));\\n' +\r\n            '  float depth = dot(rgbaDepth, bitShift);\\n' + // Use dot() since the calculations is same\r\n            '  return depth;\\n' +\r\n            '}\\n' +\r\n\r\n            '#endif\\n' +\r\n\r\n            'void main() {\\n' +\r\n            '  vec4 color = u_Color;\\n' +\r\n            '  vec3 v_Normal0 = normalize(v_Normal);\\n' +\r\n\r\n            '#ifdef USE_Map\\n' +\r\n            '  color = texture2D(u_Sampler, v_TexCoord);\\n' +\r\n            '#endif\\n' +\r\n\r\n            '  vec3 colorV3 = color.rgb;\\n' +\r\n            '  float useLight = 0.0;\\n' +\r\n            '  vec3 finalColorV3 = colorV3.rgb;\\n' +\r\n\r\n            '#ifdef USE_AmbientLight\\n' +\r\n            '  vec3 A_color = colorV3 * u_AmbientLight_Color * 0.5;\\n' +\r\n            '  finalColorV3 = A_color;\\n' +\r\n            '  useLight = 1.0;\\n' +\r\n            '#endif\\n' +\r\n\r\n            '#ifdef USE_DirectionalLight\\n' +\r\n            '  float D_weight = max(dot(u_DirectionalLight_Direction, v_Normal0), 0.0);\\n' +\r\n            '  vec3 D_color = colorV3 * u_DirectionalLight_Color * D_weight * (1.0 - u_Metalness);\\n' +\r\n\r\n            '  if(useLight>0.5){\\n' +\r\n            '    finalColorV3 = finalColorV3 + D_color;\\n' +\r\n            '  }else{\\n' +\r\n            '    finalColorV3 = D_color;\\n' +\r\n            '  }\\n' +\r\n            '  useLight = 1.0;\\n' +\r\n            '#endif\\n' +\r\n\r\n            '#ifdef USE_SColor\\n' +\r\n            '  vec3 r = normalize( reflect(-u_DirectionalLight_Direction, v_Normal0) );\\n' +\r\n            '  vec3 v = normalize( u_Camera_Position - v_PositionV3 );\\n' +\r\n            '  float rdotv = max( dot(r ,v), 0.0 );\\n' +\r\n            '  float S_weight = pow( rdotv, 100.0 );\\n' +\r\n            '  vec3 S_color = colorV3 * u_DirectionalLight_Color * S_weight * u_Metalness;\\n' +\r\n\r\n            '  if(useLight>0.5){\\n' +\r\n            '    finalColorV3 = finalColorV3 + S_color;\\n' +\r\n            '  }else{\\n' +\r\n            '    finalColorV3 = S_color;\\n' +\r\n            '  }\\n' +\r\n            '  useLight = 1.0;\\n' +\r\n            '#endif\\n' +\r\n\r\n            '  color = vec4(finalColorV3, color.a);\\n' +\r\n\r\n            '#ifdef USE_envMap\\n' +\r\n            // '   vec3 v1 = normalize( u_Camera_Position - v_PositionV3 );\\n' +\r\n            // '   vec3 r1 = normalize( reflect(v1, v_Normal0) );\\n' +\r\n            '   vec3 v1 = u_Camera_Position - v_PositionV3;\\n' +\r\n            '   vec3 r1 = reflect(-v1, v_Normal0);\\n' +\r\n\r\n            '   vec4 envMapColor = textureCube(u_envMap, r1);\\n' +\r\n            // '   vec3 ref = v1 - 2.0 * dot(v_Normal0, v1) * v_Normal0;\\n'+\r\n            // '   vec4 envMapColor = textureCube(u_envMap, ref);\\n' +\r\n            '   color = vec4(envMapColor.rgb, color.a);\\n' +\r\n            '#endif\\n' +\r\n\r\n\r\n            '#ifdef USE_Shadow\\n' +\r\n            '  vec3 shadowCoord = (v_PositionFromLight.xyz/v_PositionFromLight.w)/2.0 + 0.5;\\n' +\r\n            '  vec4 rgbaDepth = texture2D(u_ShadowMap, shadowCoord.xy);\\n' +\r\n            '  float depth = unpackDepth(rgbaDepth);\\n' +\r\n            '  float visibility = (shadowCoord.z > depth + 0.0015) ? 0.7 : 1.0;\\n' +\r\n            '  color = vec4(color.rgb * visibility, color.a);\\n' +\r\n            '#endif\\n' +\r\n\r\n            '  gl_FragColor = color;\\n' +\r\n\r\n            '}\\n';\r\n\r\n        this.vshaderSource = VSHADER_SOURCE;\r\n        this.fshaderSource = FSHADER_SOURCE;\r\n    }\r\n\r\n    setOpacity(opacity){\r\n        this.opacity = opacity;\r\n        this.color[3] = opacity;\r\n        this.transparent = opacity<1;\r\n    }\r\n\r\n    clone(){\r\n\r\n        var material = new Material({\r\n            map: this.map,\r\n            color: this.color.slice(0)\r\n        });\r\n\r\n        return material;\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var material_Material = (Material);\r\n\n// CONCATENATED MODULE: ./src/math/Math.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar _Math = {\r\n\r\n\tDEG2RAD: Math.PI / 180,\r\n\tRAD2DEG: 180 / Math.PI,\r\n\r\n\tgenerateUUID: ( function () {\r\n\r\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n\r\n\t\tvar lut = [];\r\n\r\n\t\tfor ( var i = 0; i < 256; i ++ ) {\r\n\r\n\t\t\tlut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\r\n\r\n\t\t}\r\n\r\n\t\treturn function generateUUID() {\r\n\r\n\t\t\tvar d0 = Math.random() * 0xffffffff | 0;\r\n\t\t\tvar d1 = Math.random() * 0xffffffff | 0;\r\n\t\t\tvar d2 = Math.random() * 0xffffffff | 0;\r\n\t\t\tvar d3 = Math.random() * 0xffffffff | 0;\r\n\t\t\tvar uuid = lut[ d0 & 0xff ] + lut[ d0 >> 8 & 0xff ] + lut[ d0 >> 16 & 0xff ] + lut[ d0 >> 24 & 0xff ] + '-' +\r\n\t\t\t\tlut[ d1 & 0xff ] + lut[ d1 >> 8 & 0xff ] + '-' + lut[ d1 >> 16 & 0x0f | 0x40 ] + lut[ d1 >> 24 & 0xff ] + '-' +\r\n\t\t\t\tlut[ d2 & 0x3f | 0x80 ] + lut[ d2 >> 8 & 0xff ] + '-' + lut[ d2 >> 16 & 0xff ] + lut[ d2 >> 24 & 0xff ] +\r\n\t\t\t\tlut[ d3 & 0xff ] + lut[ d3 >> 8 & 0xff ] + lut[ d3 >> 16 & 0xff ] + lut[ d3 >> 24 & 0xff ];\r\n\r\n\t\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\r\n\t\t\treturn uuid.toUpperCase();\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tclamp: function ( value, min, max ) {\r\n\r\n\t\treturn Math.max( min, Math.min( max, value ) );\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\r\n\r\n\tlerp: function ( x, y, t ) {\r\n\r\n\t\treturn ( 1 - t ) * x + t * y;\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function ( degrees ) {\r\n\r\n\t\treturn degrees * _Math.DEG2RAD;\r\n\r\n\t},\r\n\r\n\tradToDeg: function ( radians ) {\r\n\r\n\t\treturn radians * _Math.RAD2DEG;\r\n\r\n\t},\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tceilPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tfloorPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/math/Quaternion.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\n\r\n\r\n\r\nfunction Quaternion( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n}\r\n\r\nObject.assign( Quaternion, {\r\n\r\n\tslerp: function ( qa, qb, qm, t ) {\r\n\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n\t},\r\n\r\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n\t\t// fuzz-free, array-based Quaternion SLERP operation\r\n\r\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\r\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\r\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\r\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\r\n\r\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\r\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\r\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\r\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n\t\t\tvar s = 1 - t,\r\n\r\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\r\n\t\t\t\tsqrSin = 1 - cos * cos;\r\n\r\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\r\n\t\t\tif ( sqrSin > Number.EPSILON ) {\r\n\r\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\r\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\r\n\r\n\t\t\t\ts = Math.sin( s * len ) / sin;\r\n\t\t\t\tt = Math.sin( t * len ) / sin;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar tDir = t * dir;\r\n\r\n\t\t\tx0 = x0 * s + x1 * tDir;\r\n\t\t\ty0 = y0 * s + y1 * tDir;\r\n\t\t\tz0 = z0 * s + z1 * tDir;\r\n\t\t\tw0 = w0 * s + w1 * tDir;\r\n\r\n\t\t\t// Normalize in case we just did a lerp:\r\n\t\t\tif ( s === 1 - t ) {\r\n\r\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n\t\t\t\tx0 *= f;\r\n\t\t\t\ty0 *= f;\r\n\t\t\t\tz0 *= f;\r\n\t\t\t\tw0 *= f;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdst[ dstOffset ] = x0;\r\n\t\tdst[ dstOffset + 1 ] = y0;\r\n\t\tdst[ dstOffset + 2 ] = z0;\r\n\t\tdst[ dstOffset + 3 ] = w0;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Quaternion.prototype, {\r\n\r\n\tx: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._x = value;\r\n\t\t\tthis.onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ty: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._y = value;\r\n\t\t\tthis.onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tz: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._z = value;\r\n\t\t\tthis.onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tw: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._w;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._w = value;\r\n\t\t\tthis.onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Quaternion.prototype, {\r\n\r\n\tisQuaternion: true,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tthrow new Error( 'COOL.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar cos = Math.cos;\r\n\t\tvar sin = Math.sin;\r\n\r\n\t\tvar c1 = cos( x / 2 );\r\n\t\tvar c2 = cos( y / 2 );\r\n\t\tvar c3 = cos( z / 2 );\r\n\r\n\t\tvar s1 = sin( x / 2 );\r\n\t\tvar s2 = sin( y / 2 );\r\n\t\tvar s3 = sin( z / 2 );\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1 = new Vector3();\r\n\t\tvar r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function setFromUnitVectors( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\treturn this.normalize();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( q ) {\r\n\r\n\t\treturn 2 * Math.acos( Math.abs( _Math.clamp( this.dot( q ), - 1, 1 ) ) );\r\n\r\n\t},\r\n\r\n\trotateTowards: function ( q, step ) {\r\n\r\n\t\tvar angle = this.angleTo( q );\r\n\r\n\t\tif ( angle === 0 ) return this;\r\n\r\n\t\tvar t = Math.min( 1, step / angle );\r\n\r\n\t\tthis.slerp( q, t );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tinverse: function () {\r\n\r\n\t\t// quaternion is assumed to have unit length\r\n\r\n\t\treturn this.conjugate();\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( q ) {\r\n\r\n\t\treturn this.multiplyQuaternions( q, this );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\r\n\r\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\r\n\r\n\t\t\tvar s = 1 - t;\r\n\t\t\tthis._w = s * w + t * this._w;\r\n\t\t\tthis._x = s * x + t * this._x;\r\n\t\t\tthis._y = s * y + t * this._y;\r\n\t\t\tthis._z = s * z + t * this._z;\r\n\r\n\t\t\treturn this.normalize();\r\n\r\n\t\t}\r\n\r\n\t\tvar sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\r\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n} );\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/math/Vector3.js\n\r\n\r\n\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nfunction Vector3( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n}\r\n\r\nObject.assign( Vector3.prototype, {\r\n\r\n\tisVector3: true,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n    scaleVectors :function(v1,scale){\r\n        return new Vector3(v1.x*scale, v1.y*scale, v1.z*scale );\r\n    },\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion = new Quaternion();\r\n\r\n\t\treturn function applyEuler( euler ) {\r\n\r\n\t\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\t\tconsole.error( 'COOL.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion = new Quaternion();\r\n\r\n\t\treturn function applyAxisAngle( axis, angle ) {\r\n\r\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix = qw * x + qy * z - qz * y;\r\n\t\tvar iy = qw * y + qz * x - qx * z;\r\n\t\tvar iz = qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function ( camera ) {\r\n\r\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\r\n\r\n\t},\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix = new Matrix4();\r\n\r\n\t\treturn function unproject( camera ) {\r\n\r\n\t\t\treturn this.applyMatrix4( matrix.getInverse( camera.projectionMatrix ) ).applyMatrix4( camera.matrixWorld );\r\n            // return this.applyMatrix4( matrix.getInverse( camera.VPmatrix ) ); 等价\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: COOL.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min = new Vector3();\r\n\t\tvar max = new Vector3();\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\t// TODO lengthSquared?\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.crossVectors( this, v );\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function ( vector ) {\r\n\r\n\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\r\n\r\n\t\treturn this.copy( vector ).multiplyScalar( scalar );\r\n\r\n\t},\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1 = new Vector3();\r\n\r\n\t\treturn function projectOnPlane( planeNormal ) {\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1 = new Vector3();\r\n\r\n\t\treturn function reflect( normal ) {\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tmanhattanDistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\r\n\r\n\t},\r\n\r\n\tsetFromSpherical: function ( s ) {\r\n\r\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\r\n\r\n\t},\r\n\r\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\r\n\r\n\t\tvar sinPhiRadius = Math.sin( phi ) * radius;\r\n\r\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\r\n\t\tthis.y = Math.cos( phi ) * radius;\r\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCylindrical: function ( c ) {\r\n\r\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\r\n\r\n\t},\r\n\r\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\r\n\r\n\t\tthis.x = radius * Math.sin( theta );\r\n\t\tthis.y = y;\r\n\t\tthis.z = radius * Math.cos( theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 12 ];\r\n\t\tthis.y = e[ 13 ];\r\n\t\tthis.z = e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\r\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\r\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( m, index ) {\r\n\r\n\t\treturn this.fromArray( m.elements, index * 4 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n    rotateByVector :function(vec1, vec2, angle) {\r\n        var v1 = vec1.toArray();\r\n        var v2 = vec2.toArray();\r\n        angle = - angle;\r\n        var pos = [];\r\n        pos[0] = v1[0] * Math.cos(angle) + (v2[1] * v1[2] - v2[2] * v1[1]) * Math.sin(angle) + v2[0] * (v2[0] * v1[0] + v2[1] * v1[1] + v2[2] * v1[2]) * (1 - Math.cos(angle));\r\n        pos[1] = v1[1] * Math.cos(angle) + (v2[2] * v1[0] - v2[0] * v1[2]) * Math.sin(angle) + v2[1] * (v2[0] * v1[0] + v2[1] * v1[1] + v2[2] * v1[2]) * (1 - Math.cos(angle));\r\n        pos[2] = v1[2] * Math.cos(angle) + (v2[0] * v1[1] - v2[1] * v1[0]) * Math.sin(angle) + v2[2] * (v2[0] * v1[0] + v2[1] * v1[1] + v2[2] * v1[2]) * (1 - Math.cos(angle));\r\n        return new Vector3().fromArray(pos);\r\n    },\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector3: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\t\tthis.z = attribute.getZ( index );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/math/Vector4.js\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nfunction Vector4( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n\tthis.elements = [this.x,this.y,this.z,this.w];\r\n}\r\n\r\nObject.assign( Vector4.prototype, {\r\n\r\n\tisVector4: true,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\t\tthis.w = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\t\tthis.w *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\tthis.x = 1;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = q.x / s;\r\n\t\t\tthis.y = q.y / s;\r\n\t\t\tthis.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\r\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new Vector4();\r\n\t\t\t\tmax = new Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector4: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\t\tthis.z = attribute.getZ( index );\r\n\t\tthis.w = attribute.getW( index );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/math/Matrix4.js\n\r\n\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nfunction Matrix4() {\r\n\r\n\tthis.elements = [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t];\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'COOL.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Matrix4.prototype, {\r\n\r\n\tisMatrix4: true,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n    setIdentity :function() {\r\n        var e = this.elements;\r\n        e[0] = 1;   e[4] = 0;   e[8]  = 0;   e[12] = 0;\r\n        e[1] = 0;   e[5] = 1;   e[9]  = 0;   e[13] = 0;\r\n        e[2] = 0;   e[6] = 0;   e[10] = 1;   e[14] = 0;\r\n        e[3] = 0;   e[7] = 0;   e[11] = 0;   e[15] = 1;\r\n        return this;\r\n    },\r\n\r\n    multiplyVector3 :function(pos) {\r\n        var e = this.elements;\r\n        var p = pos.elements;\r\n        var v = new Vector3();\r\n        var result = v.elements;\r\n\r\n        result[0] = p[0] * e[0] + p[1] * e[4] + p[2] * e[ 8] + e[11];\r\n        result[1] = p[0] * e[1] + p[1] * e[5] + p[2] * e[ 9] + e[12];\r\n        result[2] = p[0] * e[2] + p[1] * e[6] + p[2] * e[10] + e[13];\r\n\r\n        return v;\r\n    },\r\n\r\n    multiplyVector4 :function(pos) {\r\n        var e = this.elements;\r\n        var p = pos.elements;\r\n        var v = new Vector4();\r\n        var result = v.elements;\r\n\r\n        result[0] = p[0] * e[0] + p[1] * e[4] + p[2] * e[ 8] + p[3] * e[12];\r\n        result[1] = p[0] * e[1] + p[1] * e[5] + p[2] * e[ 9] + p[3] * e[13];\r\n        result[2] = p[0] * e[2] + p[1] * e[6] + p[2] * e[10] + p[3] * e[14];\r\n        result[3] = p[0] * e[3] + p[1] * e[7] + p[2] * e[11] + p[3] * e[15];\r\n\r\n        v = new Vector4(result[0],result[1],result[2],result[3]);\r\n        return v;\r\n    },\r\n\r\n    setInverseOf :function(other) {\r\n        var i, s, d, inv, det;\r\n\r\n        s = other.elements;\r\n        d = this.elements;\r\n        inv = new Float32Array(16);\r\n\r\n        inv[0]  =   s[5]*s[10]*s[15] - s[5] *s[11]*s[14] - s[9] *s[6]*s[15]\r\n            + s[9]*s[7] *s[14] + s[13]*s[6] *s[11] - s[13]*s[7]*s[10];\r\n        inv[4]  = - s[4]*s[10]*s[15] + s[4] *s[11]*s[14] + s[8] *s[6]*s[15]\r\n            - s[8]*s[7] *s[14] - s[12]*s[6] *s[11] + s[12]*s[7]*s[10];\r\n        inv[8]  =   s[4]*s[9] *s[15] - s[4] *s[11]*s[13] - s[8] *s[5]*s[15]\r\n            + s[8]*s[7] *s[13] + s[12]*s[5] *s[11] - s[12]*s[7]*s[9];\r\n        inv[12] = - s[4]*s[9] *s[14] + s[4] *s[10]*s[13] + s[8] *s[5]*s[14]\r\n            - s[8]*s[6] *s[13] - s[12]*s[5] *s[10] + s[12]*s[6]*s[9];\r\n\r\n        inv[1]  = - s[1]*s[10]*s[15] + s[1] *s[11]*s[14] + s[9] *s[2]*s[15]\r\n            - s[9]*s[3] *s[14] - s[13]*s[2] *s[11] + s[13]*s[3]*s[10];\r\n        inv[5]  =   s[0]*s[10]*s[15] - s[0] *s[11]*s[14] - s[8] *s[2]*s[15]\r\n            + s[8]*s[3] *s[14] + s[12]*s[2] *s[11] - s[12]*s[3]*s[10];\r\n        inv[9]  = - s[0]*s[9] *s[15] + s[0] *s[11]*s[13] + s[8] *s[1]*s[15]\r\n            - s[8]*s[3] *s[13] - s[12]*s[1] *s[11] + s[12]*s[3]*s[9];\r\n        inv[13] =   s[0]*s[9] *s[14] - s[0] *s[10]*s[13] - s[8] *s[1]*s[14]\r\n            + s[8]*s[2] *s[13] + s[12]*s[1] *s[10] - s[12]*s[2]*s[9];\r\n\r\n        inv[2]  =   s[1]*s[6]*s[15] - s[1] *s[7]*s[14] - s[5] *s[2]*s[15]\r\n            + s[5]*s[3]*s[14] + s[13]*s[2]*s[7]  - s[13]*s[3]*s[6];\r\n        inv[6]  = - s[0]*s[6]*s[15] + s[0] *s[7]*s[14] + s[4] *s[2]*s[15]\r\n            - s[4]*s[3]*s[14] - s[12]*s[2]*s[7]  + s[12]*s[3]*s[6];\r\n        inv[10] =   s[0]*s[5]*s[15] - s[0] *s[7]*s[13] - s[4] *s[1]*s[15]\r\n            + s[4]*s[3]*s[13] + s[12]*s[1]*s[7]  - s[12]*s[3]*s[5];\r\n        inv[14] = - s[0]*s[5]*s[14] + s[0] *s[6]*s[13] + s[4] *s[1]*s[14]\r\n            - s[4]*s[2]*s[13] - s[12]*s[1]*s[6]  + s[12]*s[2]*s[5];\r\n\r\n        inv[3]  = - s[1]*s[6]*s[11] + s[1]*s[7]*s[10] + s[5]*s[2]*s[11]\r\n            - s[5]*s[3]*s[10] - s[9]*s[2]*s[7]  + s[9]*s[3]*s[6];\r\n        inv[7]  =   s[0]*s[6]*s[11] - s[0]*s[7]*s[10] - s[4]*s[2]*s[11]\r\n            + s[4]*s[3]*s[10] + s[8]*s[2]*s[7]  - s[8]*s[3]*s[6];\r\n        inv[11] = - s[0]*s[5]*s[11] + s[0]*s[7]*s[9]  + s[4]*s[1]*s[11]\r\n            - s[4]*s[3]*s[9]  - s[8]*s[1]*s[7]  + s[8]*s[3]*s[5];\r\n        inv[15] =   s[0]*s[5]*s[10] - s[0]*s[6]*s[9]  - s[4]*s[1]*s[10]\r\n            + s[4]*s[2]*s[9]  + s[8]*s[1]*s[6]  - s[8]*s[2]*s[5];\r\n\r\n        det = s[0]*inv[0] + s[1]*inv[4] + s[2]*inv[8] + s[3]*inv[12];\r\n        if (det === 0) {\r\n            return this;\r\n        }\r\n\r\n        det = 1 / det;\r\n        for (i = 0; i < 16; i++) {\r\n            d[i] = inv[i] * det;\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    invert :function() {\r\n        return this.setInverseOf(this);\r\n    },\r\n\r\n    ortho :function(left, right, bottom, top, near, far) {\r\n        return this.concat(new Matrix4().setOrtho(left, right, bottom, top, near, far));\r\n    },\r\n\r\n    setFrustum :function(left, right, bottom, top, near, far) {\r\n        var e, rw, rh, rd;\r\n\r\n        if (left === right || top === bottom || near === far) {\r\n            throw 'null frustum';\r\n        }\r\n        if (near <= 0) {\r\n            throw 'near <= 0';\r\n        }\r\n        if (far <= 0) {\r\n            throw 'far <= 0';\r\n        }\r\n\r\n        rw = 1 / (right - left);\r\n        rh = 1 / (top - bottom);\r\n        rd = 1 / (far - near);\r\n\r\n        e = this.elements;\r\n\r\n        e[ 0] = 2 * near * rw;\r\n        e[ 1] = 0;\r\n        e[ 2] = 0;\r\n        e[ 3] = 0;\r\n\r\n        e[ 4] = 0;\r\n        e[ 5] = 2 * near * rh;\r\n        e[ 6] = 0;\r\n        e[ 7] = 0;\r\n\r\n        e[ 8] = (right + left) * rw;\r\n        e[ 9] = (top + bottom) * rh;\r\n        e[10] = -(far + near) * rd;\r\n        e[11] = -1;\r\n\r\n        e[12] = 0;\r\n        e[13] = 0;\r\n        e[14] = -2 * near * far * rd;\r\n        e[15] = 0;\r\n\r\n        return this;\r\n    },\r\n\r\n    setOrtho :function(left, right, bottom, top, near, far) {\r\n        var e, rw, rh, rd;\r\n\r\n        if (left === right || bottom === top || near === far) {\r\n            throw 'null frustum';\r\n        }\r\n\r\n        rw = 1 / (right - left);\r\n        rh = 1 / (top - bottom);\r\n        rd = 1 / (far - near);\r\n\r\n        e = this.elements;\r\n\r\n        e[0]  = 2 * rw;\r\n        e[1]  = 0;\r\n        e[2]  = 0;\r\n        e[3]  = 0;\r\n\r\n        e[4]  = 0;\r\n        e[5]  = 2 * rh;\r\n        e[6]  = 0;\r\n        e[7]  = 0;\r\n\r\n        e[8]  = 0;\r\n        e[9]  = 0;\r\n        e[10] = -2 * rd;\r\n        e[11] = 0;\r\n\r\n        e[12] = -(right + left) * rw;\r\n        e[13] = -(top + bottom) * rh;\r\n        e[14] = -(far + near) * rd;\r\n        e[15] = 1;\r\n\r\n        return this;\r\n    },\r\n\r\n    concat :function(other) {\r\n        var i, e, a, b, ai0, ai1, ai2, ai3;\r\n\r\n        // Calculate e = a * b\r\n        e = this.elements;\r\n        a = this.elements;\r\n        b = other.elements;\r\n\r\n        // If e equals b, copy b to temporary matrix.\r\n        if (e === b) {\r\n            b = new Float32Array(16);\r\n            for (i = 0; i < 16; ++i) {\r\n                b[i] = e[i];\r\n            }\r\n        }\r\n\r\n        for (i = 0; i < 4; i++) {\r\n            ai0=a[i];  ai1=a[i+4];  ai2=a[i+8];  ai3=a[i+12];\r\n            e[i]    = ai0 * b[0]  + ai1 * b[1]  + ai2 * b[2]  + ai3 * b[3];\r\n            e[i+4]  = ai0 * b[4]  + ai1 * b[5]  + ai2 * b[6]  + ai3 * b[7];\r\n            e[i+8]  = ai0 * b[8]  + ai1 * b[9]  + ai2 * b[10] + ai3 * b[11];\r\n            e[i+12] = ai0 * b[12] + ai1 * b[13] + ai2 * b[14] + ai3 * b[15];\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    frustum :function(left, right, bottom, top, near, far) {\r\n        return this.concat(new Matrix4().setFrustum(left, right, bottom, top, near, far));\r\n    },\r\n\r\n    setPerspective :function(fovy, aspect, near, far) {\r\n        var e, rd, s, ct;\r\n\r\n        if (near === far || aspect === 0) {\r\n            throw 'null frustum';\r\n        }\r\n        if (near <= 0) {\r\n            throw 'near <= 0';\r\n        }\r\n        if (far <= 0) {\r\n            throw 'far <= 0';\r\n        }\r\n\r\n        fovy = Math.PI * fovy / 180 / 2;\r\n        s = Math.sin(fovy);\r\n        if (s === 0) {\r\n            throw 'null frustum';\r\n        }\r\n\r\n        rd = 1 / (far - near);\r\n        ct = Math.cos(fovy) / s;\r\n\r\n        e = this.elements;\r\n\r\n        e[0]  = ct / aspect;\r\n        e[1]  = 0;\r\n        e[2]  = 0;\r\n        e[3]  = 0;\r\n\r\n        e[4]  = 0;\r\n        e[5]  = ct;\r\n        e[6]  = 0;\r\n        e[7]  = 0;\r\n\r\n        e[8]  = 0;\r\n        e[9]  = 0;\r\n        e[10] = -(far + near) * rd;\r\n        e[11] = -1;\r\n\r\n        e[12] = 0;\r\n        e[13] = 0;\r\n        e[14] = -2 * near * far * rd;\r\n        e[15] = 0;\r\n\r\n        return this;\r\n    },\r\n\r\n    perspective :function(fovy, aspect, near, far) {\r\n        return this.concat(new Matrix4().setPerspective(fovy, aspect, near, far));\r\n    },\r\n\r\n    setScale :function(x, y, z) {\r\n        var e = this.elements;\r\n        e[0] = x;  e[4] = 0;  e[8]  = 0;  e[12] = 0;\r\n        e[1] = 0;  e[5] = y;  e[9]  = 0;  e[13] = 0;\r\n        e[2] = 0;  e[6] = 0;  e[10] = z;  e[14] = 0;\r\n        e[3] = 0;  e[7] = 0;  e[11] = 0;  e[15] = 1;\r\n        return this;\r\n    },\r\n\r\n    scale :function(x, y, z) {\r\n        var e = this.elements;\r\n        e[0] *= x;  e[4] *= y;  e[8]  *= z;\r\n        e[1] *= x;  e[5] *= y;  e[9]  *= z;\r\n        e[2] *= x;  e[6] *= y;  e[10] *= z;\r\n        e[3] *= x;  e[7] *= y;  e[11] *= z;\r\n        return this;\r\n    },\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\r\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\r\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\r\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements, me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrixColumn( this, 0 );\r\n\t\tyAxis.setFromMatrixColumn( this, 1 );\r\n\t\tzAxis.setFromMatrixColumn( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1 = new Vector3();\r\n\r\n\t\treturn function extractRotation( m ) {\r\n\r\n\t\t\t// this method does not support reflection matrices\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\r\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\r\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\t\t\tte[ 3 ] = 0;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\t\t\tte[ 7 ] = 0;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\t\t\tte[ 11 ] = 0;\r\n\r\n\t\t\tte[ 12 ] = 0;\r\n\t\t\tte[ 13 ] = 0;\r\n\t\t\tte[ 14 ] = 0;\r\n\t\t\tte[ 15 ] = 1;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tconsole.error( 'COOL.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// bottom row\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// last column\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function () {\r\n\r\n\t\tvar zero = new Vector3( 0, 0, 0 );\r\n\t\tvar one = new Vector3( 1, 1, 1 );\r\n\r\n\t\treturn function makeRotationFromQuaternion( q ) {\r\n\r\n\t\t\treturn this.compose( zero, q, one );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x = new Vector3();\r\n\t\tvar y = new Vector3();\r\n\t\tvar z = new Vector3();\r\n\r\n\t\treturn function lookAt( eye, target, up ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target );\r\n\r\n\t\t\tif ( z.lengthSq() === 0 ) {\r\n\r\n\t\t\t\t// eye and target are in the same position\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tz.normalize();\r\n\t\t\tx.crossVectors( up, z );\r\n\r\n\t\t\tif ( x.lengthSq() === 0 ) {\r\n\r\n\t\t\t\t// up and z are parallel\r\n\r\n\t\t\t\tif ( Math.abs( up.z ) === 1 ) {\r\n\r\n\t\t\t\t\tz.x += 0.0001;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz.z += 0.0001;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tz.normalize();\r\n\t\t\t\tx.crossVectors( up, z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.normalize();\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToBufferAttribute: function () {\r\n\r\n\t\tvar v1 = new Vector3();\r\n\r\n\t\treturn function applyToBufferAttribute( attribute ) {\r\n\r\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n\t\t\t\tv1.x = attribute.getX( i );\r\n\t\t\t\tv1.y = attribute.getY( i );\r\n\t\t\t\tv1.z = attribute.getZ( i );\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn attribute;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnDegenerate ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements,\r\n\t\t\tme = m.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"COOL.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnDegenerate === true ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.identity();\r\n\r\n\t\t}\r\n\r\n\t\tvar detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\r\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\r\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 4 ] = t12 * detInv;\r\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\r\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\r\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 8 ] = t13 * detInv;\r\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\r\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\r\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\r\n\r\n\t\tte[ 12 ] = t14 * detInv;\r\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\r\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\r\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n    setTranslate :function(x, y, z) {\r\n        var e = this.elements;\r\n        e[0] = 1;  e[4] = 0;  e[8]  = 0;  e[12] = x;\r\n        e[1] = 0;  e[5] = 1;  e[9]  = 0;  e[13] = y;\r\n        e[2] = 0;  e[6] = 0;  e[10] = 1;  e[14] = z;\r\n        e[3] = 0;  e[7] = 0;  e[11] = 0;  e[15] = 1;\r\n        return this;\r\n    },\r\n\r\n    translate :function(x, y, z) {\r\n        var e = this.elements;\r\n        e[12] += e[0] * x + e[4] * y + e[8]  * z;\r\n        e[13] += e[1] * x + e[5] * y + e[9]  * z;\r\n        e[14] += e[2] * x + e[6] * y + e[10] * z;\r\n        e[15] += e[3] * x + e[7] * y + e[11] * z;\r\n        return this;\r\n    },\r\n\r\n    setRotate :function(angle, x, y, z) {\r\n        var e, s, c, len, rlen, nc, xy, yz, zx, xs, ys, zs;\r\n\r\n        angle = Math.PI * angle / 180;\r\n        e = this.elements;\r\n\r\n        s = Math.sin(angle);\r\n        c = Math.cos(angle);\r\n\r\n        if (0 !== x && 0 === y && 0 === z) {\r\n            // Rotation around X axis\r\n            if (x < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = 1;  e[4] = 0;  e[ 8] = 0;  e[12] = 0;\r\n            e[1] = 0;  e[5] = c;  e[ 9] =-s;  e[13] = 0;\r\n            e[2] = 0;  e[6] = s;  e[10] = c;  e[14] = 0;\r\n            e[3] = 0;  e[7] = 0;  e[11] = 0;  e[15] = 1;\r\n        } else if (0 === x && 0 !== y && 0 === z) {\r\n            // Rotation around Y axis\r\n            if (y < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = c;  e[4] = 0;  e[ 8] = s;  e[12] = 0;\r\n            e[1] = 0;  e[5] = 1;  e[ 9] = 0;  e[13] = 0;\r\n            e[2] =-s;  e[6] = 0;  e[10] = c;  e[14] = 0;\r\n            e[3] = 0;  e[7] = 0;  e[11] = 0;  e[15] = 1;\r\n        } else if (0 === x && 0 === y && 0 !== z) {\r\n            // Rotation around Z axis\r\n            if (z < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = c;  e[4] =-s;  e[ 8] = 0;  e[12] = 0;\r\n            e[1] = s;  e[5] = c;  e[ 9] = 0;  e[13] = 0;\r\n            e[2] = 0;  e[6] = 0;  e[10] = 1;  e[14] = 0;\r\n            e[3] = 0;  e[7] = 0;  e[11] = 0;  e[15] = 1;\r\n        } else {\r\n            // Rotation around another axis\r\n            len = Math.sqrt(x*x + y*y + z*z);\r\n            if (len !== 1) {\r\n                rlen = 1 / len;\r\n                x *= rlen;\r\n                y *= rlen;\r\n                z *= rlen;\r\n            }\r\n            nc = 1 - c;\r\n            xy = x * y;\r\n            yz = y * z;\r\n            zx = z * x;\r\n            xs = x * s;\r\n            ys = y * s;\r\n            zs = z * s;\r\n\r\n            e[ 0] = x*x*nc +  c;\r\n            e[ 1] = xy *nc + zs;\r\n            e[ 2] = zx *nc - ys;\r\n            e[ 3] = 0;\r\n\r\n            e[ 4] = xy *nc - zs;\r\n            e[ 5] = y*y*nc +  c;\r\n            e[ 6] = yz *nc + xs;\r\n            e[ 7] = 0;\r\n\r\n            e[ 8] = zx *nc + ys;\r\n            e[ 9] = yz *nc - xs;\r\n            e[10] = z*z*nc +  c;\r\n            e[11] = 0;\r\n\r\n            e[12] = 0;\r\n            e[13] = 0;\r\n            e[14] = 0;\r\n            e[15] = 1;\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    rotate :function(angle, x, y, z) {\r\n        return this.concat(new Matrix4().setRotate(angle, x, y, z));\r\n    },\r\n\r\n    setLookAt :function(eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ) {\r\n        var e, fx, fy, fz, rlf, sx, sy, sz, rls, ux, uy, uz;\r\n\r\n        fx = centerX - eyeX;\r\n        fy = centerY - eyeY;\r\n        fz = centerZ - eyeZ;\r\n\r\n        // Normalize f.\r\n        rlf = 1 / Math.sqrt(fx*fx + fy*fy + fz*fz);\r\n        fx *= rlf;\r\n        fy *= rlf;\r\n        fz *= rlf;\r\n\r\n        // Calculate cross product of f and up.\r\n        sx = fy * upZ - fz * upY;\r\n        sy = fz * upX - fx * upZ;\r\n        sz = fx * upY - fy * upX;\r\n\r\n        // Normalize s.\r\n        rls = 1 / Math.sqrt(sx*sx + sy*sy + sz*sz);\r\n        sx *= rls;\r\n        sy *= rls;\r\n        sz *= rls;\r\n\r\n        // Calculate cross product of s and f.\r\n        ux = sy * fz - sz * fy;\r\n        uy = sz * fx - sx * fz;\r\n        uz = sx * fy - sy * fx;\r\n\r\n        // Set to this.\r\n        e = this.elements;\r\n        e[0] = sx;\r\n        e[1] = ux;\r\n        e[2] = -fx;\r\n        e[3] = 0;\r\n\r\n        e[4] = sy;\r\n        e[5] = uy;\r\n        e[6] = -fy;\r\n        e[7] = 0;\r\n\r\n        e[8] = sz;\r\n        e[9] = uz;\r\n        e[10] = -fz;\r\n        e[11] = 0;\r\n\r\n        e[12] = 0;\r\n        e[13] = 0;\r\n        e[14] = 0;\r\n        e[15] = 1;\r\n\r\n        // Translate.\r\n        return this.translate(-eyeX, -eyeY, -eyeZ);\r\n    },\r\n\r\n    lookAt2 :function(eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ) {\r\n        return this.concat(new Matrix4().setLookAt(eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ));\r\n    },\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s, c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts, c, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeShear: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, y, z, 0,\r\n\t\t\tx, 1, z, 0,\r\n\t\t\tx, y, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\r\n\t\tvar x2 = x + x,\ty2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tvar sx = scale.x, sy = scale.y, sz = scale.z;\r\n\r\n\t        te[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\r\n\t        te[ 1 ] = ( xy + wz ) * sx;\r\n\t        te[ 2 ] = ( xz - wy ) * sx;\r\n\t        te[ 3 ] = 0;\r\n\r\n\t        te[ 4 ] = ( xy - wz ) * sy;\r\n\t        te[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\r\n\t        te[ 6 ] = ( yz + wx ) * sy;\r\n\t        te[ 7 ] = 0;\r\n\r\n\t        te[ 8 ] = ( xz + wy ) * sz;\r\n\t        te[ 9 ] = ( yz - wx ) * sz;\r\n\t        te[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\r\n\t        te[ 11 ] = 0;\r\n\r\n\t        te[ 12 ] = position.x;\r\n\t        te[ 13 ] = position.y;\r\n\t        te[ 14 ] = position.z;\r\n\t        te[ 15 ] = 1;\r\n\r\n\t        return this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector = new Vector3();\r\n\t\tvar matrix = new Matrix4();\r\n\r\n\t\treturn function decompose( position, quaternion, scale ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) sx = - sx;\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\t\t\tmatrix.copy( this );\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tif ( far === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = 1.0 / ( right - left );\r\n\t\tvar h = 1.0 / ( top - bottom );\r\n\t\tvar p = 1.0 / ( far - near );\r\n\r\n\t\tvar x = ( right + left ) * w;\r\n\t\tvar y = ( top + bottom ) * h;\r\n\t\tvar z = ( far + near ) * p;\r\n\r\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tthis.elements[ i ] = array[ i + offset ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ] = te[ 8 ];\r\n\t\tarray[ offset + 9 ] = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/math/Euler.js\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nfunction Euler( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || Euler.DefaultOrder;\r\n\r\n}\r\n\r\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nEuler.DefaultOrder = 'XYZ';\r\n\r\nObject.defineProperties( Euler.prototype, {\r\n\r\n\tx: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._x = value;\r\n\t\t\tthis.onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ty: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._y = value;\r\n\t\t\tthis.onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tz: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._z = value;\r\n\t\t\tthis.onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\torder: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._order;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._order = value;\r\n\t\t\tthis.onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Euler.prototype, {\r\n\r\n\tisEuler: true,\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tvar clamp = _Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'COOL.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function () {\r\n\r\n\t\tvar matrix = new Matrix4();\r\n\r\n\t\treturn function setFromQuaternion( q, order, update ) {\r\n\r\n\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\r\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new Quaternion();\r\n\r\n\t\treturn function reorder( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\r\n\t\t\treturn this.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n} );\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/core/Mesh.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Mesh_Mesh {\r\n    constructor(param) {\r\n        this.type = 'Mesh';\r\n        param = param || {};\r\n        this.geometry = param.geometry;\r\n        this.material = param.material || new material_Material();\r\n\r\n        this.position = param.position || [0,0,0];\r\n        this.rotation = param.rotation || new Euler();\r\n        this.scale = param.scale || [1,1,1];\r\n\r\n        this.quaternion = new Quaternion().setFromEuler( this.rotation, false );\r\n\r\n        this.children = [];\r\n        this.parent = null;\r\n\r\n        this.matrix = new Matrix4();\r\n        this.matrixWorld = new Matrix4();\r\n        this.updateMatrix();\r\n\r\n    }\r\n\r\n    setPosition(position){\r\n        this.position = position;\r\n        this.updateMatrix();\r\n    }\r\n\r\n    setRotation(rotationArray){\r\n        this.rotation = new Euler().fromArray(rotationArray);\r\n        var quaternion = new Quaternion().setFromEuler( this.rotation, false );\r\n        this.setQuaternion(quaternion);\r\n    }\r\n\r\n    setQuaternion(quaternion){\r\n\r\n        this.quaternion = quaternion;\r\n        this.rotation.setFromQuaternion( quaternion, undefined, false );\r\n        this.updateMatrix();\r\n    }\r\n\r\n    setScale(scaleArray){\r\n        this.scale = scaleArray;\r\n        this.updateMatrix();\r\n    }\r\n\r\n    updateMatrix(){\r\n        this.matrix.compose( new Vector3().fromArray(this.position), this.quaternion, new Vector3().fromArray(this.scale) );\r\n        this.updateMatrixWorld ();\r\n    }\r\n\r\n    setMatrix(matrix){\r\n        this.matrix = matrix;\r\n        this.updateMatrixWorld ();\r\n    }\r\n\r\n    updateMatrixWorld () {\r\n\r\n        // this.updateMatrix();\r\n\r\n        if ( this.parent === null ) {\r\n\r\n            this.matrixWorld = this.matrix.clone();\r\n\r\n        } else {\r\n\r\n            this.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n        }\r\n\r\n        this.updateChildrenMatrixWorld();\r\n\r\n    }\r\n\r\n    getWorldPosition() {\r\n\r\n        var target = new Vector3();\r\n\r\n        // this.updateMatrixWorld();\r\n\r\n        return target.setFromMatrixPosition( this.matrixWorld );\r\n\r\n    }\r\n\r\n    updateChildrenMatrixWorld(){\r\n\r\n        for(var i in this.children){\r\n            this.children[i].updateMatrixWorld();\r\n        }\r\n\r\n    }\r\n\r\n    clone(){\r\n        var mesh = new Mesh_Mesh({\r\n            geometry: this.geometry.clone(),\r\n            material: this.material.clone(),\r\n            position: this.position.slice(0),\r\n            rotation: this.rotation.clone(),\r\n            scale: this.scale.slice(0)\r\n        });\r\n\r\n        return mesh;\r\n    }\r\n\r\n    add(mesh){\r\n        this.children.push(mesh);\r\n        mesh.parent = this;\r\n        mesh.updateMatrix();\r\n    }\r\n\r\n    rotateOnAxis (axis, angle) {\r\n\r\n        var q1 = new Quaternion();\r\n        q1.setFromAxisAngle( axis, angle );\r\n        var quaternion = this.quaternion.multiply( q1 );\r\n        this.setQuaternion(quaternion);\r\n\r\n    }\r\n\r\n    rotateX (angle) {\r\n\r\n        this.rotateOnAxis( new Vector3(1,0,0), angle );\r\n\r\n    }\r\n\r\n    rotateY (angle) {\r\n\r\n        this.rotateOnAxis( new Vector3(0,1,0), angle );\r\n\r\n    }\r\n\r\n    rotateZ (angle) {\r\n\r\n        this.rotateOnAxis( new Vector3(0,0,1), angle );\r\n\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var core_Mesh = (Mesh_Mesh);\r\n\n// CONCATENATED MODULE: ./src/util/webgl-utils.js\n/*\r\n * Copyright 2010, Google Inc.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n\r\n/**\r\n * @fileoverview This file contains functions every webgl program will need\r\n * a version of one way or another.\r\n *\r\n * Instead of setting up a context manually it is recommended to\r\n * use. This will check for success or failure. On failure it\r\n * will attempt to present an approriate message to the user.\r\n *\r\n *       gl = WebGLUtils.setupWebGL(canvas);\r\n *\r\n * For animated WebGL apps use of setTimeout or setInterval are\r\n * discouraged. It is recommended you structure your rendering\r\n * loop like this.\r\n *\r\n *       function render() {\r\n *         window.requestAnimationFrame(render, canvas);\r\n *\r\n *         // do rendering\r\n *         ...\r\n *       }\r\n *       render();\r\n *\r\n * This will call your rendering function up to the refresh rate\r\n * of your display but will stop rendering if your app is not\r\n * visible.\r\n */\r\n\r\nvar WebGLUtils = function() {\r\n\r\n/**\r\n * Creates the HTLM for a failure message\r\n * @param {string} canvasContainerId id of container of th\r\n *        canvas.\r\n * @return {string} The html.\r\n */\r\nvar makeFailHTML = function(msg) {\r\n  return '' +\r\n        '<div style=\"margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;\">' + msg + '</div>';\r\n  return '' +\r\n    '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\r\n    '<td align=\"center\">' +\r\n    '<div style=\"display: table-cell; vertical-align: middle;\">' +\r\n    '<div style=\"\">' + msg + '</div>' +\r\n    '</div>' +\r\n    '</td></tr></table>';\r\n};\r\n\r\n/**\r\n * Mesasge for getting a webgl browser\r\n * @type {string}\r\n */\r\nvar GET_A_WEBGL_BROWSER = '' +\r\n  'This page requires a browser that supports WebGL.<br/>' +\r\n  '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\r\n\r\n/**\r\n * Mesasge for need better hardware\r\n * @type {string}\r\n */\r\nvar OTHER_PROBLEM = '' +\r\n  \"It doesn't appear your computer can support WebGL.<br/>\" +\r\n  '<a href=\"http://get.webgl.org\">Click here for more information.</a>';\r\n\r\n/**\r\n * Creates a webgl context. If creation fails it will\r\n * change the contents of the container of the <canvas>\r\n * tag to an error message with the correct links for WebGL.\r\n * @param {Element} canvas. The canvas element to create a\r\n *     context from.\r\n * @param {WebGLContextCreationAttirbutes} opt_attribs Any\r\n *     creation attributes you want to pass in.\r\n * @param {function:(msg)} opt_onError An function to call\r\n *     if there is an error during creation.\r\n * @return {WebGLRenderingContext} The created context.\r\n */\r\nvar setupWebGL = function(canvas, opt_attribs, opt_onError) {\r\n  function handleCreationError(msg) {\r\n      var container = document.getElementsByTagName(\"body\")[0];\r\n    //var container = canvas.parentNode;\r\n    if (container) {\r\n      var str = window.WebGLRenderingContext ?\r\n           OTHER_PROBLEM :\r\n           GET_A_WEBGL_BROWSER;\r\n      if (msg) {\r\n        str += \"<br/><br/>Status: \" + msg;\r\n      }\r\n      container.innerHTML = makeFailHTML(str);\r\n    }\r\n  };\r\n\r\n  opt_onError = opt_onError || handleCreationError;\r\n\r\n  if (canvas.addEventListener) {\r\n    canvas.addEventListener(\"webglcontextcreationerror\", function(event) {\r\n          opt_onError(event.statusMessage);\r\n        }, false);\r\n  }\r\n  var context = create3DContext(canvas, opt_attribs);\r\n  if (!context) {\r\n    if (!window.WebGLRenderingContext) {\r\n      opt_onError(\"\");\r\n    } else {\r\n      opt_onError(\"\");\r\n    }\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\n/**\r\n * Creates a webgl context.\r\n * @param {!Canvas} canvas The canvas tag to get context\r\n *     from. If one is not passed in one will be created.\r\n * @return {!WebGLContext} The created context.\r\n */\r\nvar create3DContext = function(canvas, opt_attribs) {\r\n  var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\r\n  var context = null;\r\n  for (var ii = 0; ii < names.length; ++ii) {\r\n    try {\r\n      context = canvas.getContext(names[ii], opt_attribs);\r\n    } catch(e) {}\r\n    if (context) {\r\n      break;\r\n    }\r\n  }\r\n  return context;\r\n}\r\n\r\nreturn {\r\n  create3DContext: create3DContext,\r\n  setupWebGL: setupWebGL\r\n};\r\n}();\r\n\r\n/**\r\n * Provides requestAnimationFrame in a cross browser\r\n * way.\r\n */\r\nif (!window.requestAnimationFrame) {\r\n  window.requestAnimationFrame = (function() {\r\n    return window.requestAnimationFrame ||\r\n           window.webkitRequestAnimationFrame ||\r\n           window.mozRequestAnimationFrame ||\r\n           window.oRequestAnimationFrame ||\r\n           window.msRequestAnimationFrame ||\r\n           function(/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\r\n             window.setTimeout(callback, 1000/60);\r\n           };\r\n  })();\r\n}\r\n\r\n/** * ERRATA: 'cancelRequestAnimationFrame' renamed to 'cancelAnimationFrame' to reflect an update to the W3C Animation-Timing Spec. \r\n * \r\n * Cancels an animation frame request. \r\n * Checks for cross-browser support, falls back to clearTimeout. \r\n * @param {number}  Animation frame request. */\r\nif (!window.cancelAnimationFrame) {\r\n  window.cancelAnimationFrame = (window.cancelRequestAnimationFrame ||\r\n                                 window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame ||\r\n                                 window.mozCancelAnimationFrame || window.mozCancelRequestAnimationFrame ||\r\n                                 window.msCancelAnimationFrame || window.msCancelRequestAnimationFrame ||\r\n                                 window.oCancelAnimationFrame || window.oCancelRequestAnimationFrame ||\r\n                                 window.clearTimeout);\r\n}\r\n\r\n/* harmony default export */ var webgl_utils = (WebGLUtils);\n// CONCATENATED MODULE: ./src/util/webgl-debug.js\n//Copyright (c) 2009 The Chromium Authors. All rights reserved.\r\n//Use of this source code is governed by a BSD-style license that can be\r\n//found in the LICENSE file.\r\n\r\n// Various functions for helping debug WebGL apps.\r\n\r\nvar WebGLDebugUtils = function() {\r\n\r\n/**\r\n * Wrapped logging function.\r\n * @param {string} msg Message to log.\r\n */\r\nvar log = function(msg) {\r\n  if (window.console && window.console.log) {\r\n    window.console.log(msg);\r\n  }\r\n};\r\n\r\n/**\r\n * Which arguements are enums.\r\n * @type {!Object.<number, string>}\r\n */\r\nvar glValidEnumContexts = {\r\n\r\n  // Generic setters and getters\r\n\r\n  'enable': { 0:true },\r\n  'disable': { 0:true },\r\n  'getParameter': { 0:true },\r\n\r\n  // Rendering\r\n\r\n  'drawArrays': { 0:true },\r\n  'drawElements': { 0:true, 2:true },\r\n\r\n  // Shaders\r\n\r\n  'createShader': { 0:true },\r\n  'getShaderParameter': { 1:true },\r\n  'getProgramParameter': { 1:true },\r\n\r\n  // Vertex attributes\r\n\r\n  'getVertexAttrib': { 1:true },\r\n  'vertexAttribPointer': { 2:true },\r\n\r\n  // Textures\r\n\r\n  'bindTexture': { 0:true },\r\n  'activeTexture': { 0:true },\r\n  'getTexParameter': { 0:true, 1:true },\r\n  'texParameterf': { 0:true, 1:true },\r\n  'texParameteri': { 0:true, 1:true, 2:true },\r\n  'texImage2D': { 0:true, 2:true, 6:true, 7:true },\r\n  'texSubImage2D': { 0:true, 6:true, 7:true },\r\n  'copyTexImage2D': { 0:true, 2:true },\r\n  'copyTexSubImage2D': { 0:true },\r\n  'generateMipmap': { 0:true },\r\n\r\n  // Buffer objects\r\n\r\n  'bindBuffer': { 0:true },\r\n  'bufferData': { 0:true, 2:true },\r\n  'bufferSubData': { 0:true },\r\n  'getBufferParameter': { 0:true, 1:true },\r\n\r\n  // Renderbuffers and framebuffers\r\n\r\n  'pixelStorei': { 0:true, 1:true },\r\n  'readPixels': { 4:true, 5:true },\r\n  'bindRenderbuffer': { 0:true },\r\n  'bindFramebuffer': { 0:true },\r\n  'checkFramebufferStatus': { 0:true },\r\n  'framebufferRenderbuffer': { 0:true, 1:true, 2:true },\r\n  'framebufferTexture2D': { 0:true, 1:true, 2:true },\r\n  'getFramebufferAttachmentParameter': { 0:true, 1:true, 2:true },\r\n  'getRenderbufferParameter': { 0:true, 1:true },\r\n  'renderbufferStorage': { 0:true, 1:true },\r\n\r\n  // Frame buffer operations (clear, blend, depth test, stencil)\r\n\r\n  'clear': { 0:true },\r\n  'depthFunc': { 0:true },\r\n  'blendFunc': { 0:true, 1:true },\r\n  'blendFuncSeparate': { 0:true, 1:true, 2:true, 3:true },\r\n  'blendEquation': { 0:true },\r\n  'blendEquationSeparate': { 0:true, 1:true },\r\n  'stencilFunc': { 0:true },\r\n  'stencilFuncSeparate': { 0:true, 1:true },\r\n  'stencilMaskSeparate': { 0:true },\r\n  'stencilOp': { 0:true, 1:true, 2:true },\r\n  'stencilOpSeparate': { 0:true, 1:true, 2:true, 3:true },\r\n\r\n  // Culling\r\n\r\n  'cullFace': { 0:true },\r\n  'frontFace': { 0:true },\r\n};\r\n\r\n/**\r\n * Map of numbers to names.\r\n * @type {Object}\r\n */\r\nvar glEnums = null;\r\n\r\n/**\r\n * Initializes this module. Safe to call more than once.\r\n * @param {!WebGLRenderingContext} ctx A WebGL context. If\r\n *    you have more than one context it doesn't matter which one\r\n *    you pass in, it is only used to pull out constants.\r\n */\r\nfunction init(ctx) {\r\n  if (glEnums == null) {\r\n    glEnums = { };\r\n    for (var propertyName in ctx) {\r\n      if (typeof ctx[propertyName] == 'number') {\r\n        glEnums[ctx[propertyName]] = propertyName;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Checks the utils have been initialized.\r\n */\r\nfunction checkInit() {\r\n  if (glEnums == null) {\r\n    throw 'WebGLDebugUtils.init(ctx) not called';\r\n  }\r\n}\r\n\r\n/**\r\n * Returns true or false if value matches any WebGL enum\r\n * @param {*} value Value to check if it might be an enum.\r\n * @return {boolean} True if value matches one of the WebGL defined enums\r\n */\r\nfunction mightBeEnum(value) {\r\n  checkInit();\r\n  return (glEnums[value] !== undefined);\r\n}\r\n\r\n/**\r\n * Gets an string version of an WebGL enum.\r\n *\r\n * Example:\r\n *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());\r\n *\r\n * @param {number} value Value to return an enum for\r\n * @return {string} The string version of the enum.\r\n */\r\nfunction glEnumToString(value) {\r\n  checkInit();\r\n  var name = glEnums[value];\r\n  return (name !== undefined) ? name :\r\n      (\"*UNKNOWN WebGL ENUM (0x\" + value.toString(16) + \")\");\r\n}\r\n\r\n/**\r\n * Returns the string version of a WebGL argument.\r\n * Attempts to convert enum arguments to strings.\r\n * @param {string} functionName the name of the WebGL function.\r\n * @param {number} argumentIndx the index of the argument.\r\n * @param {*} value The value of the argument.\r\n * @return {string} The value as a string.\r\n */\r\nfunction glFunctionArgToString(functionName, argumentIndex, value) {\r\n  var funcInfo = glValidEnumContexts[functionName];\r\n  if (funcInfo !== undefined) {\r\n    if (funcInfo[argumentIndex]) {\r\n      return glEnumToString(value);\r\n    }\r\n  }\r\n  return value.toString();\r\n}\r\n\r\n/**\r\n * Given a WebGL context returns a wrapped context that calls\r\n * gl.getError after every command and calls a function if the\r\n * result is not gl.NO_ERROR.\r\n *\r\n * @param {!WebGLRenderingContext} ctx The webgl context to\r\n *        wrap.\r\n * @param {!function(err, funcName, args): void} opt_onErrorFunc\r\n *        The function to call when gl.getError returns an\r\n *        error. If not specified the default function calls\r\n *        console.log with a message.\r\n */\r\nfunction makeDebugContext(ctx, opt_onErrorFunc) {\r\n  init(ctx);\r\n  opt_onErrorFunc = opt_onErrorFunc || function(err, functionName, args) {\r\n        // apparently we can't do args.join(\",\");\r\n        var argStr = \"\";\r\n        for (var ii = 0; ii < args.length; ++ii) {\r\n          argStr += ((ii == 0) ? '' : ', ') +\r\n              glFunctionArgToString(functionName, ii, args[ii]);\r\n        }\r\n        log(\"WebGL error \"+ glEnumToString(err) + \" in \"+ functionName +\r\n            \"(\" + argStr + \")\");\r\n      };\r\n\r\n  // Holds booleans for each GL error so after we get the error ourselves\r\n  // we can still return it to the client app.\r\n  var glErrorShadow = { };\r\n\r\n  // Makes a function that calls a WebGL function and then calls getError.\r\n  function makeErrorWrapper(ctx, functionName) {\r\n    return function() {\r\n      var result = ctx[functionName].apply(ctx, arguments);\r\n      var err = ctx.getError();\r\n      if (err != 0) {\r\n        glErrorShadow[err] = true;\r\n        opt_onErrorFunc(err, functionName, arguments);\r\n      }\r\n      return result;\r\n    };\r\n  }\r\n\r\n  // Make a an object that has a copy of every property of the WebGL context\r\n  // but wraps all functions.\r\n  var wrapper = {};\r\n  for (var propertyName in ctx) {\r\n    if (typeof ctx[propertyName] == 'function') {\r\n       wrapper[propertyName] = makeErrorWrapper(ctx, propertyName);\r\n     } else {\r\n       wrapper[propertyName] = ctx[propertyName];\r\n     }\r\n  }\r\n\r\n  // Override the getError function with one that returns our saved results.\r\n  wrapper.getError = function() {\r\n    for (var err in glErrorShadow) {\r\n      if (glErrorShadow[err]) {\r\n        glErrorShadow[err] = false;\r\n        return err;\r\n      }\r\n    }\r\n    return ctx.NO_ERROR;\r\n  };\r\n\r\n  return wrapper;\r\n}\r\n\r\nfunction resetToInitialState(ctx) {\r\n  var numAttribs = ctx.getParameter(ctx.MAX_VERTEX_ATTRIBS);\r\n  var tmp = ctx.createBuffer();\r\n  ctx.bindBuffer(ctx.ARRAY_BUFFER, tmp);\r\n  for (var ii = 0; ii < numAttribs; ++ii) {\r\n    ctx.disableVertexAttribArray(ii);\r\n    ctx.vertexAttribPointer(ii, 4, ctx.FLOAT, false, 0, 0);\r\n    ctx.vertexAttrib1f(ii, 0);\r\n  }\r\n  ctx.deleteBuffer(tmp);\r\n\r\n  var numTextureUnits = ctx.getParameter(ctx.MAX_TEXTURE_IMAGE_UNITS);\r\n  for (var ii = 0; ii < numTextureUnits; ++ii) {\r\n    ctx.activeTexture(ctx.TEXTURE0 + ii);\r\n    ctx.bindTexture(ctx.TEXTURE_CUBE_MAP, null);\r\n    ctx.bindTexture(ctx.TEXTURE_2D, null);\r\n  }\r\n\r\n  ctx.activeTexture(ctx.TEXTURE0);\r\n  ctx.useProgram(null);\r\n  ctx.bindBuffer(ctx.ARRAY_BUFFER, null);\r\n  ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, null);\r\n  ctx.bindFramebuffer(ctx.FRAMEBUFFER, null);\r\n  ctx.bindRenderbuffer(ctx.RENDERBUFFER, null);\r\n  ctx.disable(ctx.BLEND);\r\n  ctx.disable(ctx.CULL_FACE);\r\n  ctx.disable(ctx.DEPTH_TEST);\r\n  ctx.disable(ctx.DITHER);\r\n  ctx.disable(ctx.SCISSOR_TEST);\r\n  ctx.blendColor(0, 0, 0, 0);\r\n  ctx.blendEquation(ctx.FUNC_ADD);\r\n  ctx.blendFunc(ctx.ONE, ctx.ZERO);\r\n  ctx.clearColor(0, 0, 0, 0);\r\n  ctx.clearDepth(1);\r\n  ctx.clearStencil(-1);\r\n  ctx.colorMask(true, true, true, true);\r\n  ctx.cullFace(ctx.BACK);\r\n  ctx.depthFunc(ctx.LESS);\r\n  ctx.depthMask(true);\r\n  ctx.depthRange(0, 1);\r\n  ctx.frontFace(ctx.CCW);\r\n  ctx.hint(ctx.GENERATE_MIPMAP_HINT, ctx.DONT_CARE);\r\n  ctx.lineWidth(1);\r\n  ctx.pixelStorei(ctx.PACK_ALIGNMENT, 4);\r\n  ctx.pixelStorei(ctx.UNPACK_ALIGNMENT, 4);\r\n  ctx.pixelStorei(ctx.UNPACK_FLIP_Y_WEBGL, false);\r\n  ctx.pixelStorei(ctx.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\r\n  // TODO: Delete this IF.\r\n  if (ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL) {\r\n    ctx.pixelStorei(ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL, ctx.BROWSER_DEFAULT_WEBGL);\r\n  }\r\n  ctx.polygonOffset(0, 0);\r\n  ctx.sampleCoverage(1, false);\r\n  ctx.scissor(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n  ctx.stencilFunc(ctx.ALWAYS, 0, 0xFFFFFFFF);\r\n  ctx.stencilMask(0xFFFFFFFF);\r\n  ctx.stencilOp(ctx.KEEP, ctx.KEEP, ctx.KEEP);\r\n  ctx.viewport(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight);\r\n  ctx.clear(ctx.COLOR_BUFFER_BIT | ctx.DEPTH_BUFFER_BIT | ctx.STENCIL_BUFFER_BIT);\r\n\r\n  // TODO: This should NOT be needed but Firefox fails with 'hint'\r\n  while(ctx.getError());\r\n}\r\n\r\nfunction makeLostContextSimulatingContext(ctx) {\r\n  var wrapper_ = {};\r\n  var contextId_ = 1;\r\n  var contextLost_ = false;\r\n  var resourceId_ = 0;\r\n  var resourceDb_ = [];\r\n  var onLost_ = undefined;\r\n  var onRestored_ = undefined;\r\n  var nextOnRestored_ = undefined;\r\n\r\n  // Holds booleans for each GL error so can simulate errors.\r\n  var glErrorShadow_ = { };\r\n\r\n  function isWebGLObject(obj) {\r\n    //return false;\r\n    return (obj instanceof WebGLBuffer ||\r\n            obj instanceof WebGLFramebuffer ||\r\n            obj instanceof WebGLProgram ||\r\n            obj instanceof WebGLRenderbuffer ||\r\n            obj instanceof WebGLShader ||\r\n            obj instanceof WebGLTexture);\r\n  }\r\n\r\n  function checkResources(args) {\r\n    for (var ii = 0; ii < args.length; ++ii) {\r\n      var arg = args[ii];\r\n      if (isWebGLObject(arg)) {\r\n        return arg.__webglDebugContextLostId__ == contextId_;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function clearErrors() {\r\n    var k = Object.keys(glErrorShadow_);\r\n    for (var ii = 0; ii < k.length; ++ii) {\r\n      delete glErrorShdow_[k];\r\n    }\r\n  }\r\n\r\n  // Makes a function that simulates WebGL when out of context.\r\n  function makeLostContextWrapper(ctx, functionName) {\r\n    var f = ctx[functionName];\r\n    return function() {\r\n      // Only call the functions if the context is not lost.\r\n      if (!contextLost_) {\r\n        if (!checkResources(arguments)) {\r\n          glErrorShadow_[ctx.INVALID_OPERATION] = true;\r\n          return;\r\n        }\r\n        var result = f.apply(ctx, arguments);\r\n        return result;\r\n      }\r\n    };\r\n  }\r\n\r\n  for (var propertyName in ctx) {\r\n    if (typeof ctx[propertyName] == 'function') {\r\n       wrapper_[propertyName] = makeLostContextWrapper(ctx, propertyName);\r\n     } else {\r\n       wrapper_[propertyName] = ctx[propertyName];\r\n     }\r\n  }\r\n\r\n  function makeWebGLContextEvent(statusMessage) {\r\n    return {statusMessage: statusMessage};\r\n  }\r\n\r\n  function freeResources() {\r\n    for (var ii = 0; ii < resourceDb_.length; ++ii) {\r\n      var resource = resourceDb_[ii];\r\n      if (resource instanceof WebGLBuffer) {\r\n        ctx.deleteBuffer(resource);\r\n      } else if (resource instanceof WebctxFramebuffer) {\r\n        ctx.deleteFramebuffer(resource);\r\n      } else if (resource instanceof WebctxProgram) {\r\n        ctx.deleteProgram(resource);\r\n      } else if (resource instanceof WebctxRenderbuffer) {\r\n        ctx.deleteRenderbuffer(resource);\r\n      } else if (resource instanceof WebctxShader) {\r\n        ctx.deleteShader(resource);\r\n      } else if (resource instanceof WebctxTexture) {\r\n        ctx.deleteTexture(resource);\r\n      }\r\n    }\r\n  }\r\n\r\n  wrapper_.loseContext = function() {\r\n    if (!contextLost_) {\r\n      contextLost_ = true;\r\n      ++contextId_;\r\n      while (ctx.getError());\r\n      clearErrors();\r\n      glErrorShadow_[ctx.CONTEXT_LOST_WEBGL] = true;\r\n      setTimeout(function() {\r\n          if (onLost_) {\r\n            onLost_(makeWebGLContextEvent(\"context lost\"));\r\n          }\r\n        }, 0);\r\n    }\r\n  };\r\n\r\n  wrapper_.restoreContext = function() {\r\n    if (contextLost_) {\r\n      if (onRestored_) {\r\n        setTimeout(function() {\r\n            freeResources();\r\n            resetToInitialState(ctx);\r\n            contextLost_ = false;\r\n            if (onRestored_) {\r\n              var callback = onRestored_;\r\n              onRestored_ = nextOnRestored_;\r\n              nextOnRestored_ = undefined;\r\n              callback(makeWebGLContextEvent(\"context restored\"));\r\n            }\r\n          }, 0);\r\n      } else {\r\n        throw \"You can not restore the context without a listener\"\r\n      }\r\n    }\r\n  };\r\n\r\n  // Wrap a few functions specially.\r\n  wrapper_.getError = function() {\r\n    if (!contextLost_) {\r\n      var err;\r\n      while (err = ctx.getError()) {\r\n        glErrorShadow_[err] = true;\r\n      }\r\n    }\r\n    for (var err in glErrorShadow_) {\r\n      if (glErrorShadow_[err]) {\r\n        delete glErrorShadow_[err];\r\n        return err;\r\n      }\r\n    }\r\n    return ctx.NO_ERROR;\r\n  };\r\n\r\n  var creationFunctions = [\r\n    \"createBuffer\",\r\n    \"createFramebuffer\",\r\n    \"createProgram\",\r\n    \"createRenderbuffer\",\r\n    \"createShader\",\r\n    \"createTexture\"\r\n  ];\r\n  for (var ii = 0; ii < creationFunctions.length; ++ii) {\r\n    var functionName = creationFunctions[ii];\r\n    wrapper_[functionName] = function(f) {\r\n      return function() {\r\n        if (contextLost_) {\r\n          return null;\r\n        }\r\n        var obj = f.apply(ctx, arguments);\r\n        obj.__webglDebugContextLostId__ = contextId_;\r\n        resourceDb_.push(obj);\r\n        return obj;\r\n      };\r\n    }(ctx[functionName]);\r\n  }\r\n\r\n  var functionsThatShouldReturnNull = [\r\n    \"getActiveAttrib\",\r\n    \"getActiveUniform\",\r\n    \"getBufferParameter\",\r\n    \"getContextAttributes\",\r\n    \"getAttachedShaders\",\r\n    \"getFramebufferAttachmentParameter\",\r\n    \"getParameter\",\r\n    \"getProgramParameter\",\r\n    \"getProgramInfoLog\",\r\n    \"getRenderbufferParameter\",\r\n    \"getShaderParameter\",\r\n    \"getShaderInfoLog\",\r\n    \"getShaderSource\",\r\n    \"getTexParameter\",\r\n    \"getUniform\",\r\n    \"getUniformLocation\",\r\n    \"getVertexAttrib\"\r\n  ];\r\n  for (var ii = 0; ii < functionsThatShouldReturnNull.length; ++ii) {\r\n    var functionName = functionsThatShouldReturnNull[ii];\r\n    wrapper_[functionName] = function(f) {\r\n      return function() {\r\n        if (contextLost_) {\r\n          return null;\r\n        }\r\n        return f.apply(ctx, arguments);\r\n      }\r\n    }(wrapper_[functionName]);\r\n  }\r\n\r\n  var isFunctions = [\r\n    \"isBuffer\",\r\n    \"isEnabled\",\r\n    \"isFramebuffer\",\r\n    \"isProgram\",\r\n    \"isRenderbuffer\",\r\n    \"isShader\",\r\n    \"isTexture\"\r\n  ];\r\n  for (var ii = 0; ii < isFunctions.length; ++ii) {\r\n    var functionName = isFunctions[ii];\r\n    wrapper_[functionName] = function(f) {\r\n      return function() {\r\n        if (contextLost_) {\r\n          return false;\r\n        }\r\n        return f.apply(ctx, arguments);\r\n      }\r\n    }(wrapper_[functionName]);\r\n  }\r\n\r\n  wrapper_.checkFramebufferStatus = function(f) {\r\n    return function() {\r\n      if (contextLost_) {\r\n        return ctx.FRAMEBUFFER_UNSUPPORTED;\r\n      }\r\n      return f.apply(ctx, arguments);\r\n    };\r\n  }(wrapper_.checkFramebufferStatus);\r\n\r\n  wrapper_.getAttribLocation = function(f) {\r\n    return function() {\r\n      if (contextLost_) {\r\n        return -1;\r\n      }\r\n      return f.apply(ctx, arguments);\r\n    };\r\n  }(wrapper_.getAttribLocation);\r\n\r\n  wrapper_.getVertexAttribOffset = function(f) {\r\n    return function() {\r\n      if (contextLost_) {\r\n        return 0;\r\n      }\r\n      return f.apply(ctx, arguments);\r\n    };\r\n  }(wrapper_.getVertexAttribOffset);\r\n\r\n  wrapper_.isContextLost = function() {\r\n    return contextLost_;\r\n  };\r\n\r\n  function wrapEvent(listener) {\r\n    if (typeof(listener) == \"function\") {\r\n      return listener;\r\n    } else {\r\n      return function(info) {\r\n        listener.handleEvent(info);\r\n      }\r\n    }\r\n  }\r\n\r\n  wrapper_.registerOnContextLostListener = function(listener) {\r\n    onLost_ = wrapEvent(listener);\r\n  };\r\n\r\n  wrapper_.registerOnContextRestoredListener = function(listener) {\r\n    if (contextLost_) {\r\n      nextOnRestored_ = wrapEvent(listener);\r\n    } else {\r\n      onRestored_ = wrapEvent(listener);\r\n    }\r\n  }\r\n\r\n  return wrapper_;\r\n}\r\n\r\nreturn {\r\n  /**\r\n   * Initializes this module. Safe to call more than once.\r\n   * @param {!WebGLRenderingContext} ctx A WebGL context. If\r\n   *    you have more than one context it doesn't matter which one\r\n   *    you pass in, it is only used to pull out constants.\r\n   */\r\n  'init': init,\r\n\r\n  /**\r\n   * Returns true or false if value matches any WebGL enum\r\n   * @param {*} value Value to check if it might be an enum.\r\n   * @return {boolean} True if value matches one of the WebGL defined enums\r\n   */\r\n  'mightBeEnum': mightBeEnum,\r\n\r\n  /**\r\n   * Gets an string version of an WebGL enum.\r\n   *\r\n   * Example:\r\n   *   WebGLDebugUtil.init(ctx);\r\n   *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());\r\n   *\r\n   * @param {number} value Value to return an enum for\r\n   * @return {string} The string version of the enum.\r\n   */\r\n  'glEnumToString': glEnumToString,\r\n\r\n  /**\r\n   * Converts the argument of a WebGL function to a string.\r\n   * Attempts to convert enum arguments to strings.\r\n   *\r\n   * Example:\r\n   *   WebGLDebugUtil.init(ctx);\r\n   *   var str = WebGLDebugUtil.glFunctionArgToString('bindTexture', 0, gl.TEXTURE_2D);\r\n   *\r\n   * would return 'TEXTURE_2D'\r\n   *\r\n   * @param {string} functionName the name of the WebGL function.\r\n   * @param {number} argumentIndx the index of the argument.\r\n   * @param {*} value The value of the argument.\r\n   * @return {string} The value as a string.\r\n   */\r\n  'glFunctionArgToString': glFunctionArgToString,\r\n\r\n  /**\r\n   * Given a WebGL context returns a wrapped context that calls\r\n   * gl.getError after every command and calls a function if the\r\n   * result is not NO_ERROR.\r\n   *\r\n   * You can supply your own function if you want. For example, if you'd like\r\n   * an exception thrown on any GL error you could do this\r\n   *\r\n   *    function throwOnGLError(err, funcName, args) {\r\n   *      throw WebGLDebugUtils.glEnumToString(err) + \" was caused by call to\" +\r\n   *            funcName;\r\n   *    };\r\n   *\r\n   *    ctx = WebGLDebugUtils.makeDebugContext(\r\n   *        canvas.getContext(\"webgl\"), throwOnGLError);\r\n   *\r\n   * @param {!WebGLRenderingContext} ctx The webgl context to wrap.\r\n   * @param {!function(err, funcName, args): void} opt_onErrorFunc The function\r\n   *     to call when gl.getError returns an error. If not specified the default\r\n   *     function calls console.log with a message.\r\n   */\r\n  'makeDebugContext': makeDebugContext,\r\n\r\n  /**\r\n   * Given a WebGL context returns a wrapped context that adds 4\r\n   * functions.\r\n   *\r\n   * ctx.loseContext:\r\n   *   simulates a lost context event.\r\n   *\r\n   * ctx.restoreContext:\r\n   *   simulates the context being restored.\r\n   *\r\n   * ctx.registerOnContextLostListener(listener):\r\n   *   lets you register a listener for context lost. Use instead\r\n   *   of addEventListener('webglcontextlostevent', listener);\r\n   *\r\n   * ctx.registerOnContextRestoredListener(listener):\r\n   *   lets you register a listener for context restored. Use\r\n   *   instead of addEventListener('webglcontextrestored',\r\n   *   listener);\r\n   *\r\n   * @param {!WebGLRenderingContext} ctx The webgl context to wrap.\r\n   */\r\n  'makeLostContextSimulatingContext': makeLostContextSimulatingContext,\r\n\r\n  /**\r\n   * Resets a context to the initial state.\r\n   * @param {!WebGLRenderingContext} ctx The webgl context to\r\n   *     reset.\r\n   */\r\n  'resetToInitialState': resetToInitialState\r\n};\r\n\r\n}();\r\n\r\n/* harmony default export */ var webgl_debug = (WebGLDebugUtils);\n// CONCATENATED MODULE: ./src/util/Util.js\n\r\n\r\n\r\nconst Util = {\r\n    initShaders: function(gl, vshader, fshader) {\r\n        var program = Util.createProgram(gl, vshader, fshader);\r\n        if (!program) {\r\n            console.log('Failed to create program');\r\n            return false;\r\n        }\r\n\r\n        gl.useProgram(program);\r\n        gl.program = program;\r\n\r\n        return true;\r\n    },\r\n\r\n    createProgram: function(gl, vshader, fshader) {\r\n        // Create shader object\r\n        var vertexShader = Util.loadShader(gl, gl.VERTEX_SHADER, vshader);\r\n        var fragmentShader = Util.loadShader(gl, gl.FRAGMENT_SHADER, fshader);\r\n        if (!vertexShader || !fragmentShader) {\r\n            return null;\r\n        }\r\n\r\n        // Create a program object\r\n        var program = gl.createProgram();\r\n        if (!program) {\r\n            return null;\r\n        }\r\n\r\n        // Attach the shader objects\r\n        gl.attachShader(program, vertexShader);\r\n        gl.attachShader(program, fragmentShader);\r\n\r\n        // Link the program object\r\n        gl.linkProgram(program);\r\n\r\n        // Check the result of linking\r\n        var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n        if (!linked) {\r\n            var error = gl.getProgramInfoLog(program);\r\n            console.log('Failed to link program: ' + error);\r\n            gl.deleteProgram(program);\r\n            gl.deleteShader(fragmentShader);\r\n            gl.deleteShader(vertexShader);\r\n            return null;\r\n        }\r\n        return program;\r\n    },\r\n\r\n    loadShader: function(gl, type, source) {\r\n        // Create shader object\r\n        var shader = gl.createShader(type);\r\n        if (shader == null) {\r\n            console.log('unable to create shader');\r\n            return null;\r\n        }\r\n\r\n        // Set the shader program\r\n        gl.shaderSource(shader, source);\r\n\r\n        // Compile the shader\r\n        gl.compileShader(shader);\r\n\r\n        // Check the result of compilation\r\n        var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n        if (!compiled) {\r\n            var error = gl.getShaderInfoLog(shader);\r\n            console.log('Failed to compile shader: ' + error);\r\n            gl.deleteShader(shader);\r\n            return null;\r\n        }\r\n\r\n        return shader;\r\n    },\r\n\r\n    getWebGLContext: function(canvas, opt_debug) {\r\n        // Get the rendering context for WebGL\r\n        var gl = webgl_utils.setupWebGL(canvas);\r\n        if (!gl) return null;\r\n\r\n        // if opt_debug is explicitly false, create the context for debugging\r\n        if (arguments.length < 2 || opt_debug) {\r\n            gl = webgl_debug.makeDebugContext(gl);\r\n        }\r\n\r\n        return gl;\r\n    },\r\n\r\n    create3DContext : function(canvas, opt_attribs) {\r\n        var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\r\n        var context = null;\r\n        for (var ii = 0; ii < names.length; ++ii) {\r\n            try {\r\n                context = canvas.getContext(names[ii], opt_attribs);\r\n            } catch(e) {}\r\n            if (context) {\r\n                break;\r\n            }\r\n        }\r\n        return context;\r\n    }\r\n}\r\n\r\n/* harmony default export */ var util_Util = (Util);\n// CONCATENATED MODULE: ./src/light/Light.js\n\r\nclass Light {\r\n    constructor(param) {\r\n        this.type = 'Light';\r\n\r\n        param = param || {};\r\n        this.color = param.color || [1,1,1];\r\n        this.intensity = param.intensity !== undefined ? param.intensity : 1;\r\n        this.castShadow = param.castShadow;\r\n    }\r\n}\r\n\r\n/* harmony default export */ var light_Light = (Light);\r\n\n// CONCATENATED MODULE: ./src/light/AmbientLight.js\n\r\n\r\nclass AmbientLight_AmbientLight extends light_Light{\r\n    constructor(param) {\r\n        super(param);\r\n        this.type = 'AmbientLight';\r\n    }\r\n}\r\n\r\n/* harmony default export */ var light_AmbientLight = (AmbientLight_AmbientLight);\r\n\n// CONCATENATED MODULE: ./src/light/DirectionalLight.js\n\r\n\r\n\r\nclass DirectionalLight_DirectionalLight extends light_Light{\r\n    constructor(param) {\r\n        super(param);\r\n        this.type = 'DirectionalLight';\r\n        this.direction = [1,1,1];\r\n        this.setDirection(param.direction || [1,1,1]);\r\n    }\r\n\r\n    setDirection(direction){\r\n        this.direction =  new Vector3().fromArray(direction).normalize().toArray();\r\n    }\r\n}\r\n\r\n/* harmony default export */ var light_DirectionalLight = (DirectionalLight_DirectionalLight);\r\n\n// CONCATENATED MODULE: ./src/math/Vector2.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nfunction Vector2( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n}\r\n\r\nObject.defineProperties( Vector2.prototype, {\r\n\r\n\t\"width\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.x = value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t\"height\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.y = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector2.prototype, {\r\n\r\n\tisVector2: true,\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x, y = this.y;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min = new Vector2();\r\n\t\tvar max = new Vector2();\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tcross: function ( v ) {\r\n\r\n\t\treturn this.x * v.y - this.y * v.x;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tangle: function () {\r\n\r\n\t\t// computes the angle in radians with respect to the positive x-axis\r\n\r\n\t\tvar angle = Math.atan2( this.y, this.x );\r\n\r\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\r\n\r\n\t\treturn angle;\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tmanhattanDistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'COOL.Vector2: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateAround: function ( center, angle ) {\r\n\r\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n\t\tvar x = this.x - center.x;\r\n\t\tvar y = this.y - center.y;\r\n\r\n\t\tthis.x = x * c - y * s + center.x;\r\n\t\tthis.y = x * s + y * c + center.y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/core/Renderer.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Renderer_Renderer {\r\n    constructor(param) {\r\n        var that = this;\r\n        param = param || {};\r\n        this.bufferList = [];\r\n\r\n        this.programList = {};\r\n\r\n        this.curCameraPosition = null;\r\n        this.renderList = {\r\n            opacityList:[],\r\n            transparentList:[]\r\n        };\r\n\r\n        this.camera = null;\r\n\r\n        var canvas = document.getElementById('webgl');\r\n        var gl = this.gl = canvas.getContext('2d');\r\n\r\n    }\r\n\r\n\r\n    render(scene, camera){\r\n        var that = this;\r\n        that.camera = camera;\r\n        that.curCameraPosition = camera.position;\r\n\r\n        var renderList = that.sortRenderList(scene);\r\n\r\n        var gl = that.gl;\r\n\r\n        // gl.clearRect(0,0,600,600);\r\n        gl.fillStyle=\"black\";\r\n        gl.fillRect(0,0,600,600);\r\n\r\n        var ambientLight = null;\r\n        var directionalLight = null;\r\n\r\n        for(var i in scene.lights){\r\n            if(scene.lights[i].type === 'DirectionalLight'){\r\n                directionalLight = scene.lights[i];\r\n            }else if(scene.lights[i].type === 'AmbientLight'){\r\n                ambientLight = scene.lights[i];\r\n            }\r\n        }\r\n\r\n        ambientLight = ambientLight || new light_AmbientLight({intensity:0});\r\n        directionalLight = directionalLight || new light_DirectionalLight({intensity:0});\r\n\r\n        for(var i in renderList){\r\n            this.renderOneMesh(renderList[i], camera, ambientLight, directionalLight);\r\n        }\r\n\r\n    }\r\n\r\n    renderOneMesh(mesh, camera, ambientLight, directionalLight){\r\n        var that = this;\r\n\r\n        var mesh = mesh || new core_Mesh();\r\n        var geometry = mesh.geometry;\r\n        var indices = geometry.indices;\r\n        var vertices = geometry.vertices;\r\n        var uv = geometry.uv;\r\n\r\n\r\n        var material = mesh.material;\r\n        var map = material.map;\r\n        var color = material.color;\r\n\r\n        var ctx = that.gl;\r\n\r\n        for(let i=0; i<indices.length; i+=3){\r\n            let point1x = vertices[indices[i]*3];\r\n            let point1y = vertices[indices[i]*3+1];\r\n            let point1z = vertices[indices[i]*3+2];\r\n\r\n            let point1s = uv[indices[i]*2];\r\n            let point1t = uv[indices[i]*2+1];\r\n\r\n            let point1 = new Vector3(point1x,point1y,point1z);\r\n            point1.uv = new Vector2(point1s,point1t);\r\n\r\n            let point2x = vertices[indices[i+1]*3];\r\n            let point2y = vertices[indices[i+1]*3+1];\r\n            let point2z = vertices[indices[i+1]*3+2];\r\n\r\n            let point2s = uv[indices[i+1]*2];\r\n            let point2t = uv[indices[i+1]*2+1];\r\n\r\n            let point2 = new Vector3(point2x,point2y,point2z);\r\n            point2.uv = new Vector2(point2s,point2t);\r\n\r\n            let point3x = vertices[indices[i+2]*3];\r\n            let point3y = vertices[indices[i+2]*3+1];\r\n            let point3z = vertices[indices[i+2]*3+2];\r\n\r\n            let point3s = uv[indices[i+2]*2];\r\n            let point3t = uv[indices[i+2]*2+1];\r\n\r\n            let point3 = new Vector3(point3x,point3y,point3z);\r\n            point3.uv = new Vector2(point3s,point3t);\r\n\r\n            that.drawTriangle(\r\n                point1,\r\n                point2,\r\n                point3,\r\n                mesh\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    v3Tov2(v3, mesh){\r\n        var that = this;\r\n\r\n        var vpMatrix = that.camera.VPmatrix.clone();\r\n        var v4 = vpMatrix.concat(mesh.matrixWorld).multiplyVector4(new Vector4(v3.x, v3.y, v3.z, 1));\r\n        var v3GL = new Vector3(v4.x/v4.w, v4.y/v4.w, v4.z/v4.w);\r\n        var v2GL = new Vector2(v3GL.x, v3GL.y);\r\n        var v2 = new Vector2((v2GL.x/2+0.5)*600, (0.5-v2GL.y/2)*600);\r\n\r\n        v2.uv = v3.uv;\r\n\r\n        return v2;\r\n    }\r\n\r\n    //背面剔除\r\n    checkClockwise(p1, p2, p3){\r\n        let isTriangleV2clockwise = false;\r\n\r\n        if ((p2.x - p1.x) *(p3.y - p1.y) -(p3.x - p1.x) *(p2.y-p1.y) < 0.0){\r\n            isTriangleV2clockwise = true;\r\n        }\r\n\r\n        return isTriangleV2clockwise;\r\n    }\r\n\r\n    drawTriangle(a,b,c, mesh){\r\n        var that = this;\r\n        var ctx = that.gl;\r\n\r\n        var a1 = that.v3Tov2(a, mesh);\r\n        var b1 = that.v3Tov2(b, mesh);\r\n        var c1 = that.v3Tov2(c, mesh);\r\n\r\n        if(!that.checkClockwise(a1,b1,c1)){\r\n            return;\r\n        }\r\n\r\n        ctx.fillStyle = '#ff0000';\r\n        ctx.strokeStyle = '#ff0000';\r\n\r\n        function sortTByY(a,b) {\r\n            return a.y - b.y;\r\n        }\r\n\r\n        var triangleList = [a1,b1,c1].sort(sortTByY);\r\n        var a2 = triangleList[0];\r\n        var b2 = triangleList[1];\r\n        var c2 = triangleList[2];\r\n        var flatTop,flatBottom;\r\n        if(b2.y === a2.y){\r\n            flatTop = [c2,a2,b2];\r\n        }else if(b2.y === c2.y){\r\n            flatBottom = [a2,b2,c2];\r\n        }else{\r\n            var alpha = (b2.y-a2.y)/(c2.y-a2.y);\r\n\r\n            let d = that.getV2Linear(a2,c2,alpha);\r\n\r\n            flatBottom = [a2,b2,d];\r\n            flatTop = [c2,b2,d];\r\n        }\r\n\r\n        if(flatBottom){\r\n            that.drawFlatT(flatBottom,mesh);\r\n        }\r\n        if(flatTop){\r\n            that.drawFlatT(flatTop,mesh);\r\n        }\r\n\r\n    }\r\n\r\n    getV2Linear(a2,c2,alpha){\r\n        let ac = new Vector2().subVectors(c2,a2);\r\n        let d = a2.clone().addScaledVector(ac, alpha);\r\n\r\n        let auv = a2.uv.clone();\r\n        let cuv = c2.uv.clone();\r\n        let duv = new Vector2().addVectors(auv.multiplyScalar(1-alpha), cuv.multiplyScalar(alpha));\r\n        d.uv = duv;\r\n\r\n        return d;\r\n    }\r\n\r\n    drawT(t){\r\n        var that = this;\r\n        var ctx = that.gl;\r\n\r\n        var a1 = t[0];\r\n        var b1 = t[1];\r\n        var c1 = t[2];\r\n\r\n        ctx.fillStyle = '#ff0000';\r\n        ctx.strokeStyle = '#ff0000';\r\n        ctx.beginPath();\r\n        ctx.moveTo(a1.x,a1.y);\r\n        ctx.lineTo(b1.x,b1.y);\r\n        ctx.lineTo(c1.x,c1.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n\r\n    drawFlatT(t, mesh){\r\n        let that = this;\r\n        let ctx = that.gl;\r\n\r\n        let a = t[0];\r\n        let b;\r\n        let c;\r\n\r\n        if(t[1].x<t[2].x){\r\n            b = t[1];\r\n            c = t[2];\r\n        }else{\r\n            c = t[1];\r\n            b = t[2];\r\n        }\r\n\r\n        let startY = Math.round(a.y);\r\n        let endY = Math.round(b.y);\r\n        let height = Math.abs(endY - startY);\r\n\r\n\r\n        let dy = 1;\r\n        if(endY<startY){\r\n            dy = -1;\r\n        }\r\n\r\n        for(let y=startY; (y-startY)*(y-endY)<=0; y+=dy){\r\n            if(y<0||y>600){\r\n                continue;\r\n            }\r\n\r\n            let alpha = Math.abs(y-startY)/height;\r\n            let startV2 = that.getV2Linear(a,b,alpha);\r\n            let endV2 = that.getV2Linear(a,c,alpha);\r\n            let startX = Math.round(startV2.x);\r\n            let endX = Math.round(endV2.x);\r\n\r\n            let width = endX - startX;\r\n            if(width === 0){\r\n                continue;\r\n            }\r\n\r\n            for(let x=startX; x<=endX; x++){\r\n                if(x<0||x>600){\r\n                    continue;\r\n                }\r\n\r\n                let alphaX = Math.abs(x-startX)/width;\r\n                let point = that.getV2Linear(startV2,endV2,alphaX);\r\n\r\n                let color = mesh.material.color;\r\n                let color255;\r\n\r\n                if(color){\r\n                    color255 = [color[0]*255,color[1]*255,color[2]*255,color[3]];\r\n                }\r\n\r\n                let tex = mesh.material.map;\r\n                if(tex && tex.ready){\r\n                    color255 = tex.getColorByUV(point.uv.x,point.uv.y);\r\n                }\r\n\r\n                let r = color255[0];\r\n                let g = color255[1];\r\n                let b = color255[2];\r\n\r\n                ctx.fillStyle = 'rgb('+r+','+g+','+b+')';\r\n\r\n                ctx.fillRect(x,y,1,1);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    getAllObjList(obj, allObjList){\r\n        var that = this;\r\n        for(var i in obj.children){\r\n            if(obj.children[i].geometry){\r\n                allObjList.push(obj.children[i]);\r\n            }\r\n            that.getAllObjList(obj.children[i],allObjList);\r\n        }\r\n        return allObjList;\r\n    }\r\n\r\n    sortRenderList(scene){\r\n        var that = this;\r\n\r\n        var allObjList = that.getAllObjList(scene ,[]);\r\n\r\n        for(var i in allObjList){\r\n            var pa = allObjList[i].getWorldPosition();\r\n            var pc = new Vector3().fromArray(that.curCameraPosition);\r\n            var da = pc.distanceTo(pa);\r\n            allObjList[i].distanceToCamera = da;\r\n        }\r\n        var allObjSortedList = allObjList.sort(that.sortFun);\r\n        return allObjSortedList;\r\n    }\r\n\r\n    sortFun(a, b){\r\n        return b.distanceToCamera - a.distanceToCamera;\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var core_Renderer = (Renderer_Renderer);\r\n\n// CONCATENATED MODULE: ./src/camera/Camera.js\n\r\n\r\n\r\n\r\n\r\nclass Camera_Camera {\r\n    constructor(fov, aspect, near, far) {\r\n        this.fov = fov;\r\n        this.aspect = aspect;\r\n        this.near = near;\r\n        this.far = far;\r\n\r\n        this.position = [0, 0, 10];\r\n        this.target = [0,0,0];\r\n        this.up = [0,1,0];\r\n\r\n        this.VPmatrix = new Matrix4();\r\n\r\n        this.direction = [0,0,-1];\r\n        this.right = [1,0,0];\r\n\r\n        this.scale = [1,1,1];\r\n        this.quaternion = new Quaternion();\r\n        this.matrix = new Matrix4();\r\n        this.matrixWorld = this.matrix;\r\n        this.projectionMatrix = new Matrix4();\r\n\r\n        this.updateAll();\r\n    }\r\n\r\n    updateAll(){\r\n        this.updateOption();\r\n        this.updateMatrix();\r\n        this.updateVPMatrix();\r\n    }\r\n\r\n    updateMatrix(){\r\n        var quaternionD = new Quaternion().setFromUnitVectors(new Vector3(0,0,-1), new Vector3().fromArray(this.direction));\r\n        var right2 = new Vector3(1,0,0).applyQuaternion(quaternionD);\r\n        var quaternionR = new Quaternion().setFromUnitVectors(right2, new Vector3().fromArray(this.right));\r\n        var quaternion = new Quaternion().multiplyQuaternions(quaternionR, quaternionD);\r\n        this.quaternion = quaternion;\r\n\r\n        this.matrix.compose( new Vector3().fromArray(this.position), this.quaternion, new Vector3().fromArray(this.scale) );\r\n        this.projectionMatrix = new Matrix4().setPerspective(this.fov, this.aspect, this.near, this.far);\r\n        // this.updateMatrixWorld ();\r\n    }\r\n\r\n    updateOption(){\r\n        var targetV3 = new Vector3().fromArray(this.target);\r\n        var positionV3 = new Vector3().fromArray(this.position);\r\n        var upV3 = new Vector3().fromArray(this.up);\r\n\r\n        var directionV3 = new Vector3().subVectors(targetV3, positionV3).normalize();\r\n        this.direction = directionV3.toArray();\r\n\r\n        var rightV3 = new Vector3().crossVectors(directionV3, upV3).normalize();\r\n        this.right = rightV3.toArray();\r\n\r\n        // this.up = new Vector3().crossVectors(rightV3, directionV3).normalize().toArray();\r\n    }\r\n\r\n    setPosition(position){\r\n        this.position = position;\r\n        this.updateAll();\r\n    }\r\n\r\n    setTarget(target){\r\n        this.target = target;\r\n        this.updateAll();\r\n    }\r\n\r\n    setUp(up){\r\n        this.up = new Vector3().fromArray(up).normalize().toArray();\r\n        this.updateAll();\r\n    }\r\n\r\n\r\n\r\n    updateVPMatrix(){\r\n        this.VPmatrix = new Matrix4().setPerspective(this.fov, this.aspect, this.near, this.far);\r\n        var Vmatrix = new Matrix4().getInverse(this.matrix);\r\n        this.VPmatrix.concat(Vmatrix);\r\n        //等价\r\n        // this.VPmatrix.lookAt2(this.position[0],this.position[1],this.position[2], this.target[0],this.target[1],this.target[2], this.up[0],this.up[1],this.up[2]);\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var camera_Camera = (Camera_Camera);\r\n\r\n\n// CONCATENATED MODULE: ./src/camera/CameraController.js\n\r\n\r\n\r\nclass CameraController_CameraController {\r\n    constructor(camera) {\r\n        this.camera = camera;\r\n\r\n        this.mouse0State = 'up';\r\n        this.mouse1State = 'up';\r\n        this.mouse2State = 'up';\r\n\r\n        this.x = -1;\r\n        this.y = -1;\r\n\r\n        this.minTilt = 0.1;\r\n        this.maxTilt = 3.04;\r\n    }\r\n\r\n    update(){\r\n        var that = this;\r\n\r\n        window.addEventListener('mousedown',function (e) {\r\n            // console.log(e.button+' down '+e.clientX+','+e.clientY);\r\n            var dom =  window.document.getElementsByTagName('canvas')[0];\r\n            if(!dom){\r\n                return;\r\n            }\r\n            var rect = dom.getBoundingClientRect();\r\n            if(e.clientX < rect.left || e.clientX > rect.right || e.clientY < rect.top || e.clientY > rect.bottom){\r\n                return;\r\n            }\r\n            if(e.button == 0){\r\n                that.mouse0State = 'down';\r\n            }else if(e.button == 1){\r\n                that.mouse1State = 'down';\r\n            }else if(e.button == 2){\r\n                that.mouse2State = 'down';\r\n            }\r\n        });\r\n\r\n        window.addEventListener('mouseup',function (e) {\r\n            // console.log(e.button+' up '+e.clientX+','+e.clientY);\r\n            if(e.button == 0){\r\n                that.mouse0State = 'up';\r\n            }else if(e.button == 1){\r\n                that.mouse1State = 'up';\r\n            }else if(e.button == 2){\r\n                that.mouse2State = 'up';\r\n            }\r\n        });\r\n\r\n        window.addEventListener('mousemove',function (e) {\r\n            // console.log(e.button+' move '+e.clientX+','+e.clientY);\r\n\r\n            var camera = that.camera;\r\n            if(that.mouse0State == 'down'){\r\n                var deltaX = e.clientX - that.x;\r\n                var deltaY = e.clientY - that.y;\r\n\r\n                // var angle = Math.sqrt(deltaX*deltaX + deltaY*deltaY)/80;\r\n                //\r\n                // var upV3 = new Vector3(camera.up);\r\n                // var rightV3 = new Vector3(camera.right);\r\n                //\r\n                // var axisV3 = new Vector3().addVectors( new Vector3().scaleVectors(upV3,deltaX) , new Vector3().scaleVectors(rightV3,deltaY)).normalize();\r\n                //\r\n                // var oldPositionV3 = new Vector3(camera.position);\r\n                // var newPositionV3 = new Vector3().rotateByVector(oldPositionV3, axisV3, angle);\r\n                // var newPosition = newPositionV3.toArray();\r\n                //\r\n                // camera.setPosition(newPosition);\r\n\r\n                var axisYV3 = new Vector3(0,1,0);\r\n                var angleY = deltaX/200;\r\n                var oldPositionV3 = new Vector3().fromArray(camera.position);\r\n                var newPositionV3 = new Vector3().rotateByVector(oldPositionV3, axisYV3, angleY);\r\n                var newPosition = newPositionV3.toArray();\r\n                camera.setPosition(newPosition);\r\n\r\n\r\n                var angleX = deltaY/200;\r\n                var tilt = that.getTilt();\r\n                var endTilt = tilt - angleX;\r\n\r\n                if(endTilt<that.maxTilt && endTilt>that.minTilt){\r\n\r\n                    var axisXV3 = new Vector3(camera.right[0], camera.right[1], camera.right[2]);\r\n                    oldPositionV3 = new Vector3().fromArray(camera.position);\r\n                    newPositionV3 = new Vector3().rotateByVector(oldPositionV3, axisXV3, angleX);\r\n                    newPosition = newPositionV3.toArray();\r\n                    camera.setPosition(newPosition);\r\n                }\r\n\r\n            }\r\n\r\n            if(that.mouse2State == 'down'){\r\n                var deltaX = e.clientX - that.x;\r\n                var deltaY = e.clientY - that.y;\r\n\r\n                var tempUp = new Vector3().crossVectors(new Vector3().fromArray(camera.right), new Vector3().fromArray(camera.direction));\r\n                var axisYV3 = tempUp;\r\n\r\n                var oldTargetV3 = new Vector3().fromArray(camera.target);\r\n                var newTargetV3 = new Vector3().addVectors(oldTargetV3, new Vector3().scaleVectors(axisYV3, deltaY/30));\r\n                var newTargetV3 = newTargetV3.toArray();\r\n                camera.setTarget(newTargetV3);\r\n\r\n                var oldPositionV3 = new Vector3().fromArray(camera.position);\r\n                var newPositionV3 = new Vector3().addVectors(oldPositionV3, new Vector3().scaleVectors(axisYV3, deltaY/30));\r\n                var newPosition = newPositionV3.toArray();\r\n                camera.setPosition(newPosition);\r\n\r\n                var axisXV3 = new Vector3().fromArray(camera.right);\r\n\r\n                oldTargetV3 = new Vector3().fromArray(camera.target);\r\n                newTargetV3 = new Vector3().addVectors(oldTargetV3, new Vector3().scaleVectors(axisXV3, -deltaX/30));\r\n                newTargetV3 = newTargetV3.toArray();\r\n                camera.setTarget(newTargetV3);\r\n\r\n                oldPositionV3 = new Vector3().fromArray(camera.position);\r\n                var newPositionV3 = new Vector3().addVectors(oldPositionV3, new Vector3().scaleVectors(axisXV3, -deltaX/30));\r\n                newPosition = newPositionV3.toArray();\r\n                camera.setPosition(newPosition);\r\n\r\n            }\r\n\r\n            that.x = e.clientX;\r\n            that.y = e.clientY;\r\n        });\r\n\r\n        window.addEventListener('mousewheel',function (e) {\r\n            // console.log(e.button+' wheel '+e.wheelDelta);\r\n\r\n            var camera = that.camera;\r\n\r\n            var delta = e.wheelDelta;\r\n\r\n            if(delta == 0 || typeof(delta) != 'number'){\r\n                return;\r\n            }\r\n            delta = Math.abs(delta)/delta;\r\n\r\n            var directionV3 = new Vector3().fromArray(camera.direction);\r\n\r\n            var oldPositionV3 = new Vector3().fromArray(camera.position);\r\n            var dis = oldPositionV3.lengthSq();\r\n            dis = Math.sqrt(dis);\r\n            var newPositionV3 = new Vector3().addVectors(oldPositionV3, new Vector3().scaleVectors(directionV3, dis/10*delta));\r\n            var newPosition = newPositionV3.toArray();\r\n\r\n            camera.setPosition(newPosition);\r\n\r\n        });\r\n    }\r\n\r\n    getTilt(){\r\n        var camera = this.camera;\r\n        var dir = camera.direction;\r\n        var axixY = new Vector3(0,-1,0);\r\n        var dirV3 = new Vector3().fromArray(dir);\r\n\r\n        var tilt = axixY.angleTo(dirV3);\r\n        return tilt;\r\n\r\n    }\r\n}\r\n\r\n/* harmony default export */ var camera_CameraController = (CameraController_CameraController);\r\n\n// CONCATENATED MODULE: ./src/core/Scene.js\n\r\n\r\n\r\nclass Scene {\r\n    constructor(param) {\r\n        param = param || {};\r\n        this.children = [];\r\n        this.lights = [];\r\n    }\r\n\r\n    add(obj){\r\n        if(obj.type == 'Mesh'){\r\n            this.children.push(obj);\r\n        }else{\r\n            this.lights.push(obj);\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n/* harmony default export */ var core_Scene = (Scene);\n// CONCATENATED MODULE: ./src/material/Texture.js\n\r\nclass Texture {\r\n    constructor(param) {\r\n        param = param || {};\r\n        this.image = param.image || new Image();\r\n        this.wrapS = param.wrapS || COOL.REPEAT;\r\n        this.wrapT = param.wrapT || COOL.REPEAT;\r\n        this.magFilter = param.magFilter || COOL.NEAREST;\r\n        this.minFilter = param.minFilter || COOL.NEAREST;\r\n\r\n        this.imageData = null;\r\n        this.width = null;\r\n        this.height = null;\r\n\r\n        this.ready = false;\r\n\r\n        this.initCanvas();\r\n    }\r\n\r\n    initCanvas(){\r\n        let that = this;\r\n        that.image.onload=function () {\r\n            let width = that.image.width;\r\n            let height = that.image.height;\r\n            let canvas = document.createElement('canvas');\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            let ctx = canvas.getContext(\"2d\");\r\n            ctx.drawImage(that.image, 0, 0);\r\n            let imageData = ctx.getImageData(0, 0, width, height).data;\r\n\r\n            that.width = width;\r\n            that.height = height;\r\n            that.imageData = imageData;\r\n\r\n            that.ready = true;\r\n        }\r\n    }\r\n\r\n    getColorByUV(s,t){\r\n\r\n        let u = s;\r\n        let v = t;\r\n\r\n        if(u>1){\r\n            u = u - Math.floor(u);\r\n        }\r\n        if(v>1){\r\n            v = v - Math.floor(v);\r\n        }\r\n\r\n        let index = Math.floor(v*this.height)*this.width*4 + Math.floor(u*this.width)*4;\r\n        let r = this.imageData[index];\r\n        let g = this.imageData[index+1];\r\n        let b = this.imageData[index+2];\r\n        let a = this.imageData[index+3];\r\n\r\n        return [r,g,b,a];\r\n    }\r\n\r\n    clone(){\r\n\r\n        var image = new Image();\r\n        image.src = this.image.src;\r\n\r\n        var texture = new Texture({\r\n            image: image,\r\n            wrapS: this.wrapS,\r\n            wrapT: this.wrapT,\r\n            magFilter: this.magFilter,\r\n            minFilter: this.minFilter\r\n        });\r\n\r\n        return texture;\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var material_Texture = (Texture);\r\n\n// CONCATENATED MODULE: ./src/material/MeshBasicMaterial.js\n\r\n\r\nclass MeshBasicMaterial_MeshBasicMaterial extends material_Material{\r\n    constructor(param) {\r\n        super(param);\r\n        this.type = 'MeshBasicMaterial';\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var material_MeshBasicMaterial = (MeshBasicMaterial_MeshBasicMaterial);\r\n\n// CONCATENATED MODULE: ./src/material/MeshLambertMaterial.js\n\r\n\r\nclass MeshLambertMaterial_MeshLambertMaterial extends material_Material{\r\n    constructor(param) {\r\n        super(param);\r\n        this.type = 'MeshLambertMaterial';\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var material_MeshLambertMaterial = (MeshLambertMaterial_MeshLambertMaterial);\r\n\n// CONCATENATED MODULE: ./src/material/MeshStandardMaterial.js\n\r\n\r\nclass MeshStandardMaterial_MeshStandardMaterial extends material_Material{\r\n    constructor(param) {\r\n        super(param);\r\n        this.type = 'MeshStandardMaterial';\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var material_MeshStandardMaterial = (MeshStandardMaterial_MeshStandardMaterial);\r\n\n// CONCATENATED MODULE: ./src/core/Geometry.js\n\r\n\r\nclass Geometry_Geometry {\r\n    constructor(param) {\r\n        param = param || {};\r\n\r\n        // Create a cube\r\n        //    v6----- v5\r\n        //   /|      /|\r\n        //  v1------v0|\r\n        //  | |     | |\r\n        //  | |v7---|-|v4\r\n        //  |/      |/\r\n        //  v2------v3\r\n\r\n        this.uv = param.uv || new Float32Array([   // Vertex coordinates\r\n\r\n            1,1, 0,1, 0,0, 1,0,  // v0-v1-v2-v3 front\r\n            0,1, 0,0, 1,0, 1,1,  // v0-v3-v4-v5 right\r\n            1,0, 1,1, 0,1, 0,0,  // v0-v5-v6-v1 up\r\n            1,1, 0,1, 0,0, 1,0,  // v1-v6-v7-v2 left\r\n            0,1, 1,1, 1,0, 0,0,  // v7-v4-v3-v2 down\r\n            1,0, 0,0, 0,1, 1,1   // v4-v7-v6-v5 back\r\n\r\n        ]);\r\n\r\n        this.vertices = param.vertices || new Float32Array([   // Vertex coordinates\r\n            0.5, 0.5, 0.5,  -0.5, 0.5, 0.5,  -0.5,-0.5, 0.5,   0.5,-0.5, 0.5,  // v0-v1-v2-v3 front\r\n            0.5, 0.5, 0.5,   0.5,-0.5, 0.5,   0.5,-0.5,-0.5,   0.5, 0.5,-0.5,  // v0-v3-v4-v5 right\r\n            0.5, 0.5, 0.5,   0.5, 0.5,-0.5,  -0.5, 0.5,-0.5,  -0.5, 0.5, 0.5,  // v0-v5-v6-v1 up\r\n            -0.5, 0.5, 0.5,  -0.5, 0.5,-0.5,  -0.5,-0.5,-0.5,  -0.5,-0.5, 0.5,  // v1-v6-v7-v2 left\r\n            -0.5,-0.5,-0.5,   0.5,-0.5,-0.5,   0.5,-0.5, 0.5,  -0.5,-0.5, 0.5,  // v7-v4-v3-v2 down\r\n            0.5,-0.5,-0.5,  -0.5,-0.5,-0.5,  -0.5, 0.5,-0.5,   0.5, 0.5,-0.5   // v4-v7-v6-v5 back\r\n        ]);\r\n\r\n        this.normal = param.normal || this.vertices;\r\n\r\n        if(param.indices){\r\n            this.indices = new Uint16Array(param.indices);\r\n        }else{\r\n            var indicesArray = [];\r\n            for(var i=0; i<param.vertices.length/3; i++){\r\n                indicesArray.push(i);\r\n            }\r\n            this.indices = new Uint16Array(indicesArray);\r\n        }\r\n\r\n\r\n        this.morphAttributes = param.morphAttributes;\r\n\r\n        // this.updateNormal();\r\n\r\n        this.updataBuffer();\r\n\r\n    }\r\n\r\n    updataBuffer(){\r\n        var buffer = [];\r\n        var uv = this.uv;\r\n        var vertices = this.vertices;\r\n        var normal = this.normal;\r\n        for(var i=0; i<vertices.length; i+=3){\r\n            buffer.push(vertices[i+0]);\r\n            buffer.push(vertices[i+1]);\r\n            buffer.push(vertices[i+2]);\r\n\r\n            buffer.push(normal[i+0]);\r\n            buffer.push(normal[i+1]);\r\n            buffer.push(normal[i+2]);\r\n\r\n            buffer.push(uv[i/3*2+0]);\r\n            buffer.push(uv[i/3*2+1]);\r\n        }\r\n\r\n        this.buffer = new Float32Array(buffer);\r\n    }\r\n\r\n    updateNormal(){\r\n        var normal = [];\r\n        var vertices = this.vertices;\r\n        for(var i=0; i<vertices.length; i+=3*4){\r\n            var line1 = new Vector3().subVectors(\r\n                new Vector3(vertices[i+0], vertices[i+1], vertices[i+2]),\r\n                new Vector3(vertices[i+3], vertices[i+4], vertices[i+5])\r\n            );\r\n            var line2 = new Vector3().subVectors(\r\n                new Vector3(vertices[i+3], vertices[i+4], vertices[i+5]),\r\n                new Vector3(vertices[i+6], vertices[i+7], vertices[i+8]),\r\n            );\r\n            var cur_normal = new Vector3().crossVectors(\r\n                line1,\r\n                line2\r\n            ).toArray();\r\n            for(var j=0 ;j<4; j++){\r\n                normal.push(cur_normal[0], cur_normal[1], cur_normal[2]);\r\n            }\r\n        }\r\n        this.normal = new Float32Array(normal);\r\n\r\n    }\r\n\r\n    clone(){\r\n        var geometry = new Geometry_Geometry({\r\n            vertices: this.vertices.slice(0),\r\n            indices: this.indices.slice(0)\r\n        });\r\n\r\n        return geometry;\r\n    }\r\n}\r\n\r\n/* harmony default export */ var core_Geometry = (Geometry_Geometry);\r\n\n// CONCATENATED MODULE: ./src/core/BoxGeometry.js\n\r\n\r\nclass BoxGeometry_BoxGeometry {\r\n    constructor(param) {\r\n        param = param || {};\r\n\r\n        this.uv = param.uv || new Float32Array([   // Vertex coordinates\r\n\r\n            1,1, 0,1, 0,0, 1,0,  // v0-v1-v2-v3 front\r\n            0,1, 0,0, 1,0, 1,1,  // v0-v3-v4-v5 right\r\n            1,0, 1,1, 0,1, 0,0,  // v0-v5-v6-v1 up\r\n            1,1, 0,1, 0,0, 1,0,  // v1-v6-v7-v2 left\r\n            0,1, 1,1, 1,0, 0,0,  // v7-v4-v3-v2 down\r\n            1,0, 0,0, 0,1, 1,1   // v4-v7-v6-v5 back\r\n\r\n        ]);\r\n\r\n        this.vertices = param.indices || new Float32Array([   // Vertex coordinates\r\n            0.5, 0.5, 0.5,  -0.5, 0.5, 0.5,  -0.5,-0.5, 0.5,   0.5,-0.5, 0.5,  // v0-v1-v2-v3 front\r\n            0.5, 0.5, 0.5,   0.5,-0.5, 0.5,   0.5,-0.5,-0.5,   0.5, 0.5,-0.5,  // v0-v3-v4-v5 right\r\n            0.5, 0.5, 0.5,   0.5, 0.5,-0.5,  -0.5, 0.5,-0.5,  -0.5, 0.5, 0.5,  // v0-v5-v6-v1 up\r\n            -0.5, 0.5, 0.5,  -0.5, 0.5,-0.5,  -0.5,-0.5,-0.5,  -0.5,-0.5, 0.5,  // v1-v6-v7-v2 left\r\n            -0.5,-0.5,-0.5,   0.5,-0.5,-0.5,   0.5,-0.5, 0.5,  -0.5,-0.5, 0.5,  // v7-v4-v3-v2 down\r\n            0.5,-0.5,-0.5,  -0.5,-0.5,-0.5,  -0.5, 0.5,-0.5,   0.5, 0.5,-0.5   // v4-v7-v6-v5 back\r\n        ]);\r\n\r\n        this.normal = param.normal || this.vertices;\r\n\r\n        this.indices = param.indices || new Uint16Array([       // Indices of the vertices\r\n            0, 1, 2,   0, 2, 3,    // front\r\n            4, 5, 6,   4, 6, 7,    // right\r\n            8, 9,10,   8,10,11,    // up\r\n            12,13,14,  12,14,15,    // left\r\n            16,17,18,  16,18,19,    // down\r\n            20,21,22,  20,22,23     // back\r\n        ]);\r\n\r\n        this.updateNormal();\r\n\r\n        this.updataBuffer();\r\n\r\n    }\r\n\r\n    updataBuffer(){\r\n        var buffer = [];\r\n        var uv = this.uv;\r\n        var vertices = this.vertices;\r\n        var normal = this.normal;\r\n        for(var i=0; i<vertices.length; i+=3){\r\n            buffer.push(vertices[i+0]);\r\n            buffer.push(vertices[i+1]);\r\n            buffer.push(vertices[i+2]);\r\n\r\n            buffer.push(normal[i+0]);\r\n            buffer.push(normal[i+1]);\r\n            buffer.push(normal[i+2]);\r\n\r\n            buffer.push(uv[i/3*2+0]);\r\n            buffer.push(uv[i/3*2+1]);\r\n        }\r\n\r\n        this.buffer = new Float32Array(buffer);\r\n    }\r\n\r\n    updateNormal(){\r\n        var normal = [];\r\n        var vertices = this.vertices;\r\n        for(var i=0; i<vertices.length; i+=3*4){\r\n            var line1 = new Vector3().subVectors(\r\n                new Vector3(vertices[i+0], vertices[i+1], vertices[i+2]),\r\n                new Vector3(vertices[i+3], vertices[i+4], vertices[i+5])\r\n            );\r\n            var line2 = new Vector3().subVectors(\r\n                new Vector3(vertices[i+3], vertices[i+4], vertices[i+5]),\r\n                new Vector3(vertices[i+6], vertices[i+7], vertices[i+8]),\r\n            );\r\n            var cur_normal = new Vector3().crossVectors(\r\n                line1,\r\n                line2\r\n            ).toArray();\r\n            for(var j=0 ;j<4; j++){\r\n                normal.push(cur_normal[0], cur_normal[1], cur_normal[2]);\r\n            }\r\n        }\r\n        this.normal = new Float32Array(normal);\r\n\r\n    }\r\n\r\n\r\n    clone(){\r\n        var geometry = new BoxGeometry_BoxGeometry({\r\n            vertices: this.vertices.slice(0),\r\n            indices: this.indices.slice(0)\r\n        });\r\n\r\n        return geometry;\r\n    }\r\n}\r\n\r\n/* harmony default export */ var core_BoxGeometry = (BoxGeometry_BoxGeometry);\r\n\n// CONCATENATED MODULE: ./src/core/SphereGeometry.js\n\r\n\r\nclass SphereGeometry_SphereGeometry {\r\n    constructor( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n        radius = radius || 1;\r\n\r\n        widthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n        heightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n        phiStart = phiStart !== undefined ? phiStart : 0;\r\n        phiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n        var thetaEnd = thetaStart + thetaLength;\r\n\r\n        var ix, iy;\r\n\r\n        var index = 0;\r\n        var grid = [];\r\n\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( iy = 0; iy <= heightSegments; iy ++ ) {\r\n\r\n            var verticesRow = [];\r\n\r\n            var v = iy / heightSegments;\r\n\r\n            for ( ix = 0; ix <= widthSegments; ix ++ ) {\r\n\r\n                var u = ix / widthSegments;\r\n\r\n                // vertex\r\n\r\n                vertex = new Vector3(\r\n                    - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength ),\r\n                    radius * Math.cos( thetaStart + v * thetaLength ),\r\n                    radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength )\r\n                );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                normal = vertex.clone().normalize();\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( u, 1 - v );\r\n\r\n                verticesRow.push( index ++ );\r\n\r\n            }\r\n\r\n            grid.push( verticesRow );\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( iy = 0; iy < heightSegments; iy ++ ) {\r\n\r\n            for ( ix = 0; ix < widthSegments; ix ++ ) {\r\n\r\n                var a = grid[ iy ][ ix + 1 ];\r\n                var b = grid[ iy ][ ix ];\r\n                var c = grid[ iy + 1 ][ ix ];\r\n                var d = grid[ iy + 1 ][ ix + 1 ];\r\n\r\n                if ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\r\n                if ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.vertices = new Float32Array(vertices);\r\n        this.normal = new Float32Array(normals);\r\n        this.uv = new Float32Array(uvs);\r\n\r\n        this.indices = new Uint16Array(indices);\r\n\r\n        var buffer = [];\r\n        var vertices = this.vertices;\r\n        var normal = this.normal;\r\n        var uv = this.uv;\r\n        for(var i=0; i<vertices.length; i+=3){\r\n            buffer.push(vertices[i+0]);\r\n            buffer.push(vertices[i+1]);\r\n            buffer.push(vertices[i+2]);\r\n\r\n            buffer.push(normal[i+0]);\r\n            buffer.push(normal[i+1]);\r\n            buffer.push(normal[i+2]);\r\n\r\n            buffer.push(uv[i/3*2+0]);\r\n            buffer.push(uv[i/3*2+1]);\r\n        }\r\n\r\n        this.buffer = new Float32Array(buffer);\r\n\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var core_SphereGeometry = (SphereGeometry_SphereGeometry);\r\n\n// CONCATENATED MODULE: ./src/core/GLTFLoader2.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GLTFLoader2_GLTFLoader{\r\n    constructor(){\r\n        this.gltfObj = null;\r\n        this.urlBase = null;\r\n\r\n        this.arrayBuffers = [];\r\n        this.arrayBufferCount = 0;\r\n        this.dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\r\n    }\r\n\r\n    load(url, onLoadSuccess){\r\n        this.gltfObj = null;\r\n        this.urlBase = null;\r\n\r\n        this.arrayBuffers = [];\r\n        this.arrayBufferCount = 0;\r\n\r\n        var that = this;\r\n        var urlArray = url.split('/');\r\n        var jsonName = urlArray[urlArray.length-1];\r\n        that.urlBase = url.split(jsonName)[0];\r\n\r\n        var request = new XMLHttpRequest();\r\n        request.open(\"get\", url);\r\n        request.onload = function () {\r\n            if (request.status == 200) {\r\n                var gltfObj = JSON.parse(request.responseText);\r\n                that.gltfObj = gltfObj;\r\n                console.log(gltfObj);\r\n\r\n                that.arrayBufferCount = gltfObj.buffers.length;\r\n                var loadBufferCount = 0;\r\n\r\n                for(var i in gltfObj.buffers){\r\n\r\n                    var buffer = gltfObj.buffers[i];\r\n\r\n                    var dataUriRegexResult = buffer.uri.match( that.dataUriRegex );\r\n                    if(dataUriRegexResult){\r\n\r\n                        var buffer = that.base64ToArrayBuffer(dataUriRegexResult);\r\n                        if(buffer){\r\n                            that.arrayBuffers[i] = buffer;\r\n                            loadBufferCount ++;\r\n\r\n                            if(loadBufferCount === that.arrayBufferCount){\r\n\r\n                                var sceneObj = gltfObj.scenes[0];\r\n                                var scene = new core_Scene();\r\n                                for(var nodeindex in sceneObj.nodes){\r\n                                    var nodesIndex = sceneObj.nodes[nodeindex];\r\n                                    var nodesObj = gltfObj.nodes[nodesIndex];\r\n                                    var cur_mesh = that.nodeToMesh(nodesObj);\r\n                                    scene.add(cur_mesh);\r\n                                }\r\n                                onLoadSuccess(scene);\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }else{\r\n\r\n                        var bufferDataUri = that.urlBase + buffer.uri;\r\n\r\n                        var xhr = new XMLHttpRequest();\r\n                        xhr.open( 'GET', bufferDataUri, true );\r\n                        xhr.addEventListener( 'load', function ( event ) {\r\n\r\n                            var buffer = this.response;\r\n                            that.arrayBuffers[i] = buffer;\r\n                            loadBufferCount ++;\r\n\r\n                            if(loadBufferCount === that.arrayBufferCount){\r\n\r\n                                var sceneObj = gltfObj.scenes[0];\r\n                                var scene = new core_Scene();\r\n                                for(var nodeindex in sceneObj.nodes){\r\n                                    var nodesIndex = sceneObj.nodes[nodeindex];\r\n                                    var nodesObj = gltfObj.nodes[nodesIndex];\r\n                                    var cur_mesh = that.nodeToMesh(nodesObj);\r\n                                    scene.add(cur_mesh);\r\n                                }\r\n                                onLoadSuccess(scene);\r\n\r\n                            }\r\n\r\n\r\n                        }, false );\r\n                        xhr.responseType = 'arraybuffer';\r\n                        xhr.send( null );\r\n\r\n                    }\r\n\r\n\r\n                }\r\n\r\n\r\n            }\r\n        };\r\n        request.send(null);\r\n\r\n    }\r\n\r\n    nodeToMesh(node){\r\n        var that = this;\r\n\r\n        var meshIndex = node.mesh;\r\n        var mesh = null;\r\n\r\n        if(meshIndex != undefined){\r\n            var meshObj = that.gltfObj.meshes[meshIndex];\r\n            var geometryAndMaterial = that.meshToGeometry(meshObj);\r\n            mesh = new core_Mesh({\r\n                geometry:geometryAndMaterial[0],\r\n                material:geometryAndMaterial[1]\r\n            });\r\n        }else{\r\n            mesh = new core_Mesh();\r\n        }\r\n\r\n        var scale = node.scale;\r\n        if(scale){\r\n            mesh.setScale(scale);\r\n        }\r\n\r\n        var rotation = node.rotation;\r\n        if(rotation){\r\n            var quaternion = new Quaternion().fromArray(rotation);\r\n            mesh.setQuaternion(quaternion);\r\n        }\r\n\r\n        var translation = node.translation;\r\n        if(translation){\r\n            mesh.setPosition(translation);\r\n        }\r\n\r\n        var matrix = node.matrix;\r\n        if(matrix){\r\n            mesh.setMatrix(new Matrix4().fromArray(matrix));\r\n        }\r\n\r\n        for(var i in node.children){\r\n            var nodeChild = that.gltfObj.nodes[node.children[i]];\r\n            var meshChild = that.nodeToMesh(nodeChild);\r\n            mesh.add(meshChild);\r\n        }\r\n\r\n        return mesh;\r\n    }\r\n\r\n    meshToGeometry(mesh){\r\n        var that = this;\r\n\r\n        var primitive0 = mesh.primitives[0];\r\n        var attributes = primitive0.attributes;\r\n\r\n        var positionAccessorIndex = attributes.POSITION;\r\n        var positionAccessor = that.gltfObj.accessors[positionAccessorIndex];\r\n        var positionBufferViewIndex = positionAccessor.bufferView;\r\n        var positionBufferView = that.gltfObj.bufferViews[positionBufferViewIndex];\r\n        var positionData = that.getDataByBufferView(positionBufferView,positionAccessor);\r\n\r\n        var normalAccessorIndex = attributes.NORMAL;\r\n        var normalAccessor = that.gltfObj.accessors[normalAccessorIndex];\r\n        var normalBufferViewIndex = normalAccessor.bufferView;\r\n        var normalBufferView = that.gltfObj.bufferViews[normalBufferViewIndex];\r\n        var normalData = that.getDataByBufferView(normalBufferView,normalAccessor);\r\n\r\n        //TEXCOORD_0\r\n        var uv0AccessorIndex = attributes.TEXCOORD_0;\r\n        var uv0Accessor = that.gltfObj.accessors[uv0AccessorIndex];\r\n        var uv0BufferViewIndex = uv0Accessor.bufferView;\r\n        var uv0BufferView = that.gltfObj.bufferViews[uv0BufferViewIndex];\r\n        var uv0Data = that.getDataByBufferView(uv0BufferView,uv0Accessor);\r\n\r\n        var indicesData = null;\r\n        var indicesAccessorIndex = primitive0.indices;\r\n\r\n        if(indicesAccessorIndex != undefined){\r\n            var indicesAccessor = that.gltfObj.accessors[indicesAccessorIndex];\r\n            var indicesBufferViewIndex = indicesAccessor.bufferView;\r\n            var indicesBufferView = that.gltfObj.bufferViews[indicesBufferViewIndex];\r\n            indicesData = that.getDataByBufferView(indicesBufferView,indicesAccessor);\r\n        }\r\n\r\n        var materialIndex = primitive0.material;\r\n        var materialObj = that.gltfObj.materials[materialIndex];\r\n\r\n        if(materialObj.pbrMetallicRoughness.baseColorTexture){\r\n            var baseColorTextureIndex = materialObj.pbrMetallicRoughness.baseColorTexture.index;\r\n            var textureObj = that.gltfObj.textures[baseColorTextureIndex];\r\n            var imageIndex = textureObj.source;\r\n            var imageObj = that.gltfObj.images[imageIndex];\r\n            var imageUri = imageObj.uri;\r\n\r\n            var dataUriRegexResult = imageObj.uri.match( that.dataUriRegex );\r\n            if(!dataUriRegexResult){\r\n                imageUri = that.urlBase + imageObj.uri;\r\n            }\r\n\r\n            var samplerIndex = textureObj.sampler;\r\n            var sampler = that.gltfObj.samplers[samplerIndex];\r\n\r\n            var image = new Image();\r\n            image.crossOrigin = \"anonymous\";\r\n            image.src= imageUri;\r\n\r\n            var texture = new COOL.Texture({\r\n                image:image,\r\n                //这两个参数有问题，有的9729 9986是什么东西\r\n                // magFilter: sampler.magFilter,\r\n                // minFilter: sampler.minFilter,\r\n                wrapS: sampler.wrapS,\r\n                wrapT: sampler.wrapT,\r\n            });\r\n        }\r\n\r\n\r\n        var material = new COOL.MeshLambertMaterial({map:texture});\r\n\r\n        return [\r\n            new core_Geometry({\r\n                vertices: positionData,\r\n                indices: indicesData,\r\n                normal:normalData,\r\n                uv:uv0Data\r\n            }),\r\n            material\r\n        ];\r\n    }\r\n\r\n    getDataByBufferView(bufferView, accessor){\r\n        var that = this;\r\n        var bufferIndex = bufferView.buffer;\r\n\r\n        var byteLength = bufferView.byteLength || 0;\r\n        var byteOffset = bufferView.byteOffset || 0;\r\n\r\n        var buffer = that.gltfObj.buffers[bufferIndex];\r\n        var bufferDataUri = that.urlBase + buffer.uri;\r\n\r\n        var arrayBuffer = that.arrayBuffers[bufferIndex];\r\n\r\n        var cur_buffer = arrayBuffer.slice( byteOffset, byteOffset + byteLength );\r\n\r\n        var array = null;\r\n        var itemSize = null;\r\n\r\n        var accessorByteOffset = accessor.byteOffset || 0;\r\n\r\n        if(accessor.type == 'SCALAR'){\r\n            itemSize = 1;\r\n        }else if(accessor.type == 'VEC2'){\r\n            itemSize = 2;\r\n        }else if(accessor.type == 'VEC3'){\r\n            itemSize = 3;\r\n        }else if(accessor.type == 'VEC4'){\r\n            itemSize = 4;\r\n        }else{\r\n            console.warn('accessor.type undefined');\r\n        }\r\n\r\n        if(accessor.componentType == 5126){\r\n            array = new Float32Array( cur_buffer, accessorByteOffset, accessor.count * itemSize );\r\n        }else if(accessor.componentType == 5123){\r\n            array = new Uint16Array( cur_buffer, accessorByteOffset, accessor.count * itemSize );\r\n        }else if(accessor.componentType == 5120){\r\n            array = new Int8Array( cur_buffer, accessorByteOffset, accessor.count * itemSize );\r\n        }else if(accessor.componentType == 5121){\r\n            array = new Uint8Array( cur_buffer, accessorByteOffset, accessor.count * itemSize );\r\n        }else if(accessor.componentType == 5122){\r\n            array = new Int16Array( cur_buffer, accessorByteOffset, accessor.count * itemSize );\r\n        }else if(accessor.componentType == 5125){\r\n            array = new Uint32Array( cur_buffer, accessorByteOffset, accessor.count * itemSize );\r\n        }else{\r\n            console.warn('accessor.componentType undefined');\r\n        }\r\n\r\n        return array;\r\n\r\n\r\n    }\r\n\r\n    base64ToArrayBuffer(dataUriRegexResult){\r\n\r\n        var data = dataUriRegexResult[ 3 ];\r\n        data = decodeURIComponent( data );\r\n        data = atob( data );\r\n\r\n        try {\r\n\r\n            var view = new Uint8Array( data.length );\r\n            for ( var i = 0; i < data.length; i ++ ) {\r\n                view[ i ] = data.charCodeAt( i );\r\n            }\r\n\r\n            var arrayBuffer = view.buffer;\r\n            return arrayBuffer;\r\n\r\n        } catch ( error ) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var GLTFLoader2 = (GLTFLoader2_GLTFLoader);\r\n\n// CONCATENATED MODULE: ./src/camera/OrthoCamera.js\n\r\n\r\n\r\n\r\nclass OrthoCamera_OrthoCamera {\r\n    constructor(left, right, bottom, top, near, far) {\r\n        this.left = left;\r\n        this._right = right;\r\n        this.bottom = bottom;\r\n        this.top = top;\r\n        this.near = near;\r\n        this.far = far;\r\n\r\n        this.position = [0, 0, 10];\r\n        this.target = [0,0,0];\r\n        this.up = [0,1,0];\r\n\r\n        this.VPmatrix = new Matrix4();\r\n\r\n        this.direction = [0,0,-1];\r\n        this.right = [1,0,0];\r\n\r\n        this.updateAll();\r\n    }\r\n\r\n    updateAll(){\r\n        this.updateOption();\r\n        this.updateVPMatrix();\r\n    }\r\n\r\n    updateOption(){\r\n        var targetV3 = new Vector3().fromArray(this.target);\r\n        var positionV3 = new Vector3().fromArray(this.position);\r\n        var upV3 = new Vector3().fromArray(this.up);\r\n\r\n        var directionV3 = new Vector3().subVectors(targetV3, positionV3).normalize();\r\n        this.direction = directionV3.toArray();\r\n\r\n        var rightV3 = new Vector3().crossVectors(directionV3, upV3).normalize();\r\n        this.right = rightV3.toArray();\r\n\r\n        // this.up = new Vector3().crossVectors(rightV3, directionV3).normalize().toArray();\r\n    }\r\n\r\n    setPosition(position){\r\n        this.position = position;\r\n        this.updateAll();\r\n    }\r\n\r\n    setTarget(target){\r\n        this.target = target;\r\n        this.updateAll();\r\n    }\r\n\r\n    setUp(up){\r\n        this.up = new Vector3().fromArray(up).normalize().toArray();\r\n        this.updateAll();\r\n    }\r\n\r\n\r\n\r\n    updateVPMatrix(){\r\n        this.VPmatrix = new Matrix4().setOrtho(this.left, this._right, this.bottom, this.top, this.near, this.far);\r\n        this.VPmatrix.lookAt2(this.position[0],this.position[1],this.position[2], this.target[0],this.target[1],this.target[2], this.up[0],this.up[1],this.up[2]);\r\n    }\r\n\r\n}\r\n\r\n/* harmony default export */ var camera_OrthoCamera = (OrthoCamera_OrthoCamera);\r\n\r\n\n// CONCATENATED MODULE: ./src/main.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import _GLTFLoader from \"./core/GLTFLoader\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar main_COOL = window.COOL = {};\r\n\r\nmain_COOL.LINEAR = 9729;\r\nmain_COOL.NEAREST = 9728;\r\n\r\nmain_COOL.CLAMP_TO_EDGE = 33071;\r\nmain_COOL.REPEAT = 10497;\r\nmain_COOL.MIRRORED_REPEAT = 33648;\r\n\r\nmain_COOL.Renderer = core_Renderer;\r\nmain_COOL.Mesh = core_Mesh;\r\nmain_COOL.Camera = camera_Camera;\r\nmain_COOL.OrthoCamera = camera_OrthoCamera;\r\nmain_COOL.CameraController = camera_CameraController;\r\nmain_COOL.Scene = core_Scene;\r\nmain_COOL.Material = material_Material;\r\nmain_COOL.MeshBasicMaterial = material_MeshBasicMaterial;\r\nmain_COOL.MeshLambertMaterial = material_MeshLambertMaterial;\r\nmain_COOL.MeshStandardMaterial = material_MeshStandardMaterial;\r\n\r\nmain_COOL.Texture = material_Texture;\r\n\r\nmain_COOL.AmbientLight = light_AmbientLight;\r\nmain_COOL.DirectionalLight = light_DirectionalLight;\r\n\r\nmain_COOL.Geometry = core_Geometry;\r\nmain_COOL.BoxGeometry = core_BoxGeometry;\r\nmain_COOL.SphereGeometry = core_SphereGeometry;\r\n\r\n// COOL.GLTFLoader = _GLTFLoader;\r\nmain_COOL.GLTFLoader2 = GLTFLoader2;\r\n\r\nmain_COOL.Vector2 = Vector2;\r\nmain_COOL.Vector3 = Vector3;\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYXRlcmlhbC9NYXRlcmlhbC5qcz83MTcwIiwid2VicGFjazovLy8uL3NyYy9tYXRoL01hdGguanM/NWRiMCIsIndlYnBhY2s6Ly8vLi9zcmMvbWF0aC9RdWF0ZXJuaW9uLmpzP2Q4ZWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hdGgvVmVjdG9yMy5qcz8xYjI4Iiwid2VicGFjazovLy8uL3NyYy9tYXRoL1ZlY3RvcjQuanM/ZGJhOSIsIndlYnBhY2s6Ly8vLi9zcmMvbWF0aC9NYXRyaXg0LmpzPzQ3ZWIiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hdGgvRXVsZXIuanM/ZTgwYiIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9NZXNoLmpzPzJhMmYiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvd2ViZ2wtdXRpbHMuanM/NGEzMSIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC93ZWJnbC1kZWJ1Zy5qcz9jMmEzIiwid2VicGFjazovLy8uL3NyYy91dGlsL1V0aWwuanM/NDJkYiIsIndlYnBhY2s6Ly8vLi9zcmMvbGlnaHQvTGlnaHQuanM/ZWIyMyIsIndlYnBhY2s6Ly8vLi9zcmMvbGlnaHQvQW1iaWVudExpZ2h0LmpzP2NkMjAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpZ2h0L0RpcmVjdGlvbmFsTGlnaHQuanM/MDQ5NSIsIndlYnBhY2s6Ly8vLi9zcmMvbWF0aC9WZWN0b3IyLmpzPzAyMGQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvUmVuZGVyZXIuanM/OGIxNSIsIndlYnBhY2s6Ly8vLi9zcmMvY2FtZXJhL0NhbWVyYS5qcz9lMjFkIiwid2VicGFjazovLy8uL3NyYy9jYW1lcmEvQ2FtZXJhQ29udHJvbGxlci5qcz9lMDY4Iiwid2VicGFjazovLy8uL3NyYy9jb3JlL1NjZW5lLmpzPzg1Y2EiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hdGVyaWFsL1RleHR1cmUuanM/NGMwZiIsIndlYnBhY2s6Ly8vLi9zcmMvbWF0ZXJpYWwvTWVzaEJhc2ljTWF0ZXJpYWwuanM/YmZlNCIsIndlYnBhY2s6Ly8vLi9zcmMvbWF0ZXJpYWwvTWVzaExhbWJlcnRNYXRlcmlhbC5qcz80MzZkIiwid2VicGFjazovLy8uL3NyYy9tYXRlcmlhbC9NZXNoU3RhbmRhcmRNYXRlcmlhbC5qcz8yN2IxIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dlb21ldHJ5LmpzP2ZhZGUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvQm94R2VvbWV0cnkuanM/YTdjZiIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9TcGhlcmVHZW9tZXRyeS5qcz8zNWFjIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dMVEZMb2FkZXIyLmpzPzc2MjciLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbWVyYS9PcnRob0NhbWVyYS5qcz8zYTU2Iiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzPzU2ZDciXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNsYXNzIE1hdGVyaWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtKSB7XHJcbiAgICAgICAgcGFyYW0gPSBwYXJhbSB8fCB7fTtcclxuICAgICAgICB0aGlzLnR5cGUgPSAnTWF0ZXJpYWwnO1xyXG4gICAgICAgIHRoaXMubWFwID0gcGFyYW0ubWFwO1xyXG4gICAgICAgIHRoaXMuZW52TWFwID0gcGFyYW0uZW52TWFwO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBwYXJhbS5jb2xvciB8fCBbMSwxLDEsMV07XHJcbiAgICAgICAgdGhpcy5vcGFjaXR5ID0gdGhpcy5jb2xvclszXTtcclxuICAgICAgICBpZih0aGlzLmNvbG9yWzNdICYmIHRoaXMuY29sb3JbM108MSl7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNwYXJlbnQgPSB0cnVlO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc3BhcmVudCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1ldGFsbmVzcyA9IHBhcmFtLm1ldGFsbmVzcyA9PSB1bmRlZmluZWQgPyAwLjUgOiBwYXJhbS5tZXRhbG5lc3M7XHJcblxyXG4gICAgICAgIHRoaXMud2lyZWZyYW1lID0gcGFyYW0ud2lyZWZyYW1lID09IHVuZGVmaW5lZCA/IGZhbHNlIDogcGFyYW0ud2lyZWZyYW1lO1xyXG5cclxuICAgICAgICB2YXIgVlNIQURFUl9TT1VSQ0UgPVxyXG5cclxuICAgICAgICAgICAgJ3ByZWNpc2lvbiBoaWdocCBpbnQ7XFxuJyArXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuJyArXHJcbiAgICAgICAgICAgICdhdHRyaWJ1dGUgdmVjNCBhX1Bvc2l0aW9uO1xcbicgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSBtYXQ0IHVfTXZNYXRyaXg7XFxuJyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIG1hdDQgdV9QTWF0cml4O1xcbicgK1xyXG5cclxuICAgICAgICAgICAgJyNpZmRlZiBVU0VfU2hhZG93XFxuJyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIG1hdDQgdV9QTWF0cml4RnJvbUxpZ2h0O1xcbicgK1xyXG4gICAgICAgICAgICAndmFyeWluZyB2ZWM0IHZfUG9zaXRpb25Gcm9tTGlnaHQ7XFxuJyArXHJcbiAgICAgICAgICAgICcjZW5kaWZcXG4nICtcclxuXHJcbiAgICAgICAgICAgICdhdHRyaWJ1dGUgdmVjMiBhX1RleENvb3JkO1xcbicgK1xyXG4gICAgICAgICAgICAndmFyeWluZyB2ZWMyIHZfVGV4Q29vcmQ7XFxuJyArXHJcbiAgICAgICAgICAgICdhdHRyaWJ1dGUgdmVjMyBhX05vcm1hbDtcXG4nICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2X05vcm1hbDtcXG4nICtcclxuXHJcbiAgICAgICAgICAgICcjaWZkZWYgVVNFX1NDb2xvclxcbicgK1xyXG4gICAgICAgICAgICAndmFyeWluZyB2ZWMzIHZfUG9zaXRpb25WMztcXG4nICtcclxuICAgICAgICAgICAgJyNlbHNlXFxuJyArXHJcbiAgICAgICAgICAgICcgICAjaWZkZWYgVVNFX2Vudk1hcFxcbicgK1xyXG4gICAgICAgICAgICAnICAgdmFyeWluZyB2ZWMzIHZfUG9zaXRpb25WMztcXG4nICtcclxuICAgICAgICAgICAgJyAgICNlbmRpZlxcbicgK1xyXG4gICAgICAgICAgICAnI2VuZGlmXFxuJyArXHJcblxyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkge1xcbicgK1xyXG4gICAgICAgICAgICAnICB2ZWM0IHBvc2l0aW9uVjQgPSB1X1BNYXRyaXggKiB1X012TWF0cml4ICogYV9Qb3NpdGlvbjtcXG4nICtcclxuICAgICAgICAgICAgJyAgZ2xfUG9zaXRpb24gPSBwb3NpdGlvblY0O1xcbicgK1xyXG4gICAgICAgICAgICAnICB2X1RleENvb3JkID0gYV9UZXhDb29yZDtcXG4nICtcclxuICAgICAgICAgICAgJyAgdl9Ob3JtYWwgPSBtYXQzKHVfTXZNYXRyaXgpICogYV9Ob3JtYWw7XFxuJyArXHJcbiAgICAgICAgICAgIC8vICcgIHZfTm9ybWFsID0gKHVfTXZNYXRyaXggKiB2ZWM0KGFfTm9ybWFsLCAwLjApKS54eXo7XFxuJyArXHJcbiAgICAgICAgICAgIC8vICcgIHZfTm9ybWFsID0gYV9Ob3JtYWw7XFxuJyArXHJcblxyXG4gICAgICAgICAgICAnI2lmZGVmIFVTRV9TaGFkb3dcXG4nICtcclxuICAgICAgICAgICAgJyAgdl9Qb3NpdGlvbkZyb21MaWdodCA9IHVfUE1hdHJpeEZyb21MaWdodCAqIHVfTXZNYXRyaXggKiBhX1Bvc2l0aW9uO1xcbicgK1xyXG4gICAgICAgICAgICAnI2VuZGlmXFxuJyArXHJcblxyXG4gICAgICAgICAgICAnI2lmZGVmIFVTRV9TQ29sb3JcXG4nICtcclxuICAgICAgICAgICAgJyAgdmVjNCBwb3NpdGlvblY0UmVsID0gdV9Ndk1hdHJpeCAqIGFfUG9zaXRpb247XFxuJyArXHJcbiAgICAgICAgICAgICcgIHZfUG9zaXRpb25WMyA9IHBvc2l0aW9uVjRSZWwueHl6IC8gcG9zaXRpb25WNFJlbC53O1xcbicgK1xyXG4gICAgICAgICAgICAnI2Vsc2VcXG4nICtcclxuICAgICAgICAgICAgJyAgICNpZmRlZiBVU0VfZW52TWFwXFxuJyArXHJcbiAgICAgICAgICAgICcgICB2ZWM0IHBvc2l0aW9uVjRSZWwgPSB1X012TWF0cml4ICogYV9Qb3NpdGlvbjtcXG4nICtcclxuICAgICAgICAgICAgJyAgIHZfUG9zaXRpb25WMyA9IHBvc2l0aW9uVjRSZWwueHl6IC8gcG9zaXRpb25WNFJlbC53O1xcbicgK1xyXG4gICAgICAgICAgICAnICAgI2VuZGlmXFxuJyArXHJcbiAgICAgICAgICAgICcjZW5kaWZcXG4nICtcclxuXHJcbiAgICAgICAgICAgICd9XFxuJztcclxuXHJcbiAgICAgICAgdmFyIEZTSEFERVJfU09VUkNFID1cclxuICAgICAgICAgICAgJ3ByZWNpc2lvbiBoaWdocCBpbnQ7XFxuJyArXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuJyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHZlYzQgdV9Db2xvcjtcXG4nICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMiB2X1RleENvb3JkO1xcbicgK1xyXG4gICAgICAgICAgICAndmFyeWluZyB2ZWMzIHZfTm9ybWFsO1xcbicgK1xyXG5cclxuICAgICAgICAgICAgJ3VuaWZvcm0gZmxvYXQgdV9NZXRhbG5lc3M7XFxuJyArXHJcblxyXG4gICAgICAgICAgICAnI2lmZGVmIFVTRV9NYXBcXG4nICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gc2FtcGxlcjJEIHVfU2FtcGxlcjtcXG4nICtcclxuICAgICAgICAgICAgJyNlbmRpZlxcbicgK1xyXG5cclxuICAgICAgICAgICAgJyNpZmRlZiBVU0VfZW52TWFwXFxuJyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHNhbXBsZXJDdWJlIHVfZW52TWFwO1xcbicgK1xyXG4gICAgICAgICAgICAnI2VuZGlmXFxuJyArXHJcblxyXG4gICAgICAgICAgICAnI2lmZGVmIFVTRV9BbWJpZW50TGlnaHRcXG4nICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjMyB1X0FtYmllbnRMaWdodF9Db2xvcjtcXG4nICtcclxuICAgICAgICAgICAgJyNlbmRpZlxcbicgK1xyXG5cclxuICAgICAgICAgICAgJyNpZmRlZiBVU0VfRGlyZWN0aW9uYWxMaWdodFxcbicgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSB2ZWMzIHVfRGlyZWN0aW9uYWxMaWdodF9EaXJlY3Rpb247XFxuJyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHZlYzMgdV9EaXJlY3Rpb25hbExpZ2h0X0NvbG9yO1xcbicgK1xyXG4gICAgICAgICAgICAnI2VuZGlmXFxuJyArXHJcblxyXG4gICAgICAgICAgICAnI2lmZGVmIFVTRV9TQ29sb3JcXG4nICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjMyB1X0NhbWVyYV9Qb3NpdGlvbjtcXG4nICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2X1Bvc2l0aW9uVjM7XFxuJyArXHJcbiAgICAgICAgICAgICcjZWxzZVxcbicgK1xyXG4gICAgICAgICAgICAnICAgI2lmZGVmIFVTRV9lbnZNYXBcXG4nICtcclxuICAgICAgICAgICAgJyAgIHVuaWZvcm0gdmVjMyB1X0NhbWVyYV9Qb3NpdGlvbjtcXG4nICtcclxuICAgICAgICAgICAgJyAgIHZhcnlpbmcgdmVjMyB2X1Bvc2l0aW9uVjM7XFxuJyArXHJcbiAgICAgICAgICAgICcgICAjZW5kaWZcXG4nICtcclxuICAgICAgICAgICAgJyNlbmRpZlxcbicgK1xyXG5cclxuICAgICAgICAgICAgJyNpZmRlZiBVU0VfU2hhZG93XFxuJyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHNhbXBsZXIyRCB1X1NoYWRvd01hcDtcXG4nICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjNCB2X1Bvc2l0aW9uRnJvbUxpZ2h0O1xcbicgK1xyXG5cclxuICAgICAgICAgICAgJ2Zsb2F0IHVucGFja0RlcHRoKGNvbnN0IGluIHZlYzQgcmdiYURlcHRoKSB7XFxuJyArXHJcbiAgICAgICAgICAgICcgIGNvbnN0IHZlYzQgYml0U2hpZnQgPSB2ZWM0KDEuMCwgMS4wLzI1Ni4wLCAxLjAvKDI1Ni4wKjI1Ni4wKSwgMS4wLygyNTYuMCoyNTYuMCoyNTYuMCkpO1xcbicgK1xyXG4gICAgICAgICAgICAnICBmbG9hdCBkZXB0aCA9IGRvdChyZ2JhRGVwdGgsIGJpdFNoaWZ0KTtcXG4nICsgLy8gVXNlIGRvdCgpIHNpbmNlIHRoZSBjYWxjdWxhdGlvbnMgaXMgc2FtZVxyXG4gICAgICAgICAgICAnICByZXR1cm4gZGVwdGg7XFxuJyArXHJcbiAgICAgICAgICAgICd9XFxuJyArXHJcblxyXG4gICAgICAgICAgICAnI2VuZGlmXFxuJyArXHJcblxyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkge1xcbicgK1xyXG4gICAgICAgICAgICAnICB2ZWM0IGNvbG9yID0gdV9Db2xvcjtcXG4nICtcclxuICAgICAgICAgICAgJyAgdmVjMyB2X05vcm1hbDAgPSBub3JtYWxpemUodl9Ob3JtYWwpO1xcbicgK1xyXG5cclxuICAgICAgICAgICAgJyNpZmRlZiBVU0VfTWFwXFxuJyArXHJcbiAgICAgICAgICAgICcgIGNvbG9yID0gdGV4dHVyZTJEKHVfU2FtcGxlciwgdl9UZXhDb29yZCk7XFxuJyArXHJcbiAgICAgICAgICAgICcjZW5kaWZcXG4nICtcclxuXHJcbiAgICAgICAgICAgICcgIHZlYzMgY29sb3JWMyA9IGNvbG9yLnJnYjtcXG4nICtcclxuICAgICAgICAgICAgJyAgZmxvYXQgdXNlTGlnaHQgPSAwLjA7XFxuJyArXHJcbiAgICAgICAgICAgICcgIHZlYzMgZmluYWxDb2xvclYzID0gY29sb3JWMy5yZ2I7XFxuJyArXHJcblxyXG4gICAgICAgICAgICAnI2lmZGVmIFVTRV9BbWJpZW50TGlnaHRcXG4nICtcclxuICAgICAgICAgICAgJyAgdmVjMyBBX2NvbG9yID0gY29sb3JWMyAqIHVfQW1iaWVudExpZ2h0X0NvbG9yICogMC41O1xcbicgK1xyXG4gICAgICAgICAgICAnICBmaW5hbENvbG9yVjMgPSBBX2NvbG9yO1xcbicgK1xyXG4gICAgICAgICAgICAnICB1c2VMaWdodCA9IDEuMDtcXG4nICtcclxuICAgICAgICAgICAgJyNlbmRpZlxcbicgK1xyXG5cclxuICAgICAgICAgICAgJyNpZmRlZiBVU0VfRGlyZWN0aW9uYWxMaWdodFxcbicgK1xyXG4gICAgICAgICAgICAnICBmbG9hdCBEX3dlaWdodCA9IG1heChkb3QodV9EaXJlY3Rpb25hbExpZ2h0X0RpcmVjdGlvbiwgdl9Ob3JtYWwwKSwgMC4wKTtcXG4nICtcclxuICAgICAgICAgICAgJyAgdmVjMyBEX2NvbG9yID0gY29sb3JWMyAqIHVfRGlyZWN0aW9uYWxMaWdodF9Db2xvciAqIERfd2VpZ2h0ICogKDEuMCAtIHVfTWV0YWxuZXNzKTtcXG4nICtcclxuXHJcbiAgICAgICAgICAgICcgIGlmKHVzZUxpZ2h0PjAuNSl7XFxuJyArXHJcbiAgICAgICAgICAgICcgICAgZmluYWxDb2xvclYzID0gZmluYWxDb2xvclYzICsgRF9jb2xvcjtcXG4nICtcclxuICAgICAgICAgICAgJyAgfWVsc2V7XFxuJyArXHJcbiAgICAgICAgICAgICcgICAgZmluYWxDb2xvclYzID0gRF9jb2xvcjtcXG4nICtcclxuICAgICAgICAgICAgJyAgfVxcbicgK1xyXG4gICAgICAgICAgICAnICB1c2VMaWdodCA9IDEuMDtcXG4nICtcclxuICAgICAgICAgICAgJyNlbmRpZlxcbicgK1xyXG5cclxuICAgICAgICAgICAgJyNpZmRlZiBVU0VfU0NvbG9yXFxuJyArXHJcbiAgICAgICAgICAgICcgIHZlYzMgciA9IG5vcm1hbGl6ZSggcmVmbGVjdCgtdV9EaXJlY3Rpb25hbExpZ2h0X0RpcmVjdGlvbiwgdl9Ob3JtYWwwKSApO1xcbicgK1xyXG4gICAgICAgICAgICAnICB2ZWMzIHYgPSBub3JtYWxpemUoIHVfQ2FtZXJhX1Bvc2l0aW9uIC0gdl9Qb3NpdGlvblYzICk7XFxuJyArXHJcbiAgICAgICAgICAgICcgIGZsb2F0IHJkb3R2ID0gbWF4KCBkb3QociAsdiksIDAuMCApO1xcbicgK1xyXG4gICAgICAgICAgICAnICBmbG9hdCBTX3dlaWdodCA9IHBvdyggcmRvdHYsIDEwMC4wICk7XFxuJyArXHJcbiAgICAgICAgICAgICcgIHZlYzMgU19jb2xvciA9IGNvbG9yVjMgKiB1X0RpcmVjdGlvbmFsTGlnaHRfQ29sb3IgKiBTX3dlaWdodCAqIHVfTWV0YWxuZXNzO1xcbicgK1xyXG5cclxuICAgICAgICAgICAgJyAgaWYodXNlTGlnaHQ+MC41KXtcXG4nICtcclxuICAgICAgICAgICAgJyAgICBmaW5hbENvbG9yVjMgPSBmaW5hbENvbG9yVjMgKyBTX2NvbG9yO1xcbicgK1xyXG4gICAgICAgICAgICAnICB9ZWxzZXtcXG4nICtcclxuICAgICAgICAgICAgJyAgICBmaW5hbENvbG9yVjMgPSBTX2NvbG9yO1xcbicgK1xyXG4gICAgICAgICAgICAnICB9XFxuJyArXHJcbiAgICAgICAgICAgICcgIHVzZUxpZ2h0ID0gMS4wO1xcbicgK1xyXG4gICAgICAgICAgICAnI2VuZGlmXFxuJyArXHJcblxyXG4gICAgICAgICAgICAnICBjb2xvciA9IHZlYzQoZmluYWxDb2xvclYzLCBjb2xvci5hKTtcXG4nICtcclxuXHJcbiAgICAgICAgICAgICcjaWZkZWYgVVNFX2Vudk1hcFxcbicgK1xyXG4gICAgICAgICAgICAvLyAnICAgdmVjMyB2MSA9IG5vcm1hbGl6ZSggdV9DYW1lcmFfUG9zaXRpb24gLSB2X1Bvc2l0aW9uVjMgKTtcXG4nICtcclxuICAgICAgICAgICAgLy8gJyAgIHZlYzMgcjEgPSBub3JtYWxpemUoIHJlZmxlY3QodjEsIHZfTm9ybWFsMCkgKTtcXG4nICtcclxuICAgICAgICAgICAgJyAgIHZlYzMgdjEgPSB1X0NhbWVyYV9Qb3NpdGlvbiAtIHZfUG9zaXRpb25WMztcXG4nICtcclxuICAgICAgICAgICAgJyAgIHZlYzMgcjEgPSByZWZsZWN0KC12MSwgdl9Ob3JtYWwwKTtcXG4nICtcclxuXHJcbiAgICAgICAgICAgICcgICB2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUodV9lbnZNYXAsIHIxKTtcXG4nICtcclxuICAgICAgICAgICAgLy8gJyAgIHZlYzMgcmVmID0gdjEgLSAyLjAgKiBkb3Qodl9Ob3JtYWwwLCB2MSkgKiB2X05vcm1hbDA7XFxuJytcclxuICAgICAgICAgICAgLy8gJyAgIHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZSh1X2Vudk1hcCwgcmVmKTtcXG4nICtcclxuICAgICAgICAgICAgJyAgIGNvbG9yID0gdmVjNChlbnZNYXBDb2xvci5yZ2IsIGNvbG9yLmEpO1xcbicgK1xyXG4gICAgICAgICAgICAnI2VuZGlmXFxuJyArXHJcblxyXG5cclxuICAgICAgICAgICAgJyNpZmRlZiBVU0VfU2hhZG93XFxuJyArXHJcbiAgICAgICAgICAgICcgIHZlYzMgc2hhZG93Q29vcmQgPSAodl9Qb3NpdGlvbkZyb21MaWdodC54eXovdl9Qb3NpdGlvbkZyb21MaWdodC53KS8yLjAgKyAwLjU7XFxuJyArXHJcbiAgICAgICAgICAgICcgIHZlYzQgcmdiYURlcHRoID0gdGV4dHVyZTJEKHVfU2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSk7XFxuJyArXHJcbiAgICAgICAgICAgICcgIGZsb2F0IGRlcHRoID0gdW5wYWNrRGVwdGgocmdiYURlcHRoKTtcXG4nICtcclxuICAgICAgICAgICAgJyAgZmxvYXQgdmlzaWJpbGl0eSA9IChzaGFkb3dDb29yZC56ID4gZGVwdGggKyAwLjAwMTUpID8gMC43IDogMS4wO1xcbicgK1xyXG4gICAgICAgICAgICAnICBjb2xvciA9IHZlYzQoY29sb3IucmdiICogdmlzaWJpbGl0eSwgY29sb3IuYSk7XFxuJyArXHJcbiAgICAgICAgICAgICcjZW5kaWZcXG4nICtcclxuXHJcbiAgICAgICAgICAgICcgIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbicgK1xyXG5cclxuICAgICAgICAgICAgJ31cXG4nO1xyXG5cclxuICAgICAgICB0aGlzLnZzaGFkZXJTb3VyY2UgPSBWU0hBREVSX1NPVVJDRTtcclxuICAgICAgICB0aGlzLmZzaGFkZXJTb3VyY2UgPSBGU0hBREVSX1NPVVJDRTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRPcGFjaXR5KG9wYWNpdHkpe1xyXG4gICAgICAgIHRoaXMub3BhY2l0eSA9IG9wYWNpdHk7XHJcbiAgICAgICAgdGhpcy5jb2xvclszXSA9IG9wYWNpdHk7XHJcbiAgICAgICAgdGhpcy50cmFuc3BhcmVudCA9IG9wYWNpdHk8MTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9uZSgpe1xyXG5cclxuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICBtYXA6IHRoaXMubWFwLFxyXG4gICAgICAgICAgICBjb2xvcjogdGhpcy5jb2xvci5zbGljZSgwKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNYXRlcmlhbDtcclxuIiwiLyoqXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1xyXG5cclxudmFyIF9NYXRoID0ge1xyXG5cclxuXHRERUcyUkFEOiBNYXRoLlBJIC8gMTgwLFxyXG5cdFJBRDJERUc6IDE4MCAvIE1hdGguUEksXHJcblxyXG5cdGdlbmVyYXRlVVVJRDogKCBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvaG93LXRvLWNyZWF0ZS1hLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0LzIxOTYzMTM2IzIxOTYzMTM2XHJcblxyXG5cdFx0dmFyIGx1dCA9IFtdO1xyXG5cclxuXHRcdGZvciAoIHZhciBpID0gMDsgaSA8IDI1NjsgaSArKyApIHtcclxuXHJcblx0XHRcdGx1dFsgaSBdID0gKCBpIDwgMTYgPyAnMCcgOiAnJyApICsgKCBpICkudG9TdHJpbmcoIDE2ICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7XHJcblxyXG5cdFx0XHR2YXIgZDAgPSBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmZmZiB8IDA7XHJcblx0XHRcdHZhciBkMSA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcclxuXHRcdFx0dmFyIGQyID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xyXG5cdFx0XHR2YXIgZDMgPSBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmZmZiB8IDA7XHJcblx0XHRcdHZhciB1dWlkID0gbHV0WyBkMCAmIDB4ZmYgXSArIGx1dFsgZDAgPj4gOCAmIDB4ZmYgXSArIGx1dFsgZDAgPj4gMTYgJiAweGZmIF0gKyBsdXRbIGQwID4+IDI0ICYgMHhmZiBdICsgJy0nICtcclxuXHRcdFx0XHRsdXRbIGQxICYgMHhmZiBdICsgbHV0WyBkMSA+PiA4ICYgMHhmZiBdICsgJy0nICsgbHV0WyBkMSA+PiAxNiAmIDB4MGYgfCAweDQwIF0gKyBsdXRbIGQxID4+IDI0ICYgMHhmZiBdICsgJy0nICtcclxuXHRcdFx0XHRsdXRbIGQyICYgMHgzZiB8IDB4ODAgXSArIGx1dFsgZDIgPj4gOCAmIDB4ZmYgXSArICctJyArIGx1dFsgZDIgPj4gMTYgJiAweGZmIF0gKyBsdXRbIGQyID4+IDI0ICYgMHhmZiBdICtcclxuXHRcdFx0XHRsdXRbIGQzICYgMHhmZiBdICsgbHV0WyBkMyA+PiA4ICYgMHhmZiBdICsgbHV0WyBkMyA+PiAxNiAmIDB4ZmYgXSArIGx1dFsgZDMgPj4gMjQgJiAweGZmIF07XHJcblxyXG5cdFx0XHQvLyAudG9VcHBlckNhc2UoKSBoZXJlIGZsYXR0ZW5zIGNvbmNhdGVuYXRlZCBzdHJpbmdzIHRvIHNhdmUgaGVhcCBtZW1vcnkgc3BhY2UuXHJcblx0XHRcdHJldHVybiB1dWlkLnRvVXBwZXJDYXNlKCk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSApKCksXHJcblxyXG5cdGNsYW1wOiBmdW5jdGlvbiAoIHZhbHVlLCBtaW4sIG1heCApIHtcclxuXHJcblx0XHRyZXR1cm4gTWF0aC5tYXgoIG1pbiwgTWF0aC5taW4oIG1heCwgdmFsdWUgKSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHQvLyBjb21wdXRlIGV1Y2xpZGlhbiBtb2R1bG8gb2YgbSAlIG5cclxuXHQvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Nb2R1bG9fb3BlcmF0aW9uXHJcblxyXG5cdGV1Y2xpZGVhbk1vZHVsbzogZnVuY3Rpb24gKCBuLCBtICkge1xyXG5cclxuXHRcdHJldHVybiAoICggbiAlIG0gKSArIG0gKSAlIG07XHJcblxyXG5cdH0sXHJcblxyXG5cdC8vIExpbmVhciBtYXBwaW5nIGZyb20gcmFuZ2UgPGExLCBhMj4gdG8gcmFuZ2UgPGIxLCBiMj5cclxuXHJcblx0bWFwTGluZWFyOiBmdW5jdGlvbiAoIHgsIGExLCBhMiwgYjEsIGIyICkge1xyXG5cclxuXHRcdHJldHVybiBiMSArICggeCAtIGExICkgKiAoIGIyIC0gYjEgKSAvICggYTIgLSBhMSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHQvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaW5lYXJfaW50ZXJwb2xhdGlvblxyXG5cclxuXHRsZXJwOiBmdW5jdGlvbiAoIHgsIHksIHQgKSB7XHJcblxyXG5cdFx0cmV0dXJuICggMSAtIHQgKSAqIHggKyB0ICogeTtcclxuXHJcblx0fSxcclxuXHJcblx0Ly8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TbW9vdGhzdGVwXHJcblxyXG5cdHNtb290aHN0ZXA6IGZ1bmN0aW9uICggeCwgbWluLCBtYXggKSB7XHJcblxyXG5cdFx0aWYgKCB4IDw9IG1pbiApIHJldHVybiAwO1xyXG5cdFx0aWYgKCB4ID49IG1heCApIHJldHVybiAxO1xyXG5cclxuXHRcdHggPSAoIHggLSBtaW4gKSAvICggbWF4IC0gbWluICk7XHJcblxyXG5cdFx0cmV0dXJuIHggKiB4ICogKCAzIC0gMiAqIHggKTtcclxuXHJcblx0fSxcclxuXHJcblx0c21vb3RoZXJzdGVwOiBmdW5jdGlvbiAoIHgsIG1pbiwgbWF4ICkge1xyXG5cclxuXHRcdGlmICggeCA8PSBtaW4gKSByZXR1cm4gMDtcclxuXHRcdGlmICggeCA+PSBtYXggKSByZXR1cm4gMTtcclxuXHJcblx0XHR4ID0gKCB4IC0gbWluICkgLyAoIG1heCAtIG1pbiApO1xyXG5cclxuXHRcdHJldHVybiB4ICogeCAqIHggKiAoIHggKiAoIHggKiA2IC0gMTUgKSArIDEwICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdC8vIFJhbmRvbSBpbnRlZ2VyIGZyb20gPGxvdywgaGlnaD4gaW50ZXJ2YWxcclxuXHJcblx0cmFuZEludDogZnVuY3Rpb24gKCBsb3csIGhpZ2ggKSB7XHJcblxyXG5cdFx0cmV0dXJuIGxvdyArIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIGhpZ2ggLSBsb3cgKyAxICkgKTtcclxuXHJcblx0fSxcclxuXHJcblx0Ly8gUmFuZG9tIGZsb2F0IGZyb20gPGxvdywgaGlnaD4gaW50ZXJ2YWxcclxuXHJcblx0cmFuZEZsb2F0OiBmdW5jdGlvbiAoIGxvdywgaGlnaCApIHtcclxuXHJcblx0XHRyZXR1cm4gbG93ICsgTWF0aC5yYW5kb20oKSAqICggaGlnaCAtIGxvdyApO1xyXG5cclxuXHR9LFxyXG5cclxuXHQvLyBSYW5kb20gZmxvYXQgZnJvbSA8LXJhbmdlLzIsIHJhbmdlLzI+IGludGVydmFsXHJcblxyXG5cdHJhbmRGbG9hdFNwcmVhZDogZnVuY3Rpb24gKCByYW5nZSApIHtcclxuXHJcblx0XHRyZXR1cm4gcmFuZ2UgKiAoIDAuNSAtIE1hdGgucmFuZG9tKCkgKTtcclxuXHJcblx0fSxcclxuXHJcblx0ZGVnVG9SYWQ6IGZ1bmN0aW9uICggZGVncmVlcyApIHtcclxuXHJcblx0XHRyZXR1cm4gZGVncmVlcyAqIF9NYXRoLkRFRzJSQUQ7XHJcblxyXG5cdH0sXHJcblxyXG5cdHJhZFRvRGVnOiBmdW5jdGlvbiAoIHJhZGlhbnMgKSB7XHJcblxyXG5cdFx0cmV0dXJuIHJhZGlhbnMgKiBfTWF0aC5SQUQyREVHO1xyXG5cclxuXHR9LFxyXG5cclxuXHRpc1Bvd2VyT2ZUd286IGZ1bmN0aW9uICggdmFsdWUgKSB7XHJcblxyXG5cdFx0cmV0dXJuICggdmFsdWUgJiAoIHZhbHVlIC0gMSApICkgPT09IDAgJiYgdmFsdWUgIT09IDA7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNlaWxQb3dlck9mVHdvOiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdHJldHVybiBNYXRoLnBvdyggMiwgTWF0aC5jZWlsKCBNYXRoLmxvZyggdmFsdWUgKSAvIE1hdGguTE4yICkgKTtcclxuXHJcblx0fSxcclxuXHJcblx0Zmxvb3JQb3dlck9mVHdvOiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdHJldHVybiBNYXRoLnBvdyggMiwgTWF0aC5mbG9vciggTWF0aC5sb2coIHZhbHVlICkgLyBNYXRoLkxOMiApICk7XHJcblxyXG5cdH1cclxuXHJcbn07XHJcblxyXG5cclxuZXhwb3J0IHsgX01hdGggfTtcclxuIiwiLyoqXHJcbiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxyXG4gKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvXHJcbiAqL1xyXG5cclxuaW1wb3J0ICB7X01hdGh9IGZyb20gJy4vL01hdGguanMnO1xyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAnLi9WZWN0b3IzLmpzJztcclxuXHJcbmZ1bmN0aW9uIFF1YXRlcm5pb24oIHgsIHksIHosIHcgKSB7XHJcblxyXG5cdHRoaXMuX3ggPSB4IHx8IDA7XHJcblx0dGhpcy5feSA9IHkgfHwgMDtcclxuXHR0aGlzLl96ID0geiB8fCAwO1xyXG5cdHRoaXMuX3cgPSAoIHcgIT09IHVuZGVmaW5lZCApID8gdyA6IDE7XHJcblxyXG59XHJcblxyXG5PYmplY3QuYXNzaWduKCBRdWF0ZXJuaW9uLCB7XHJcblxyXG5cdHNsZXJwOiBmdW5jdGlvbiAoIHFhLCBxYiwgcW0sIHQgKSB7XHJcblxyXG5cdFx0cmV0dXJuIHFtLmNvcHkoIHFhICkuc2xlcnAoIHFiLCB0ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNsZXJwRmxhdDogZnVuY3Rpb24gKCBkc3QsIGRzdE9mZnNldCwgc3JjMCwgc3JjT2Zmc2V0MCwgc3JjMSwgc3JjT2Zmc2V0MSwgdCApIHtcclxuXHJcblx0XHQvLyBmdXp6LWZyZWUsIGFycmF5LWJhc2VkIFF1YXRlcm5pb24gU0xFUlAgb3BlcmF0aW9uXHJcblxyXG5cdFx0dmFyIHgwID0gc3JjMFsgc3JjT2Zmc2V0MCArIDAgXSxcclxuXHRcdFx0eTAgPSBzcmMwWyBzcmNPZmZzZXQwICsgMSBdLFxyXG5cdFx0XHR6MCA9IHNyYzBbIHNyY09mZnNldDAgKyAyIF0sXHJcblx0XHRcdHcwID0gc3JjMFsgc3JjT2Zmc2V0MCArIDMgXSxcclxuXHJcblx0XHRcdHgxID0gc3JjMVsgc3JjT2Zmc2V0MSArIDAgXSxcclxuXHRcdFx0eTEgPSBzcmMxWyBzcmNPZmZzZXQxICsgMSBdLFxyXG5cdFx0XHR6MSA9IHNyYzFbIHNyY09mZnNldDEgKyAyIF0sXHJcblx0XHRcdHcxID0gc3JjMVsgc3JjT2Zmc2V0MSArIDMgXTtcclxuXHJcblx0XHRpZiAoIHcwICE9PSB3MSB8fCB4MCAhPT0geDEgfHwgeTAgIT09IHkxIHx8IHowICE9PSB6MSApIHtcclxuXHJcblx0XHRcdHZhciBzID0gMSAtIHQsXHJcblxyXG5cdFx0XHRcdGNvcyA9IHgwICogeDEgKyB5MCAqIHkxICsgejAgKiB6MSArIHcwICogdzEsXHJcblxyXG5cdFx0XHRcdGRpciA9ICggY29zID49IDAgPyAxIDogLSAxICksXHJcblx0XHRcdFx0c3FyU2luID0gMSAtIGNvcyAqIGNvcztcclxuXHJcblx0XHRcdC8vIFNraXAgdGhlIFNsZXJwIGZvciB0aW55IHN0ZXBzIHRvIGF2b2lkIG51bWVyaWMgcHJvYmxlbXM6XHJcblx0XHRcdGlmICggc3FyU2luID4gTnVtYmVyLkVQU0lMT04gKSB7XHJcblxyXG5cdFx0XHRcdHZhciBzaW4gPSBNYXRoLnNxcnQoIHNxclNpbiApLFxyXG5cdFx0XHRcdFx0bGVuID0gTWF0aC5hdGFuMiggc2luLCBjb3MgKiBkaXIgKTtcclxuXHJcblx0XHRcdFx0cyA9IE1hdGguc2luKCBzICogbGVuICkgLyBzaW47XHJcblx0XHRcdFx0dCA9IE1hdGguc2luKCB0ICogbGVuICkgLyBzaW47XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgdERpciA9IHQgKiBkaXI7XHJcblxyXG5cdFx0XHR4MCA9IHgwICogcyArIHgxICogdERpcjtcclxuXHRcdFx0eTAgPSB5MCAqIHMgKyB5MSAqIHREaXI7XHJcblx0XHRcdHowID0gejAgKiBzICsgejEgKiB0RGlyO1xyXG5cdFx0XHR3MCA9IHcwICogcyArIHcxICogdERpcjtcclxuXHJcblx0XHRcdC8vIE5vcm1hbGl6ZSBpbiBjYXNlIHdlIGp1c3QgZGlkIGEgbGVycDpcclxuXHRcdFx0aWYgKCBzID09PSAxIC0gdCApIHtcclxuXHJcblx0XHRcdFx0dmFyIGYgPSAxIC8gTWF0aC5zcXJ0KCB4MCAqIHgwICsgeTAgKiB5MCArIHowICogejAgKyB3MCAqIHcwICk7XHJcblxyXG5cdFx0XHRcdHgwICo9IGY7XHJcblx0XHRcdFx0eTAgKj0gZjtcclxuXHRcdFx0XHR6MCAqPSBmO1xyXG5cdFx0XHRcdHcwICo9IGY7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGRzdFsgZHN0T2Zmc2V0IF0gPSB4MDtcclxuXHRcdGRzdFsgZHN0T2Zmc2V0ICsgMSBdID0geTA7XHJcblx0XHRkc3RbIGRzdE9mZnNldCArIDIgXSA9IHowO1xyXG5cdFx0ZHN0WyBkc3RPZmZzZXQgKyAzIF0gPSB3MDtcclxuXHJcblx0fVxyXG5cclxufSApO1xyXG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFF1YXRlcm5pb24ucHJvdG90eXBlLCB7XHJcblxyXG5cdHg6IHtcclxuXHJcblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLl94O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy5feCA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdHk6IHtcclxuXHJcblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLl95O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy5feSA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdHo6IHtcclxuXHJcblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLl96O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy5feiA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdHc6IHtcclxuXHJcblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLl93O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy5fdyA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcbn0gKTtcclxuXHJcbk9iamVjdC5hc3NpZ24oIFF1YXRlcm5pb24ucHJvdG90eXBlLCB7XHJcblxyXG5cdGlzUXVhdGVybmlvbjogdHJ1ZSxcclxuXHJcblx0c2V0OiBmdW5jdGlvbiAoIHgsIHksIHosIHcgKSB7XHJcblxyXG5cdFx0dGhpcy5feCA9IHg7XHJcblx0XHR0aGlzLl95ID0geTtcclxuXHRcdHRoaXMuX3ogPSB6O1xyXG5cdFx0dGhpcy5fdyA9IHc7XHJcblxyXG5cdFx0dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNsb25lOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCB0aGlzLl94LCB0aGlzLl95LCB0aGlzLl96LCB0aGlzLl93ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNvcHk6IGZ1bmN0aW9uICggcXVhdGVybmlvbiApIHtcclxuXHJcblx0XHR0aGlzLl94ID0gcXVhdGVybmlvbi54O1xyXG5cdFx0dGhpcy5feSA9IHF1YXRlcm5pb24ueTtcclxuXHRcdHRoaXMuX3ogPSBxdWF0ZXJuaW9uLno7XHJcblx0XHR0aGlzLl93ID0gcXVhdGVybmlvbi53O1xyXG5cclxuXHRcdHRoaXMub25DaGFuZ2VDYWxsYmFjaygpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRGcm9tRXVsZXI6IGZ1bmN0aW9uICggZXVsZXIsIHVwZGF0ZSApIHtcclxuXHJcblx0XHRpZiAoICEgKCBldWxlciAmJiBldWxlci5pc0V1bGVyICkgKSB7XHJcblxyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdDT09MLlF1YXRlcm5pb246IC5zZXRGcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLicgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIHggPSBldWxlci5feCwgeSA9IGV1bGVyLl95LCB6ID0gZXVsZXIuX3osIG9yZGVyID0gZXVsZXIub3JkZXI7XHJcblxyXG5cdFx0Ly8gaHR0cDovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlL1xyXG5cdFx0Ly8gXHQyMDY5Ni1mdW5jdGlvbi10by1jb252ZXJ0LWJldHdlZW4tZGNtLWV1bGVyLWFuZ2xlcy1xdWF0ZXJuaW9ucy1hbmQtZXVsZXItdmVjdG9ycy9cclxuXHRcdC8vXHRjb250ZW50L1NwaW5DYWxjLm1cclxuXHJcblx0XHR2YXIgY29zID0gTWF0aC5jb3M7XHJcblx0XHR2YXIgc2luID0gTWF0aC5zaW47XHJcblxyXG5cdFx0dmFyIGMxID0gY29zKCB4IC8gMiApO1xyXG5cdFx0dmFyIGMyID0gY29zKCB5IC8gMiApO1xyXG5cdFx0dmFyIGMzID0gY29zKCB6IC8gMiApO1xyXG5cclxuXHRcdHZhciBzMSA9IHNpbiggeCAvIDIgKTtcclxuXHRcdHZhciBzMiA9IHNpbiggeSAvIDIgKTtcclxuXHRcdHZhciBzMyA9IHNpbiggeiAvIDIgKTtcclxuXHJcblx0XHRpZiAoIG9yZGVyID09PSAnWFlaJyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3ggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7XHJcblx0XHRcdHRoaXMuX3kgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XHJcblx0XHRcdHRoaXMuX3ogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XHJcblx0XHRcdHRoaXMuX3cgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggb3JkZXIgPT09ICdZWFonICkge1xyXG5cclxuXHRcdFx0dGhpcy5feCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcclxuXHRcdFx0dGhpcy5feSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcclxuXHRcdFx0dGhpcy5feiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMztcclxuXHRcdFx0dGhpcy5fdyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcclxuXHJcblx0XHR9IGVsc2UgaWYgKCBvcmRlciA9PT0gJ1pYWScgKSB7XHJcblxyXG5cdFx0XHR0aGlzLl94ID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzO1xyXG5cdFx0XHR0aGlzLl95ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzO1xyXG5cdFx0XHR0aGlzLl96ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzO1xyXG5cdFx0XHR0aGlzLl93ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzO1xyXG5cclxuXHRcdH0gZWxzZSBpZiAoIG9yZGVyID09PSAnWllYJyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3ggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XHJcblx0XHRcdHRoaXMuX3kgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7XHJcblx0XHRcdHRoaXMuX3ogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7XHJcblx0XHRcdHRoaXMuX3cgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggb3JkZXIgPT09ICdZWlgnICkge1xyXG5cclxuXHRcdFx0dGhpcy5feCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcclxuXHRcdFx0dGhpcy5feSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMztcclxuXHRcdFx0dGhpcy5feiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMztcclxuXHRcdFx0dGhpcy5fdyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMztcclxuXHJcblx0XHR9IGVsc2UgaWYgKCBvcmRlciA9PT0gJ1haWScgKSB7XHJcblxyXG5cdFx0XHR0aGlzLl94ID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzO1xyXG5cdFx0XHR0aGlzLl95ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzO1xyXG5cdFx0XHR0aGlzLl96ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzO1xyXG5cdFx0XHR0aGlzLl93ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVwZGF0ZSAhPT0gZmFsc2UgKSB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0RnJvbUF4aXNBbmdsZTogZnVuY3Rpb24gKCBheGlzLCBhbmdsZSApIHtcclxuXHJcblx0XHQvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvYW5nbGVUb1F1YXRlcm5pb24vaW5kZXguaHRtXHJcblxyXG5cdFx0Ly8gYXNzdW1lcyBheGlzIGlzIG5vcm1hbGl6ZWRcclxuXHJcblx0XHR2YXIgaGFsZkFuZ2xlID0gYW5nbGUgLyAyLCBzID0gTWF0aC5zaW4oIGhhbGZBbmdsZSApO1xyXG5cclxuXHRcdHRoaXMuX3ggPSBheGlzLnggKiBzO1xyXG5cdFx0dGhpcy5feSA9IGF4aXMueSAqIHM7XHJcblx0XHR0aGlzLl96ID0gYXhpcy56ICogcztcclxuXHRcdHRoaXMuX3cgPSBNYXRoLmNvcyggaGFsZkFuZ2xlICk7XHJcblxyXG5cdFx0dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldEZyb21Sb3RhdGlvbk1hdHJpeDogZnVuY3Rpb24gKCBtICkge1xyXG5cclxuXHRcdC8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2dlb21ldHJ5L3JvdGF0aW9ucy9jb252ZXJzaW9ucy9tYXRyaXhUb1F1YXRlcm5pb24vaW5kZXguaHRtXHJcblxyXG5cdFx0Ly8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZClcclxuXHJcblx0XHR2YXIgdGUgPSBtLmVsZW1lbnRzLFxyXG5cclxuXHRcdFx0bTExID0gdGVbIDAgXSwgbTEyID0gdGVbIDQgXSwgbTEzID0gdGVbIDggXSxcclxuXHRcdFx0bTIxID0gdGVbIDEgXSwgbTIyID0gdGVbIDUgXSwgbTIzID0gdGVbIDkgXSxcclxuXHRcdFx0bTMxID0gdGVbIDIgXSwgbTMyID0gdGVbIDYgXSwgbTMzID0gdGVbIDEwIF0sXHJcblxyXG5cdFx0XHR0cmFjZSA9IG0xMSArIG0yMiArIG0zMyxcclxuXHRcdFx0cztcclxuXHJcblx0XHRpZiAoIHRyYWNlID4gMCApIHtcclxuXHJcblx0XHRcdHMgPSAwLjUgLyBNYXRoLnNxcnQoIHRyYWNlICsgMS4wICk7XHJcblxyXG5cdFx0XHR0aGlzLl93ID0gMC4yNSAvIHM7XHJcblx0XHRcdHRoaXMuX3ggPSAoIG0zMiAtIG0yMyApICogcztcclxuXHRcdFx0dGhpcy5feSA9ICggbTEzIC0gbTMxICkgKiBzO1xyXG5cdFx0XHR0aGlzLl96ID0gKCBtMjEgLSBtMTIgKSAqIHM7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggbTExID4gbTIyICYmIG0xMSA+IG0zMyApIHtcclxuXHJcblx0XHRcdHMgPSAyLjAgKiBNYXRoLnNxcnQoIDEuMCArIG0xMSAtIG0yMiAtIG0zMyApO1xyXG5cclxuXHRcdFx0dGhpcy5fdyA9ICggbTMyIC0gbTIzICkgLyBzO1xyXG5cdFx0XHR0aGlzLl94ID0gMC4yNSAqIHM7XHJcblx0XHRcdHRoaXMuX3kgPSAoIG0xMiArIG0yMSApIC8gcztcclxuXHRcdFx0dGhpcy5feiA9ICggbTEzICsgbTMxICkgLyBzO1xyXG5cclxuXHRcdH0gZWxzZSBpZiAoIG0yMiA+IG0zMyApIHtcclxuXHJcblx0XHRcdHMgPSAyLjAgKiBNYXRoLnNxcnQoIDEuMCArIG0yMiAtIG0xMSAtIG0zMyApO1xyXG5cclxuXHRcdFx0dGhpcy5fdyA9ICggbTEzIC0gbTMxICkgLyBzO1xyXG5cdFx0XHR0aGlzLl94ID0gKCBtMTIgKyBtMjEgKSAvIHM7XHJcblx0XHRcdHRoaXMuX3kgPSAwLjI1ICogcztcclxuXHRcdFx0dGhpcy5feiA9ICggbTIzICsgbTMyICkgLyBzO1xyXG5cclxuXHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRzID0gMi4wICogTWF0aC5zcXJ0KCAxLjAgKyBtMzMgLSBtMTEgLSBtMjIgKTtcclxuXHJcblx0XHRcdHRoaXMuX3cgPSAoIG0yMSAtIG0xMiApIC8gcztcclxuXHRcdFx0dGhpcy5feCA9ICggbTEzICsgbTMxICkgLyBzO1xyXG5cdFx0XHR0aGlzLl95ID0gKCBtMjMgKyBtMzIgKSAvIHM7XHJcblx0XHRcdHRoaXMuX3ogPSAwLjI1ICogcztcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldEZyb21Vbml0VmVjdG9yczogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdC8vIGFzc3VtZXMgZGlyZWN0aW9uIHZlY3RvcnMgdkZyb20gYW5kIHZUbyBhcmUgbm9ybWFsaXplZFxyXG5cclxuXHRcdHZhciB2MSA9IG5ldyBWZWN0b3IzKCk7XHJcblx0XHR2YXIgcjtcclxuXHJcblx0XHR2YXIgRVBTID0gMC4wMDAwMDE7XHJcblxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHNldEZyb21Vbml0VmVjdG9ycyggdkZyb20sIHZUbyApIHtcclxuXHJcblx0XHRcdGlmICggdjEgPT09IHVuZGVmaW5lZCApIHYxID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcblx0XHRcdHIgPSB2RnJvbS5kb3QoIHZUbyApICsgMTtcclxuXHJcblx0XHRcdGlmICggciA8IEVQUyApIHtcclxuXHJcblx0XHRcdFx0ciA9IDA7XHJcblxyXG5cdFx0XHRcdGlmICggTWF0aC5hYnMoIHZGcm9tLnggKSA+IE1hdGguYWJzKCB2RnJvbS56ICkgKSB7XHJcblxyXG5cdFx0XHRcdFx0djEuc2V0KCAtIHZGcm9tLnksIHZGcm9tLngsIDAgKTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHR2MS5zZXQoIDAsIC0gdkZyb20ueiwgdkZyb20ueSApO1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHR2MS5jcm9zc1ZlY3RvcnMoIHZGcm9tLCB2VG8gKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3ggPSB2MS54O1xyXG5cdFx0XHR0aGlzLl95ID0gdjEueTtcclxuXHRcdFx0dGhpcy5feiA9IHYxLno7XHJcblx0XHRcdHRoaXMuX3cgPSByO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMubm9ybWFsaXplKCk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSgpLFxyXG5cclxuXHRhbmdsZVRvOiBmdW5jdGlvbiAoIHEgKSB7XHJcblxyXG5cdFx0cmV0dXJuIDIgKiBNYXRoLmFjb3MoIE1hdGguYWJzKCBfTWF0aC5jbGFtcCggdGhpcy5kb3QoIHEgKSwgLSAxLCAxICkgKSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRyb3RhdGVUb3dhcmRzOiBmdW5jdGlvbiAoIHEsIHN0ZXAgKSB7XHJcblxyXG5cdFx0dmFyIGFuZ2xlID0gdGhpcy5hbmdsZVRvKCBxICk7XHJcblxyXG5cdFx0aWYgKCBhbmdsZSA9PT0gMCApIHJldHVybiB0aGlzO1xyXG5cclxuXHRcdHZhciB0ID0gTWF0aC5taW4oIDEsIHN0ZXAgLyBhbmdsZSApO1xyXG5cclxuXHRcdHRoaXMuc2xlcnAoIHEsIHQgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0aW52ZXJzZTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdC8vIHF1YXRlcm5pb24gaXMgYXNzdW1lZCB0byBoYXZlIHVuaXQgbGVuZ3RoXHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuY29uanVnYXRlKCk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNvbmp1Z2F0ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHRoaXMuX3ggKj0gLSAxO1xyXG5cdFx0dGhpcy5feSAqPSAtIDE7XHJcblx0XHR0aGlzLl96ICo9IC0gMTtcclxuXHJcblx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0ZG90OiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3ggKiB2Ll94ICsgdGhpcy5feSAqIHYuX3kgKyB0aGlzLl96ICogdi5feiArIHRoaXMuX3cgKiB2Ll93O1xyXG5cclxuXHR9LFxyXG5cclxuXHRsZW5ndGhTcTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLl94ICogdGhpcy5feCArIHRoaXMuX3kgKiB0aGlzLl95ICsgdGhpcy5feiAqIHRoaXMuX3ogKyB0aGlzLl93ICogdGhpcy5fdztcclxuXHJcblx0fSxcclxuXHJcblx0bGVuZ3RoOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0cmV0dXJuIE1hdGguc3FydCggdGhpcy5feCAqIHRoaXMuX3ggKyB0aGlzLl95ICogdGhpcy5feSArIHRoaXMuX3ogKiB0aGlzLl96ICsgdGhpcy5fdyAqIHRoaXMuX3cgKTtcclxuXHJcblx0fSxcclxuXHJcblx0bm9ybWFsaXplOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dmFyIGwgPSB0aGlzLmxlbmd0aCgpO1xyXG5cclxuXHRcdGlmICggbCA9PT0gMCApIHtcclxuXHJcblx0XHRcdHRoaXMuX3ggPSAwO1xyXG5cdFx0XHR0aGlzLl95ID0gMDtcclxuXHRcdFx0dGhpcy5feiA9IDA7XHJcblx0XHRcdHRoaXMuX3cgPSAxO1xyXG5cclxuXHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRsID0gMSAvIGw7XHJcblxyXG5cdFx0XHR0aGlzLl94ID0gdGhpcy5feCAqIGw7XHJcblx0XHRcdHRoaXMuX3kgPSB0aGlzLl95ICogbDtcclxuXHRcdFx0dGhpcy5feiA9IHRoaXMuX3ogKiBsO1xyXG5cdFx0XHR0aGlzLl93ID0gdGhpcy5fdyAqIGw7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMub25DaGFuZ2VDYWxsYmFjaygpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtdWx0aXBseTogZnVuY3Rpb24gKCBxLCBwICkge1xyXG5cclxuXHRcdGlmICggcCAhPT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0Y29uc29sZS53YXJuKCAnQ09PTC5RdWF0ZXJuaW9uOiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVF1YXRlcm5pb25zKCBhLCBiICkgaW5zdGVhZC4nICk7XHJcblx0XHRcdHJldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoIHEsIHAgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyggdGhpcywgcSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRwcmVtdWx0aXBseTogZnVuY3Rpb24gKCBxICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoIHEsIHRoaXMgKTtcclxuXHJcblx0fSxcclxuXHJcblx0bXVsdGlwbHlRdWF0ZXJuaW9uczogZnVuY3Rpb24gKCBhLCBiICkge1xyXG5cclxuXHRcdC8vIGZyb20gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9yZWFsTm9ybWVkQWxnZWJyYS9xdWF0ZXJuaW9ucy9jb2RlL2luZGV4Lmh0bVxyXG5cclxuXHRcdHZhciBxYXggPSBhLl94LCBxYXkgPSBhLl95LCBxYXogPSBhLl96LCBxYXcgPSBhLl93O1xyXG5cdFx0dmFyIHFieCA9IGIuX3gsIHFieSA9IGIuX3ksIHFieiA9IGIuX3osIHFidyA9IGIuX3c7XHJcblxyXG5cdFx0dGhpcy5feCA9IHFheCAqIHFidyArIHFhdyAqIHFieCArIHFheSAqIHFieiAtIHFheiAqIHFieTtcclxuXHRcdHRoaXMuX3kgPSBxYXkgKiBxYncgKyBxYXcgKiBxYnkgKyBxYXogKiBxYnggLSBxYXggKiBxYno7XHJcblx0XHR0aGlzLl96ID0gcWF6ICogcWJ3ICsgcWF3ICogcWJ6ICsgcWF4ICogcWJ5IC0gcWF5ICogcWJ4O1xyXG5cdFx0dGhpcy5fdyA9IHFhdyAqIHFidyAtIHFheCAqIHFieCAtIHFheSAqIHFieSAtIHFheiAqIHFiejtcclxuXHJcblx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2xlcnA6IGZ1bmN0aW9uICggcWIsIHQgKSB7XHJcblxyXG5cdFx0aWYgKCB0ID09PSAwICkgcmV0dXJuIHRoaXM7XHJcblx0XHRpZiAoIHQgPT09IDEgKSByZXR1cm4gdGhpcy5jb3B5KCBxYiApO1xyXG5cclxuXHRcdHZhciB4ID0gdGhpcy5feCwgeSA9IHRoaXMuX3ksIHogPSB0aGlzLl96LCB3ID0gdGhpcy5fdztcclxuXHJcblx0XHQvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL3JlYWxOb3JtZWRBbGdlYnJhL3F1YXRlcm5pb25zL3NsZXJwL1xyXG5cclxuXHRcdHZhciBjb3NIYWxmVGhldGEgPSB3ICogcWIuX3cgKyB4ICogcWIuX3ggKyB5ICogcWIuX3kgKyB6ICogcWIuX3o7XHJcblxyXG5cdFx0aWYgKCBjb3NIYWxmVGhldGEgPCAwICkge1xyXG5cclxuXHRcdFx0dGhpcy5fdyA9IC0gcWIuX3c7XHJcblx0XHRcdHRoaXMuX3ggPSAtIHFiLl94O1xyXG5cdFx0XHR0aGlzLl95ID0gLSBxYi5feTtcclxuXHRcdFx0dGhpcy5feiA9IC0gcWIuX3o7XHJcblxyXG5cdFx0XHRjb3NIYWxmVGhldGEgPSAtIGNvc0hhbGZUaGV0YTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0dGhpcy5jb3B5KCBxYiApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGNvc0hhbGZUaGV0YSA+PSAxLjAgKSB7XHJcblxyXG5cdFx0XHR0aGlzLl93ID0gdztcclxuXHRcdFx0dGhpcy5feCA9IHg7XHJcblx0XHRcdHRoaXMuX3kgPSB5O1xyXG5cdFx0XHR0aGlzLl96ID0gejtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHR2YXIgc3FyU2luSGFsZlRoZXRhID0gMS4wIC0gY29zSGFsZlRoZXRhICogY29zSGFsZlRoZXRhO1xyXG5cclxuXHRcdGlmICggc3FyU2luSGFsZlRoZXRhIDw9IE51bWJlci5FUFNJTE9OICkge1xyXG5cclxuXHRcdFx0dmFyIHMgPSAxIC0gdDtcclxuXHRcdFx0dGhpcy5fdyA9IHMgKiB3ICsgdCAqIHRoaXMuX3c7XHJcblx0XHRcdHRoaXMuX3ggPSBzICogeCArIHQgKiB0aGlzLl94O1xyXG5cdFx0XHR0aGlzLl95ID0gcyAqIHkgKyB0ICogdGhpcy5feTtcclxuXHRcdFx0dGhpcy5feiA9IHMgKiB6ICsgdCAqIHRoaXMuX3o7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5ub3JtYWxpemUoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIHNpbkhhbGZUaGV0YSA9IE1hdGguc3FydCggc3FyU2luSGFsZlRoZXRhICk7XHJcblx0XHR2YXIgaGFsZlRoZXRhID0gTWF0aC5hdGFuMiggc2luSGFsZlRoZXRhLCBjb3NIYWxmVGhldGEgKTtcclxuXHRcdHZhciByYXRpb0EgPSBNYXRoLnNpbiggKCAxIC0gdCApICogaGFsZlRoZXRhICkgLyBzaW5IYWxmVGhldGEsXHJcblx0XHRcdHJhdGlvQiA9IE1hdGguc2luKCB0ICogaGFsZlRoZXRhICkgLyBzaW5IYWxmVGhldGE7XHJcblxyXG5cdFx0dGhpcy5fdyA9ICggdyAqIHJhdGlvQSArIHRoaXMuX3cgKiByYXRpb0IgKTtcclxuXHRcdHRoaXMuX3ggPSAoIHggKiByYXRpb0EgKyB0aGlzLl94ICogcmF0aW9CICk7XHJcblx0XHR0aGlzLl95ID0gKCB5ICogcmF0aW9BICsgdGhpcy5feSAqIHJhdGlvQiApO1xyXG5cdFx0dGhpcy5feiA9ICggeiAqIHJhdGlvQSArIHRoaXMuX3ogKiByYXRpb0IgKTtcclxuXHJcblx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0ZXF1YWxzOiBmdW5jdGlvbiAoIHF1YXRlcm5pb24gKSB7XHJcblxyXG5cdFx0cmV0dXJuICggcXVhdGVybmlvbi5feCA9PT0gdGhpcy5feCApICYmICggcXVhdGVybmlvbi5feSA9PT0gdGhpcy5feSApICYmICggcXVhdGVybmlvbi5feiA9PT0gdGhpcy5feiApICYmICggcXVhdGVybmlvbi5fdyA9PT0gdGhpcy5fdyApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRmcm9tQXJyYXk6IGZ1bmN0aW9uICggYXJyYXksIG9mZnNldCApIHtcclxuXHJcblx0XHRpZiAoIG9mZnNldCA9PT0gdW5kZWZpbmVkICkgb2Zmc2V0ID0gMDtcclxuXHJcblx0XHR0aGlzLl94ID0gYXJyYXlbIG9mZnNldCBdO1xyXG5cdFx0dGhpcy5feSA9IGFycmF5WyBvZmZzZXQgKyAxIF07XHJcblx0XHR0aGlzLl96ID0gYXJyYXlbIG9mZnNldCArIDIgXTtcclxuXHRcdHRoaXMuX3cgPSBhcnJheVsgb2Zmc2V0ICsgMyBdO1xyXG5cclxuXHRcdHRoaXMub25DaGFuZ2VDYWxsYmFjaygpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHR0b0FycmF5OiBmdW5jdGlvbiAoIGFycmF5LCBvZmZzZXQgKSB7XHJcblxyXG5cdFx0aWYgKCBhcnJheSA9PT0gdW5kZWZpbmVkICkgYXJyYXkgPSBbXTtcclxuXHRcdGlmICggb2Zmc2V0ID09PSB1bmRlZmluZWQgKSBvZmZzZXQgPSAwO1xyXG5cclxuXHRcdGFycmF5WyBvZmZzZXQgXSA9IHRoaXMuX3g7XHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgMSBdID0gdGhpcy5feTtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyAyIF0gPSB0aGlzLl96O1xyXG5cdFx0YXJyYXlbIG9mZnNldCArIDMgXSA9IHRoaXMuX3c7XHJcblxyXG5cdFx0cmV0dXJuIGFycmF5O1xyXG5cclxuXHR9LFxyXG5cclxuXHRvbkNoYW5nZTogZnVuY3Rpb24gKCBjYWxsYmFjayApIHtcclxuXHJcblx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0b25DaGFuZ2VDYWxsYmFjazogZnVuY3Rpb24gKCkge31cclxuXHJcbn0gKTtcclxuXHJcblxyXG5leHBvcnQgeyBRdWF0ZXJuaW9uIH07XHJcbiIsImltcG9ydCB7X01hdGh9IGZyb20gJy4vL01hdGguanMnO1xyXG5pbXBvcnQgeyBNYXRyaXg0fSBmcm9tICcuL01hdHJpeDQuanMnO1xyXG5pbXBvcnQge1F1YXRlcm5pb259IGZyb20gJy4vUXVhdGVybmlvbi5qcyc7XHJcblxyXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBraWxlIC8gaHR0cDovL2tpbGUuc3RyYXZhZ2FuemEub3JnL1xyXG4gKiBAYXV0aG9yIHBoaWxvZ2IgLyBodHRwOi8vYmxvZy50aGVqaXQub3JnL1xyXG4gKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlL1xyXG4gKiBAYXV0aG9yIGVncmFldGhlciAvIGh0dHA6Ly9lZ3JhZXRoZXIuY29tL1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICovXHJcblxyXG5mdW5jdGlvbiBWZWN0b3IzKCB4LCB5LCB6ICkge1xyXG5cclxuXHR0aGlzLnggPSB4IHx8IDA7XHJcblx0dGhpcy55ID0geSB8fCAwO1xyXG5cdHRoaXMueiA9IHogfHwgMDtcclxuXHJcbn1cclxuXHJcbk9iamVjdC5hc3NpZ24oIFZlY3RvcjMucHJvdG90eXBlLCB7XHJcblxyXG5cdGlzVmVjdG9yMzogdHJ1ZSxcclxuXHJcblx0c2V0OiBmdW5jdGlvbiAoIHgsIHksIHogKSB7XHJcblxyXG5cdFx0dGhpcy54ID0geDtcclxuXHRcdHRoaXMueSA9IHk7XHJcblx0XHR0aGlzLnogPSB6O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRTY2FsYXI6IGZ1bmN0aW9uICggc2NhbGFyICkge1xyXG5cclxuXHRcdHRoaXMueCA9IHNjYWxhcjtcclxuXHRcdHRoaXMueSA9IHNjYWxhcjtcclxuXHRcdHRoaXMueiA9IHNjYWxhcjtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0WDogZnVuY3Rpb24gKCB4ICkge1xyXG5cclxuXHRcdHRoaXMueCA9IHg7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldFk6IGZ1bmN0aW9uICggeSApIHtcclxuXHJcblx0XHR0aGlzLnkgPSB5O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRaOiBmdW5jdGlvbiAoIHogKSB7XHJcblxyXG5cdFx0dGhpcy56ID0gejtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0Q29tcG9uZW50OiBmdW5jdGlvbiAoIGluZGV4LCB2YWx1ZSApIHtcclxuXHJcblx0XHRzd2l0Y2ggKCBpbmRleCApIHtcclxuXHJcblx0XHRcdGNhc2UgMDogdGhpcy54ID0gdmFsdWU7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDE6IHRoaXMueSA9IHZhbHVlOyBicmVhaztcclxuXHRcdFx0Y2FzZSAyOiB0aGlzLnogPSB2YWx1ZTsgYnJlYWs7XHJcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvciggJ2luZGV4IGlzIG91dCBvZiByYW5nZTogJyArIGluZGV4ICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRnZXRDb21wb25lbnQ6IGZ1bmN0aW9uICggaW5kZXggKSB7XHJcblxyXG5cdFx0c3dpdGNoICggaW5kZXggKSB7XHJcblxyXG5cdFx0XHRjYXNlIDA6IHJldHVybiB0aGlzLng7XHJcblx0XHRcdGNhc2UgMTogcmV0dXJuIHRoaXMueTtcclxuXHRcdFx0Y2FzZSAyOiByZXR1cm4gdGhpcy56O1xyXG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoICdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcgKyBpbmRleCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0Y2xvbmU6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoIHRoaXMueCwgdGhpcy55LCB0aGlzLnogKTtcclxuXHJcblx0fSxcclxuXHJcblx0Y29weTogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHRoaXMueCA9IHYueDtcclxuXHRcdHRoaXMueSA9IHYueTtcclxuXHRcdHRoaXMueiA9IHYuejtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0YWRkOiBmdW5jdGlvbiAoIHYsIHcgKSB7XHJcblxyXG5cdFx0aWYgKCB3ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLlZlY3RvcjM6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nICk7XHJcblx0XHRcdHJldHVybiB0aGlzLmFkZFZlY3RvcnMoIHYsIHcgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy54ICs9IHYueDtcclxuXHRcdHRoaXMueSArPSB2Lnk7XHJcblx0XHR0aGlzLnogKz0gdi56O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRhZGRTY2FsYXI6IGZ1bmN0aW9uICggcyApIHtcclxuXHJcblx0XHR0aGlzLnggKz0gcztcclxuXHRcdHRoaXMueSArPSBzO1xyXG5cdFx0dGhpcy56ICs9IHM7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFkZFZlY3RvcnM6IGZ1bmN0aW9uICggYSwgYiApIHtcclxuXHJcblx0XHR0aGlzLnggPSBhLnggKyBiLng7XHJcblx0XHR0aGlzLnkgPSBhLnkgKyBiLnk7XHJcblx0XHR0aGlzLnogPSBhLnogKyBiLno7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFkZFNjYWxlZFZlY3RvcjogZnVuY3Rpb24gKCB2LCBzICkge1xyXG5cclxuXHRcdHRoaXMueCArPSB2LnggKiBzO1xyXG5cdFx0dGhpcy55ICs9IHYueSAqIHM7XHJcblx0XHR0aGlzLnogKz0gdi56ICogcztcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c3ViOiBmdW5jdGlvbiAoIHYsIHcgKSB7XHJcblxyXG5cdFx0aWYgKCB3ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLlZlY3RvcjM6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nICk7XHJcblx0XHRcdHJldHVybiB0aGlzLnN1YlZlY3RvcnMoIHYsIHcgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy54IC09IHYueDtcclxuXHRcdHRoaXMueSAtPSB2Lnk7XHJcblx0XHR0aGlzLnogLT0gdi56O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzdWJTY2FsYXI6IGZ1bmN0aW9uICggcyApIHtcclxuXHJcblx0XHR0aGlzLnggLT0gcztcclxuXHRcdHRoaXMueSAtPSBzO1xyXG5cdFx0dGhpcy56IC09IHM7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG4gICAgc2NhbGVWZWN0b3JzIDpmdW5jdGlvbih2MSxzY2FsZSl7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHYxLngqc2NhbGUsIHYxLnkqc2NhbGUsIHYxLnoqc2NhbGUgKTtcclxuICAgIH0sXHJcblxyXG5cdHN1YlZlY3RvcnM6IGZ1bmN0aW9uICggYSwgYiApIHtcclxuXHJcblx0XHR0aGlzLnggPSBhLnggLSBiLng7XHJcblx0XHR0aGlzLnkgPSBhLnkgLSBiLnk7XHJcblx0XHR0aGlzLnogPSBhLnogLSBiLno7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG11bHRpcGx5OiBmdW5jdGlvbiAoIHYsIHcgKSB7XHJcblxyXG5cdFx0aWYgKCB3ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLlZlY3RvcjM6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5VmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyApO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5tdWx0aXBseVZlY3RvcnMoIHYsIHcgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy54ICo9IHYueDtcclxuXHRcdHRoaXMueSAqPSB2Lnk7XHJcblx0XHR0aGlzLnogKj0gdi56O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtdWx0aXBseVNjYWxhcjogZnVuY3Rpb24gKCBzY2FsYXIgKSB7XHJcblxyXG5cdFx0dGhpcy54ICo9IHNjYWxhcjtcclxuXHRcdHRoaXMueSAqPSBzY2FsYXI7XHJcblx0XHR0aGlzLnogKj0gc2NhbGFyO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtdWx0aXBseVZlY3RvcnM6IGZ1bmN0aW9uICggYSwgYiApIHtcclxuXHJcblx0XHR0aGlzLnggPSBhLnggKiBiLng7XHJcblx0XHR0aGlzLnkgPSBhLnkgKiBiLnk7XHJcblx0XHR0aGlzLnogPSBhLnogKiBiLno7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFwcGx5RXVsZXI6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgcXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcblxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIGFwcGx5RXVsZXIoIGV1bGVyICkge1xyXG5cclxuXHRcdFx0aWYgKCAhICggZXVsZXIgJiYgZXVsZXIuaXNFdWxlciApICkge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCAnQ09PTC5WZWN0b3IzOiAuYXBwbHlFdWxlcigpIG5vdyBleHBlY3RzIGFuIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuJyApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uLnNldEZyb21FdWxlciggZXVsZXIgKSApO1xyXG5cclxuXHRcdH07XHJcblxyXG5cdH0oKSxcclxuXHJcblx0YXBwbHlBeGlzQW5nbGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgcXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcblxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIGFwcGx5QXhpc0FuZ2xlKCBheGlzLCBhbmdsZSApIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmFwcGx5UXVhdGVybmlvbiggcXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKCBheGlzLCBhbmdsZSApICk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSgpLFxyXG5cclxuXHRhcHBseU1hdHJpeDM6IGZ1bmN0aW9uICggbSApIHtcclxuXHJcblx0XHR2YXIgeCA9IHRoaXMueCwgeSA9IHRoaXMueSwgeiA9IHRoaXMuejtcclxuXHRcdHZhciBlID0gbS5lbGVtZW50cztcclxuXHJcblx0XHR0aGlzLnggPSBlWyAwIF0gKiB4ICsgZVsgMyBdICogeSArIGVbIDYgXSAqIHo7XHJcblx0XHR0aGlzLnkgPSBlWyAxIF0gKiB4ICsgZVsgNCBdICogeSArIGVbIDcgXSAqIHo7XHJcblx0XHR0aGlzLnogPSBlWyAyIF0gKiB4ICsgZVsgNSBdICogeSArIGVbIDggXSAqIHo7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFwcGx5TWF0cml4NDogZnVuY3Rpb24gKCBtICkge1xyXG5cclxuXHRcdHZhciB4ID0gdGhpcy54LCB5ID0gdGhpcy55LCB6ID0gdGhpcy56O1xyXG5cdFx0dmFyIGUgPSBtLmVsZW1lbnRzO1xyXG5cclxuXHRcdHZhciB3ID0gMSAvICggZVsgMyBdICogeCArIGVbIDcgXSAqIHkgKyBlWyAxMSBdICogeiArIGVbIDE1IF0gKTtcclxuXHJcblx0XHR0aGlzLnggPSAoIGVbIDAgXSAqIHggKyBlWyA0IF0gKiB5ICsgZVsgOCBdICogeiArIGVbIDEyIF0gKSAqIHc7XHJcblx0XHR0aGlzLnkgPSAoIGVbIDEgXSAqIHggKyBlWyA1IF0gKiB5ICsgZVsgOSBdICogeiArIGVbIDEzIF0gKSAqIHc7XHJcblx0XHR0aGlzLnogPSAoIGVbIDIgXSAqIHggKyBlWyA2IF0gKiB5ICsgZVsgMTAgXSAqIHogKyBlWyAxNCBdICkgKiB3O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRhcHBseVF1YXRlcm5pb246IGZ1bmN0aW9uICggcSApIHtcclxuXHJcblx0XHR2YXIgeCA9IHRoaXMueCwgeSA9IHRoaXMueSwgeiA9IHRoaXMuejtcclxuXHRcdHZhciBxeCA9IHEueCwgcXkgPSBxLnksIHF6ID0gcS56LCBxdyA9IHEudztcclxuXHJcblx0XHQvLyBjYWxjdWxhdGUgcXVhdCAqIHZlY3RvclxyXG5cclxuXHRcdHZhciBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTtcclxuXHRcdHZhciBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejtcclxuXHRcdHZhciBpeiA9IHF3ICogeiArIHF4ICogeSAtIHF5ICogeDtcclxuXHRcdHZhciBpdyA9IC0gcXggKiB4IC0gcXkgKiB5IC0gcXogKiB6O1xyXG5cclxuXHRcdC8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXRcclxuXHJcblx0XHR0aGlzLnggPSBpeCAqIHF3ICsgaXcgKiAtIHF4ICsgaXkgKiAtIHF6IC0gaXogKiAtIHF5O1xyXG5cdFx0dGhpcy55ID0gaXkgKiBxdyArIGl3ICogLSBxeSArIGl6ICogLSBxeCAtIGl4ICogLSBxejtcclxuXHRcdHRoaXMueiA9IGl6ICogcXcgKyBpdyAqIC0gcXogKyBpeCAqIC0gcXkgLSBpeSAqIC0gcXg7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHByb2plY3Q6IGZ1bmN0aW9uICggY2FtZXJhICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmFwcGx5TWF0cml4NCggY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSApLmFwcGx5TWF0cml4NCggY2FtZXJhLnByb2plY3Rpb25NYXRyaXggKTtcclxuXHJcblx0fSxcclxuXHJcblx0dW5wcm9qZWN0OiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dmFyIG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcblxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVucHJvamVjdCggY2FtZXJhICkge1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KCBtYXRyaXguZ2V0SW52ZXJzZSggY2FtZXJhLnByb2plY3Rpb25NYXRyaXggKSApLmFwcGx5TWF0cml4NCggY2FtZXJhLm1hdHJpeFdvcmxkICk7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiB0aGlzLmFwcGx5TWF0cml4NCggbWF0cml4LmdldEludmVyc2UoIGNhbWVyYS5WUG1hdHJpeCApICk7IOetieS7t1xyXG5cclxuXHRcdH07XHJcblxyXG5cdH0oKSxcclxuXHJcblx0dHJhbnNmb3JtRGlyZWN0aW9uOiBmdW5jdGlvbiAoIG0gKSB7XHJcblxyXG5cdFx0Ly8gaW5wdXQ6IENPT0wuTWF0cml4NCBhZmZpbmUgbWF0cml4XHJcblx0XHQvLyB2ZWN0b3IgaW50ZXJwcmV0ZWQgYXMgYSBkaXJlY3Rpb25cclxuXHJcblx0XHR2YXIgeCA9IHRoaXMueCwgeSA9IHRoaXMueSwgeiA9IHRoaXMuejtcclxuXHRcdHZhciBlID0gbS5lbGVtZW50cztcclxuXHJcblx0XHR0aGlzLnggPSBlWyAwIF0gKiB4ICsgZVsgNCBdICogeSArIGVbIDggXSAqIHo7XHJcblx0XHR0aGlzLnkgPSBlWyAxIF0gKiB4ICsgZVsgNSBdICogeSArIGVbIDkgXSAqIHo7XHJcblx0XHR0aGlzLnogPSBlWyAyIF0gKiB4ICsgZVsgNiBdICogeSArIGVbIDEwIF0gKiB6O1xyXG5cclxuXHRcdHJldHVybiB0aGlzLm5vcm1hbGl6ZSgpO1xyXG5cclxuXHR9LFxyXG5cclxuXHRkaXZpZGU6IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHR0aGlzLnggLz0gdi54O1xyXG5cdFx0dGhpcy55IC89IHYueTtcclxuXHRcdHRoaXMueiAvPSB2Lno7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGRpdmlkZVNjYWxhcjogZnVuY3Rpb24gKCBzY2FsYXIgKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoIDEgLyBzY2FsYXIgKTtcclxuXHJcblx0fSxcclxuXHJcblx0bWluOiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5taW4oIHRoaXMueCwgdi54ICk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLm1pbiggdGhpcy55LCB2LnkgKTtcclxuXHRcdHRoaXMueiA9IE1hdGgubWluKCB0aGlzLnosIHYueiApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtYXg6IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHR0aGlzLnggPSBNYXRoLm1heCggdGhpcy54LCB2LnggKTtcclxuXHRcdHRoaXMueSA9IE1hdGgubWF4KCB0aGlzLnksIHYueSApO1xyXG5cdFx0dGhpcy56ID0gTWF0aC5tYXgoIHRoaXMueiwgdi56ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNsYW1wOiBmdW5jdGlvbiAoIG1pbiwgbWF4ICkge1xyXG5cclxuXHRcdC8vIGFzc3VtZXMgbWluIDwgbWF4LCBjb21wb25lbnR3aXNlXHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5tYXgoIG1pbi54LCBNYXRoLm1pbiggbWF4LngsIHRoaXMueCApICk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLm1heCggbWluLnksIE1hdGgubWluKCBtYXgueSwgdGhpcy55ICkgKTtcclxuXHRcdHRoaXMueiA9IE1hdGgubWF4KCBtaW4ueiwgTWF0aC5taW4oIG1heC56LCB0aGlzLnogKSApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRjbGFtcFNjYWxhcjogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciBtaW4gPSBuZXcgVmVjdG9yMygpO1xyXG5cdFx0dmFyIG1heCA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIGNsYW1wU2NhbGFyKCBtaW5WYWwsIG1heFZhbCApIHtcclxuXHJcblx0XHRcdG1pbi5zZXQoIG1pblZhbCwgbWluVmFsLCBtaW5WYWwgKTtcclxuXHRcdFx0bWF4LnNldCggbWF4VmFsLCBtYXhWYWwsIG1heFZhbCApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuY2xhbXAoIG1pbiwgbWF4ICk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSgpLFxyXG5cclxuXHRjbGFtcExlbmd0aDogZnVuY3Rpb24gKCBtaW4sIG1heCApIHtcclxuXHJcblx0XHR2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIoIGxlbmd0aCB8fCAxICkubXVsdGlwbHlTY2FsYXIoIE1hdGgubWF4KCBtaW4sIE1hdGgubWluKCBtYXgsIGxlbmd0aCApICkgKTtcclxuXHJcblx0fSxcclxuXHJcblx0Zmxvb3I6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR0aGlzLnggPSBNYXRoLmZsb29yKCB0aGlzLnggKTtcclxuXHRcdHRoaXMueSA9IE1hdGguZmxvb3IoIHRoaXMueSApO1xyXG5cdFx0dGhpcy56ID0gTWF0aC5mbG9vciggdGhpcy56ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNlaWw6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR0aGlzLnggPSBNYXRoLmNlaWwoIHRoaXMueCApO1xyXG5cdFx0dGhpcy55ID0gTWF0aC5jZWlsKCB0aGlzLnkgKTtcclxuXHRcdHRoaXMueiA9IE1hdGguY2VpbCggdGhpcy56ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHJvdW5kOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5yb3VuZCggdGhpcy54ICk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLnJvdW5kKCB0aGlzLnkgKTtcclxuXHRcdHRoaXMueiA9IE1hdGgucm91bmQoIHRoaXMueiApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRyb3VuZFRvWmVybzogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHRoaXMueCA9ICggdGhpcy54IDwgMCApID8gTWF0aC5jZWlsKCB0aGlzLnggKSA6IE1hdGguZmxvb3IoIHRoaXMueCApO1xyXG5cdFx0dGhpcy55ID0gKCB0aGlzLnkgPCAwICkgPyBNYXRoLmNlaWwoIHRoaXMueSApIDogTWF0aC5mbG9vciggdGhpcy55ICk7XHJcblx0XHR0aGlzLnogPSAoIHRoaXMueiA8IDAgKSA/IE1hdGguY2VpbCggdGhpcy56ICkgOiBNYXRoLmZsb29yKCB0aGlzLnogKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0bmVnYXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gLSB0aGlzLng7XHJcblx0XHR0aGlzLnkgPSAtIHRoaXMueTtcclxuXHRcdHRoaXMueiA9IC0gdGhpcy56O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRkb3Q6IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55ICsgdGhpcy56ICogdi56O1xyXG5cclxuXHR9LFxyXG5cclxuXHQvLyBUT0RPIGxlbmd0aFNxdWFyZWQ/XHJcblxyXG5cdGxlbmd0aFNxOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMuejtcclxuXHJcblx0fSxcclxuXHJcblx0bGVuZ3RoOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0cmV0dXJuIE1hdGguc3FydCggdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1hbmhhdHRhbkxlbmd0aDogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHJldHVybiBNYXRoLmFicyggdGhpcy54ICkgKyBNYXRoLmFicyggdGhpcy55ICkgKyBNYXRoLmFicyggdGhpcy56ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdG5vcm1hbGl6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmRpdmlkZVNjYWxhciggdGhpcy5sZW5ndGgoKSB8fCAxICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldExlbmd0aDogZnVuY3Rpb24gKCBsZW5ndGggKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoIGxlbmd0aCApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRsZXJwOiBmdW5jdGlvbiAoIHYsIGFscGhhICkge1xyXG5cclxuXHRcdHRoaXMueCArPSAoIHYueCAtIHRoaXMueCApICogYWxwaGE7XHJcblx0XHR0aGlzLnkgKz0gKCB2LnkgLSB0aGlzLnkgKSAqIGFscGhhO1xyXG5cdFx0dGhpcy56ICs9ICggdi56IC0gdGhpcy56ICkgKiBhbHBoYTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0bGVycFZlY3RvcnM6IGZ1bmN0aW9uICggdjEsIHYyLCBhbHBoYSApIHtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKCB2MiwgdjEgKS5tdWx0aXBseVNjYWxhciggYWxwaGEgKS5hZGQoIHYxICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNyb3NzOiBmdW5jdGlvbiAoIHYsIHcgKSB7XHJcblxyXG5cdFx0aWYgKCB3ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLlZlY3RvcjM6IC5jcm9zcygpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmNyb3NzVmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyApO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5jcm9zc1ZlY3RvcnMoIHYsIHcgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuY3Jvc3NWZWN0b3JzKCB0aGlzLCB2ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNyb3NzVmVjdG9yczogZnVuY3Rpb24gKCBhLCBiICkge1xyXG5cclxuXHRcdHZhciBheCA9IGEueCwgYXkgPSBhLnksIGF6ID0gYS56O1xyXG5cdFx0dmFyIGJ4ID0gYi54LCBieSA9IGIueSwgYnogPSBiLno7XHJcblxyXG5cdFx0dGhpcy54ID0gYXkgKiBieiAtIGF6ICogYnk7XHJcblx0XHR0aGlzLnkgPSBheiAqIGJ4IC0gYXggKiBiejtcclxuXHRcdHRoaXMueiA9IGF4ICogYnkgLSBheSAqIGJ4O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRwcm9qZWN0T25WZWN0b3I6IGZ1bmN0aW9uICggdmVjdG9yICkge1xyXG5cclxuXHRcdHZhciBzY2FsYXIgPSB2ZWN0b3IuZG90KCB0aGlzICkgLyB2ZWN0b3IubGVuZ3RoU3EoKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5jb3B5KCB2ZWN0b3IgKS5tdWx0aXBseVNjYWxhciggc2NhbGFyICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHByb2plY3RPblBsYW5lOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dmFyIHYxID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gcHJvamVjdE9uUGxhbmUoIHBsYW5lTm9ybWFsICkge1xyXG5cclxuXHRcdFx0djEuY29weSggdGhpcyApLnByb2plY3RPblZlY3RvciggcGxhbmVOb3JtYWwgKTtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLnN1YiggdjEgKTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHR9KCksXHJcblxyXG5cdHJlZmxlY3Q6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHQvLyByZWZsZWN0IGluY2lkZW50IHZlY3RvciBvZmYgcGxhbmUgb3J0aG9nb25hbCB0byBub3JtYWxcclxuXHRcdC8vIG5vcm1hbCBpcyBhc3N1bWVkIHRvIGhhdmUgdW5pdCBsZW5ndGhcclxuXHJcblx0XHR2YXIgdjEgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiByZWZsZWN0KCBub3JtYWwgKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdWIoIHYxLmNvcHkoIG5vcm1hbCApLm11bHRpcGx5U2NhbGFyKCAyICogdGhpcy5kb3QoIG5vcm1hbCApICkgKTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHR9KCksXHJcblxyXG5cdGFuZ2xlVG86IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHR2YXIgdGhldGEgPSB0aGlzLmRvdCggdiApIC8gKCBNYXRoLnNxcnQoIHRoaXMubGVuZ3RoU3EoKSAqIHYubGVuZ3RoU3EoKSApICk7XHJcblxyXG5cdFx0Ly8gY2xhbXAsIHRvIGhhbmRsZSBudW1lcmljYWwgcHJvYmxlbXNcclxuXHJcblx0XHRyZXR1cm4gTWF0aC5hY29zKCBfTWF0aC5jbGFtcCggdGhldGEsIC0gMSwgMSApICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGRpc3RhbmNlVG86IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHRyZXR1cm4gTWF0aC5zcXJ0KCB0aGlzLmRpc3RhbmNlVG9TcXVhcmVkKCB2ICkgKTtcclxuXHJcblx0fSxcclxuXHJcblx0ZGlzdGFuY2VUb1NxdWFyZWQ6IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHR2YXIgZHggPSB0aGlzLnggLSB2LngsIGR5ID0gdGhpcy55IC0gdi55LCBkeiA9IHRoaXMueiAtIHYuejtcclxuXHJcblx0XHRyZXR1cm4gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6O1xyXG5cclxuXHR9LFxyXG5cclxuXHRtYW5oYXR0YW5EaXN0YW5jZVRvOiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0cmV0dXJuIE1hdGguYWJzKCB0aGlzLnggLSB2LnggKSArIE1hdGguYWJzKCB0aGlzLnkgLSB2LnkgKSArIE1hdGguYWJzKCB0aGlzLnogLSB2LnogKTtcclxuXHJcblx0fSxcclxuXHJcblx0c2V0RnJvbVNwaGVyaWNhbDogZnVuY3Rpb24gKCBzICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnNldEZyb21TcGhlcmljYWxDb29yZHMoIHMucmFkaXVzLCBzLnBoaSwgcy50aGV0YSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRGcm9tU3BoZXJpY2FsQ29vcmRzOiBmdW5jdGlvbiAoIHJhZGl1cywgcGhpLCB0aGV0YSApIHtcclxuXHJcblx0XHR2YXIgc2luUGhpUmFkaXVzID0gTWF0aC5zaW4oIHBoaSApICogcmFkaXVzO1xyXG5cclxuXHRcdHRoaXMueCA9IHNpblBoaVJhZGl1cyAqIE1hdGguc2luKCB0aGV0YSApO1xyXG5cdFx0dGhpcy55ID0gTWF0aC5jb3MoIHBoaSApICogcmFkaXVzO1xyXG5cdFx0dGhpcy56ID0gc2luUGhpUmFkaXVzICogTWF0aC5jb3MoIHRoZXRhICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldEZyb21DeWxpbmRyaWNhbDogZnVuY3Rpb24gKCBjICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnNldEZyb21DeWxpbmRyaWNhbENvb3JkcyggYy5yYWRpdXMsIGMudGhldGEsIGMueSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRGcm9tQ3lsaW5kcmljYWxDb29yZHM6IGZ1bmN0aW9uICggcmFkaXVzLCB0aGV0YSwgeSApIHtcclxuXHJcblx0XHR0aGlzLnggPSByYWRpdXMgKiBNYXRoLnNpbiggdGhldGEgKTtcclxuXHRcdHRoaXMueSA9IHk7XHJcblx0XHR0aGlzLnogPSByYWRpdXMgKiBNYXRoLmNvcyggdGhldGEgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0RnJvbU1hdHJpeFBvc2l0aW9uOiBmdW5jdGlvbiAoIG0gKSB7XHJcblxyXG5cdFx0dmFyIGUgPSBtLmVsZW1lbnRzO1xyXG5cclxuXHRcdHRoaXMueCA9IGVbIDEyIF07XHJcblx0XHR0aGlzLnkgPSBlWyAxMyBdO1xyXG5cdFx0dGhpcy56ID0gZVsgMTQgXTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0RnJvbU1hdHJpeFNjYWxlOiBmdW5jdGlvbiAoIG0gKSB7XHJcblxyXG5cdFx0dmFyIHN4ID0gdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKCBtLCAwICkubGVuZ3RoKCk7XHJcblx0XHR2YXIgc3kgPSB0aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oIG0sIDEgKS5sZW5ndGgoKTtcclxuXHRcdHZhciBzeiA9IHRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbiggbSwgMiApLmxlbmd0aCgpO1xyXG5cclxuXHRcdHRoaXMueCA9IHN4O1xyXG5cdFx0dGhpcy55ID0gc3k7XHJcblx0XHR0aGlzLnogPSBzejtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0RnJvbU1hdHJpeENvbHVtbjogZnVuY3Rpb24gKCBtLCBpbmRleCApIHtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5mcm9tQXJyYXkoIG0uZWxlbWVudHMsIGluZGV4ICogNCApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRlcXVhbHM6IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHRyZXR1cm4gKCAoIHYueCA9PT0gdGhpcy54ICkgJiYgKCB2LnkgPT09IHRoaXMueSApICYmICggdi56ID09PSB0aGlzLnogKSApO1xyXG5cclxuXHR9LFxyXG5cclxuICAgIHJvdGF0ZUJ5VmVjdG9yIDpmdW5jdGlvbih2ZWMxLCB2ZWMyLCBhbmdsZSkge1xyXG4gICAgICAgIHZhciB2MSA9IHZlYzEudG9BcnJheSgpO1xyXG4gICAgICAgIHZhciB2MiA9IHZlYzIudG9BcnJheSgpO1xyXG4gICAgICAgIGFuZ2xlID0gLSBhbmdsZTtcclxuICAgICAgICB2YXIgcG9zID0gW107XHJcbiAgICAgICAgcG9zWzBdID0gdjFbMF0gKiBNYXRoLmNvcyhhbmdsZSkgKyAodjJbMV0gKiB2MVsyXSAtIHYyWzJdICogdjFbMV0pICogTWF0aC5zaW4oYW5nbGUpICsgdjJbMF0gKiAodjJbMF0gKiB2MVswXSArIHYyWzFdICogdjFbMV0gKyB2MlsyXSAqIHYxWzJdKSAqICgxIC0gTWF0aC5jb3MoYW5nbGUpKTtcclxuICAgICAgICBwb3NbMV0gPSB2MVsxXSAqIE1hdGguY29zKGFuZ2xlKSArICh2MlsyXSAqIHYxWzBdIC0gdjJbMF0gKiB2MVsyXSkgKiBNYXRoLnNpbihhbmdsZSkgKyB2MlsxXSAqICh2MlswXSAqIHYxWzBdICsgdjJbMV0gKiB2MVsxXSArIHYyWzJdICogdjFbMl0pICogKDEgLSBNYXRoLmNvcyhhbmdsZSkpO1xyXG4gICAgICAgIHBvc1syXSA9IHYxWzJdICogTWF0aC5jb3MoYW5nbGUpICsgKHYyWzBdICogdjFbMV0gLSB2MlsxXSAqIHYxWzBdKSAqIE1hdGguc2luKGFuZ2xlKSArIHYyWzJdICogKHYyWzBdICogdjFbMF0gKyB2MlsxXSAqIHYxWzFdICsgdjJbMl0gKiB2MVsyXSkgKiAoMSAtIE1hdGguY29zKGFuZ2xlKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHBvcyk7XHJcbiAgICB9LFxyXG5cclxuXHRmcm9tQXJyYXk6IGZ1bmN0aW9uICggYXJyYXksIG9mZnNldCApIHtcclxuXHJcblx0XHRpZiAoIG9mZnNldCA9PT0gdW5kZWZpbmVkICkgb2Zmc2V0ID0gMDtcclxuXHJcblx0XHR0aGlzLnggPSBhcnJheVsgb2Zmc2V0IF07XHJcblx0XHR0aGlzLnkgPSBhcnJheVsgb2Zmc2V0ICsgMSBdO1xyXG5cdFx0dGhpcy56ID0gYXJyYXlbIG9mZnNldCArIDIgXTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0dG9BcnJheTogZnVuY3Rpb24gKCBhcnJheSwgb2Zmc2V0ICkge1xyXG5cclxuXHRcdGlmICggYXJyYXkgPT09IHVuZGVmaW5lZCApIGFycmF5ID0gW107XHJcblx0XHRpZiAoIG9mZnNldCA9PT0gdW5kZWZpbmVkICkgb2Zmc2V0ID0gMDtcclxuXHJcblx0XHRhcnJheVsgb2Zmc2V0IF0gPSB0aGlzLng7XHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgMSBdID0gdGhpcy55O1xyXG5cdFx0YXJyYXlbIG9mZnNldCArIDIgXSA9IHRoaXMuejtcclxuXHJcblx0XHRyZXR1cm4gYXJyYXk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGZyb21CdWZmZXJBdHRyaWJ1dGU6IGZ1bmN0aW9uICggYXR0cmlidXRlLCBpbmRleCwgb2Zmc2V0ICkge1xyXG5cclxuXHRcdGlmICggb2Zmc2V0ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLlZlY3RvcjM6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS4nICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMueCA9IGF0dHJpYnV0ZS5nZXRYKCBpbmRleCApO1xyXG5cdFx0dGhpcy55ID0gYXR0cmlidXRlLmdldFkoIGluZGV4ICk7XHJcblx0XHR0aGlzLnogPSBhdHRyaWJ1dGUuZ2V0WiggaW5kZXggKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fVxyXG5cclxufSApO1xyXG5cclxuXHJcbmV4cG9ydCB7IFZlY3RvcjMgfTtcclxuIiwiLyoqXHJcbiAqIEBhdXRob3Igc3VwZXJlZ2diZXJ0IC8gaHR0cDovL3d3dy5wYXVsYnJ1bnQuY28udWsvXHJcbiAqIEBhdXRob3IgcGhpbG9nYiAvIGh0dHA6Ly9ibG9nLnRoZWppdC5vcmcvXHJcbiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvXHJcbiAqIEBhdXRob3IgZWdyYWV0aGVyIC8gaHR0cDovL2VncmFldGhlci5jb20vXHJcbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIFZlY3RvcjQoIHgsIHksIHosIHcgKSB7XHJcblxyXG5cdHRoaXMueCA9IHggfHwgMDtcclxuXHR0aGlzLnkgPSB5IHx8IDA7XHJcblx0dGhpcy56ID0geiB8fCAwO1xyXG5cdHRoaXMudyA9ICggdyAhPT0gdW5kZWZpbmVkICkgPyB3IDogMTtcclxuXHJcblx0dGhpcy5lbGVtZW50cyA9IFt0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLnddO1xyXG59XHJcblxyXG5PYmplY3QuYXNzaWduKCBWZWN0b3I0LnByb3RvdHlwZSwge1xyXG5cclxuXHRpc1ZlY3RvcjQ6IHRydWUsXHJcblxyXG5cdHNldDogZnVuY3Rpb24gKCB4LCB5LCB6LCB3ICkge1xyXG5cclxuXHRcdHRoaXMueCA9IHg7XHJcblx0XHR0aGlzLnkgPSB5O1xyXG5cdFx0dGhpcy56ID0gejtcclxuXHRcdHRoaXMudyA9IHc7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldFNjYWxhcjogZnVuY3Rpb24gKCBzY2FsYXIgKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gc2NhbGFyO1xyXG5cdFx0dGhpcy55ID0gc2NhbGFyO1xyXG5cdFx0dGhpcy56ID0gc2NhbGFyO1xyXG5cdFx0dGhpcy53ID0gc2NhbGFyO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRYOiBmdW5jdGlvbiAoIHggKSB7XHJcblxyXG5cdFx0dGhpcy54ID0geDtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0WTogZnVuY3Rpb24gKCB5ICkge1xyXG5cclxuXHRcdHRoaXMueSA9IHk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldFo6IGZ1bmN0aW9uICggeiApIHtcclxuXHJcblx0XHR0aGlzLnogPSB6O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRXOiBmdW5jdGlvbiAoIHcgKSB7XHJcblxyXG5cdFx0dGhpcy53ID0gdztcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0Q29tcG9uZW50OiBmdW5jdGlvbiAoIGluZGV4LCB2YWx1ZSApIHtcclxuXHJcblx0XHRzd2l0Y2ggKCBpbmRleCApIHtcclxuXHJcblx0XHRcdGNhc2UgMDogdGhpcy54ID0gdmFsdWU7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDE6IHRoaXMueSA9IHZhbHVlOyBicmVhaztcclxuXHRcdFx0Y2FzZSAyOiB0aGlzLnogPSB2YWx1ZTsgYnJlYWs7XHJcblx0XHRcdGNhc2UgMzogdGhpcy53ID0gdmFsdWU7IGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoICdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcgKyBpbmRleCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0Z2V0Q29tcG9uZW50OiBmdW5jdGlvbiAoIGluZGV4ICkge1xyXG5cclxuXHRcdHN3aXRjaCAoIGluZGV4ICkge1xyXG5cclxuXHRcdFx0Y2FzZSAwOiByZXR1cm4gdGhpcy54O1xyXG5cdFx0XHRjYXNlIDE6IHJldHVybiB0aGlzLnk7XHJcblx0XHRcdGNhc2UgMjogcmV0dXJuIHRoaXMuejtcclxuXHRcdFx0Y2FzZSAzOiByZXR1cm4gdGhpcy53O1xyXG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoICdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcgKyBpbmRleCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0Y2xvbmU6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoIHRoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMudyApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRjb3B5OiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gdi54O1xyXG5cdFx0dGhpcy55ID0gdi55O1xyXG5cdFx0dGhpcy56ID0gdi56O1xyXG5cdFx0dGhpcy53ID0gKCB2LncgIT09IHVuZGVmaW5lZCApID8gdi53IDogMTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0YWRkOiBmdW5jdGlvbiAoIHYsIHcgKSB7XHJcblxyXG5cdFx0aWYgKCB3ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLlZlY3RvcjQ6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nICk7XHJcblx0XHRcdHJldHVybiB0aGlzLmFkZFZlY3RvcnMoIHYsIHcgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy54ICs9IHYueDtcclxuXHRcdHRoaXMueSArPSB2Lnk7XHJcblx0XHR0aGlzLnogKz0gdi56O1xyXG5cdFx0dGhpcy53ICs9IHYudztcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0YWRkU2NhbGFyOiBmdW5jdGlvbiAoIHMgKSB7XHJcblxyXG5cdFx0dGhpcy54ICs9IHM7XHJcblx0XHR0aGlzLnkgKz0gcztcclxuXHRcdHRoaXMueiArPSBzO1xyXG5cdFx0dGhpcy53ICs9IHM7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFkZFZlY3RvcnM6IGZ1bmN0aW9uICggYSwgYiApIHtcclxuXHJcblx0XHR0aGlzLnggPSBhLnggKyBiLng7XHJcblx0XHR0aGlzLnkgPSBhLnkgKyBiLnk7XHJcblx0XHR0aGlzLnogPSBhLnogKyBiLno7XHJcblx0XHR0aGlzLncgPSBhLncgKyBiLnc7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFkZFNjYWxlZFZlY3RvcjogZnVuY3Rpb24gKCB2LCBzICkge1xyXG5cclxuXHRcdHRoaXMueCArPSB2LnggKiBzO1xyXG5cdFx0dGhpcy55ICs9IHYueSAqIHM7XHJcblx0XHR0aGlzLnogKz0gdi56ICogcztcclxuXHRcdHRoaXMudyArPSB2LncgKiBzO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzdWI6IGZ1bmN0aW9uICggdiwgdyApIHtcclxuXHJcblx0XHRpZiAoIHcgIT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdGNvbnNvbGUud2FybiggJ0NPT0wuVmVjdG9yNDogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLicgKTtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3ViVmVjdG9ycyggdiwgdyApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnggLT0gdi54O1xyXG5cdFx0dGhpcy55IC09IHYueTtcclxuXHRcdHRoaXMueiAtPSB2Lno7XHJcblx0XHR0aGlzLncgLT0gdi53O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzdWJTY2FsYXI6IGZ1bmN0aW9uICggcyApIHtcclxuXHJcblx0XHR0aGlzLnggLT0gcztcclxuXHRcdHRoaXMueSAtPSBzO1xyXG5cdFx0dGhpcy56IC09IHM7XHJcblx0XHR0aGlzLncgLT0gcztcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c3ViVmVjdG9yczogZnVuY3Rpb24gKCBhLCBiICkge1xyXG5cclxuXHRcdHRoaXMueCA9IGEueCAtIGIueDtcclxuXHRcdHRoaXMueSA9IGEueSAtIGIueTtcclxuXHRcdHRoaXMueiA9IGEueiAtIGIuejtcclxuXHRcdHRoaXMudyA9IGEudyAtIGIudztcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0bXVsdGlwbHlTY2FsYXI6IGZ1bmN0aW9uICggc2NhbGFyICkge1xyXG5cclxuXHRcdHRoaXMueCAqPSBzY2FsYXI7XHJcblx0XHR0aGlzLnkgKj0gc2NhbGFyO1xyXG5cdFx0dGhpcy56ICo9IHNjYWxhcjtcclxuXHRcdHRoaXMudyAqPSBzY2FsYXI7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFwcGx5TWF0cml4NDogZnVuY3Rpb24gKCBtICkge1xyXG5cclxuXHRcdHZhciB4ID0gdGhpcy54LCB5ID0gdGhpcy55LCB6ID0gdGhpcy56LCB3ID0gdGhpcy53O1xyXG5cdFx0dmFyIGUgPSBtLmVsZW1lbnRzO1xyXG5cclxuXHRcdHRoaXMueCA9IGVbIDAgXSAqIHggKyBlWyA0IF0gKiB5ICsgZVsgOCBdICogeiArIGVbIDEyIF0gKiB3O1xyXG5cdFx0dGhpcy55ID0gZVsgMSBdICogeCArIGVbIDUgXSAqIHkgKyBlWyA5IF0gKiB6ICsgZVsgMTMgXSAqIHc7XHJcblx0XHR0aGlzLnogPSBlWyAyIF0gKiB4ICsgZVsgNiBdICogeSArIGVbIDEwIF0gKiB6ICsgZVsgMTQgXSAqIHc7XHJcblx0XHR0aGlzLncgPSBlWyAzIF0gKiB4ICsgZVsgNyBdICogeSArIGVbIDExIF0gKiB6ICsgZVsgMTUgXSAqIHc7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGRpdmlkZVNjYWxhcjogZnVuY3Rpb24gKCBzY2FsYXIgKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoIDEgLyBzY2FsYXIgKTtcclxuXHJcblx0fSxcclxuXHJcblx0c2V0QXhpc0FuZ2xlRnJvbVF1YXRlcm5pb246IGZ1bmN0aW9uICggcSApIHtcclxuXHJcblx0XHQvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvcXVhdGVybmlvblRvQW5nbGUvaW5kZXguaHRtXHJcblxyXG5cdFx0Ly8gcSBpcyBhc3N1bWVkIHRvIGJlIG5vcm1hbGl6ZWRcclxuXHJcblx0XHR0aGlzLncgPSAyICogTWF0aC5hY29zKCBxLncgKTtcclxuXHJcblx0XHR2YXIgcyA9IE1hdGguc3FydCggMSAtIHEudyAqIHEudyApO1xyXG5cclxuXHRcdGlmICggcyA8IDAuMDAwMSApIHtcclxuXHJcblx0XHRcdHRoaXMueCA9IDE7XHJcblx0XHRcdHRoaXMueSA9IDA7XHJcblx0XHRcdHRoaXMueiA9IDA7XHJcblxyXG5cdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdHRoaXMueCA9IHEueCAvIHM7XHJcblx0XHRcdHRoaXMueSA9IHEueSAvIHM7XHJcblx0XHRcdHRoaXMueiA9IHEueiAvIHM7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRBeGlzQW5nbGVGcm9tUm90YXRpb25NYXRyaXg6IGZ1bmN0aW9uICggbSApIHtcclxuXHJcblx0XHQvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvbWF0cml4VG9BbmdsZS9pbmRleC5odG1cclxuXHJcblx0XHQvLyBhc3N1bWVzIHRoZSB1cHBlciAzeDMgb2YgbSBpcyBhIHB1cmUgcm90YXRpb24gbWF0cml4IChpLmUsIHVuc2NhbGVkKVxyXG5cclxuXHRcdHZhciBhbmdsZSwgeCwgeSwgeixcdFx0Ly8gdmFyaWFibGVzIGZvciByZXN1bHRcclxuXHRcdFx0ZXBzaWxvbiA9IDAuMDEsXHRcdC8vIG1hcmdpbiB0byBhbGxvdyBmb3Igcm91bmRpbmcgZXJyb3JzXHJcblx0XHRcdGVwc2lsb24yID0gMC4xLFx0XHQvLyBtYXJnaW4gdG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiAwIGFuZCAxODAgZGVncmVlc1xyXG5cclxuXHRcdFx0dGUgPSBtLmVsZW1lbnRzLFxyXG5cclxuXHRcdFx0bTExID0gdGVbIDAgXSwgbTEyID0gdGVbIDQgXSwgbTEzID0gdGVbIDggXSxcclxuXHRcdFx0bTIxID0gdGVbIDEgXSwgbTIyID0gdGVbIDUgXSwgbTIzID0gdGVbIDkgXSxcclxuXHRcdFx0bTMxID0gdGVbIDIgXSwgbTMyID0gdGVbIDYgXSwgbTMzID0gdGVbIDEwIF07XHJcblxyXG5cdFx0aWYgKCAoIE1hdGguYWJzKCBtMTIgLSBtMjEgKSA8IGVwc2lsb24gKSAmJlxyXG5cdFx0ICAgICAoIE1hdGguYWJzKCBtMTMgLSBtMzEgKSA8IGVwc2lsb24gKSAmJlxyXG5cdFx0ICAgICAoIE1hdGguYWJzKCBtMjMgLSBtMzIgKSA8IGVwc2lsb24gKSApIHtcclxuXHJcblx0XHRcdC8vIHNpbmd1bGFyaXR5IGZvdW5kXHJcblx0XHRcdC8vIGZpcnN0IGNoZWNrIGZvciBpZGVudGl0eSBtYXRyaXggd2hpY2ggbXVzdCBoYXZlICsxIGZvciBhbGwgdGVybXNcclxuXHRcdFx0Ly8gaW4gbGVhZGluZyBkaWFnb25hbCBhbmQgemVybyBpbiBvdGhlciB0ZXJtc1xyXG5cclxuXHRcdFx0aWYgKCAoIE1hdGguYWJzKCBtMTIgKyBtMjEgKSA8IGVwc2lsb24yICkgJiZcclxuXHRcdFx0ICAgICAoIE1hdGguYWJzKCBtMTMgKyBtMzEgKSA8IGVwc2lsb24yICkgJiZcclxuXHRcdFx0ICAgICAoIE1hdGguYWJzKCBtMjMgKyBtMzIgKSA8IGVwc2lsb24yICkgJiZcclxuXHRcdFx0ICAgICAoIE1hdGguYWJzKCBtMTEgKyBtMjIgKyBtMzMgLSAzICkgPCBlcHNpbG9uMiApICkge1xyXG5cclxuXHRcdFx0XHQvLyB0aGlzIHNpbmd1bGFyaXR5IGlzIGlkZW50aXR5IG1hdHJpeCBzbyBhbmdsZSA9IDBcclxuXHJcblx0XHRcdFx0dGhpcy5zZXQoIDEsIDAsIDAsIDAgKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHRoaXM7IC8vIHplcm8gYW5nbGUsIGFyYml0cmFyeSBheGlzXHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBvdGhlcndpc2UgdGhpcyBzaW5ndWxhcml0eSBpcyBhbmdsZSA9IDE4MFxyXG5cclxuXHRcdFx0YW5nbGUgPSBNYXRoLlBJO1xyXG5cclxuXHRcdFx0dmFyIHh4ID0gKCBtMTEgKyAxICkgLyAyO1xyXG5cdFx0XHR2YXIgeXkgPSAoIG0yMiArIDEgKSAvIDI7XHJcblx0XHRcdHZhciB6eiA9ICggbTMzICsgMSApIC8gMjtcclxuXHRcdFx0dmFyIHh5ID0gKCBtMTIgKyBtMjEgKSAvIDQ7XHJcblx0XHRcdHZhciB4eiA9ICggbTEzICsgbTMxICkgLyA0O1xyXG5cdFx0XHR2YXIgeXogPSAoIG0yMyArIG0zMiApIC8gNDtcclxuXHJcblx0XHRcdGlmICggKCB4eCA+IHl5ICkgJiYgKCB4eCA+IHp6ICkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIG0xMSBpcyB0aGUgbGFyZ2VzdCBkaWFnb25hbCB0ZXJtXHJcblxyXG5cdFx0XHRcdGlmICggeHggPCBlcHNpbG9uICkge1xyXG5cclxuXHRcdFx0XHRcdHggPSAwO1xyXG5cdFx0XHRcdFx0eSA9IDAuNzA3MTA2NzgxO1xyXG5cdFx0XHRcdFx0eiA9IDAuNzA3MTA2NzgxO1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdHggPSBNYXRoLnNxcnQoIHh4ICk7XHJcblx0XHRcdFx0XHR5ID0geHkgLyB4O1xyXG5cdFx0XHRcdFx0eiA9IHh6IC8geDtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fSBlbHNlIGlmICggeXkgPiB6eiApIHtcclxuXHJcblx0XHRcdFx0Ly8gbTIyIGlzIHRoZSBsYXJnZXN0IGRpYWdvbmFsIHRlcm1cclxuXHJcblx0XHRcdFx0aWYgKCB5eSA8IGVwc2lsb24gKSB7XHJcblxyXG5cdFx0XHRcdFx0eCA9IDAuNzA3MTA2NzgxO1xyXG5cdFx0XHRcdFx0eSA9IDA7XHJcblx0XHRcdFx0XHR6ID0gMC43MDcxMDY3ODE7XHJcblxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0eSA9IE1hdGguc3FydCggeXkgKTtcclxuXHRcdFx0XHRcdHggPSB4eSAvIHk7XHJcblx0XHRcdFx0XHR6ID0geXogLyB5O1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvLyBtMzMgaXMgdGhlIGxhcmdlc3QgZGlhZ29uYWwgdGVybSBzbyBiYXNlIHJlc3VsdCBvbiB0aGlzXHJcblxyXG5cdFx0XHRcdGlmICggenogPCBlcHNpbG9uICkge1xyXG5cclxuXHRcdFx0XHRcdHggPSAwLjcwNzEwNjc4MTtcclxuXHRcdFx0XHRcdHkgPSAwLjcwNzEwNjc4MTtcclxuXHRcdFx0XHRcdHogPSAwO1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdHogPSBNYXRoLnNxcnQoIHp6ICk7XHJcblx0XHRcdFx0XHR4ID0geHogLyB6O1xyXG5cdFx0XHRcdFx0eSA9IHl6IC8gejtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5zZXQoIHgsIHksIHosIGFuZ2xlICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpczsgLy8gcmV0dXJuIDE4MCBkZWcgcm90YXRpb25cclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gYXMgd2UgaGF2ZSByZWFjaGVkIGhlcmUgdGhlcmUgYXJlIG5vIHNpbmd1bGFyaXRpZXMgc28gd2UgY2FuIGhhbmRsZSBub3JtYWxseVxyXG5cclxuXHRcdHZhciBzID0gTWF0aC5zcXJ0KCAoIG0zMiAtIG0yMyApICogKCBtMzIgLSBtMjMgKSArXHJcblx0XHQgICAgICAgICAgICAgICAgICAgKCBtMTMgLSBtMzEgKSAqICggbTEzIC0gbTMxICkgK1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICggbTIxIC0gbTEyICkgKiAoIG0yMSAtIG0xMiApICk7IC8vIHVzZWQgdG8gbm9ybWFsaXplXHJcblxyXG5cdFx0aWYgKCBNYXRoLmFicyggcyApIDwgMC4wMDEgKSBzID0gMTtcclxuXHJcblx0XHQvLyBwcmV2ZW50IGRpdmlkZSBieSB6ZXJvLCBzaG91bGQgbm90IGhhcHBlbiBpZiBtYXRyaXggaXMgb3J0aG9nb25hbCBhbmQgc2hvdWxkIGJlXHJcblx0XHQvLyBjYXVnaHQgYnkgc2luZ3VsYXJpdHkgdGVzdCBhYm92ZSwgYnV0IEkndmUgbGVmdCBpdCBpbiBqdXN0IGluIGNhc2VcclxuXHJcblx0XHR0aGlzLnggPSAoIG0zMiAtIG0yMyApIC8gcztcclxuXHRcdHRoaXMueSA9ICggbTEzIC0gbTMxICkgLyBzO1xyXG5cdFx0dGhpcy56ID0gKCBtMjEgLSBtMTIgKSAvIHM7XHJcblx0XHR0aGlzLncgPSBNYXRoLmFjb3MoICggbTExICsgbTIyICsgbTMzIC0gMSApIC8gMiApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtaW46IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHR0aGlzLnggPSBNYXRoLm1pbiggdGhpcy54LCB2LnggKTtcclxuXHRcdHRoaXMueSA9IE1hdGgubWluKCB0aGlzLnksIHYueSApO1xyXG5cdFx0dGhpcy56ID0gTWF0aC5taW4oIHRoaXMueiwgdi56ICk7XHJcblx0XHR0aGlzLncgPSBNYXRoLm1pbiggdGhpcy53LCB2LncgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0bWF4OiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5tYXgoIHRoaXMueCwgdi54ICk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLm1heCggdGhpcy55LCB2LnkgKTtcclxuXHRcdHRoaXMueiA9IE1hdGgubWF4KCB0aGlzLnosIHYueiApO1xyXG5cdFx0dGhpcy53ID0gTWF0aC5tYXgoIHRoaXMudywgdi53ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNsYW1wOiBmdW5jdGlvbiAoIG1pbiwgbWF4ICkge1xyXG5cclxuXHRcdC8vIGFzc3VtZXMgbWluIDwgbWF4LCBjb21wb25lbnR3aXNlXHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5tYXgoIG1pbi54LCBNYXRoLm1pbiggbWF4LngsIHRoaXMueCApICk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLm1heCggbWluLnksIE1hdGgubWluKCBtYXgueSwgdGhpcy55ICkgKTtcclxuXHRcdHRoaXMueiA9IE1hdGgubWF4KCBtaW4ueiwgTWF0aC5taW4oIG1heC56LCB0aGlzLnogKSApO1xyXG5cdFx0dGhpcy53ID0gTWF0aC5tYXgoIG1pbi53LCBNYXRoLm1pbiggbWF4LncsIHRoaXMudyApICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNsYW1wU2NhbGFyOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dmFyIG1pbiwgbWF4O1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiBjbGFtcFNjYWxhciggbWluVmFsLCBtYXhWYWwgKSB7XHJcblxyXG5cdFx0XHRpZiAoIG1pbiA9PT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0XHRtaW4gPSBuZXcgVmVjdG9yNCgpO1xyXG5cdFx0XHRcdG1heCA9IG5ldyBWZWN0b3I0KCk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRtaW4uc2V0KCBtaW5WYWwsIG1pblZhbCwgbWluVmFsLCBtaW5WYWwgKTtcclxuXHRcdFx0bWF4LnNldCggbWF4VmFsLCBtYXhWYWwsIG1heFZhbCwgbWF4VmFsICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5jbGFtcCggbWluLCBtYXggKTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHR9KCksXHJcblxyXG5cdGNsYW1wTGVuZ3RoOiBmdW5jdGlvbiAoIG1pbiwgbWF4ICkge1xyXG5cclxuXHRcdHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmRpdmlkZVNjYWxhciggbGVuZ3RoIHx8IDEgKS5tdWx0aXBseVNjYWxhciggTWF0aC5tYXgoIG1pbiwgTWF0aC5taW4oIG1heCwgbGVuZ3RoICkgKSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRmbG9vcjogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHRoaXMueCA9IE1hdGguZmxvb3IoIHRoaXMueCApO1xyXG5cdFx0dGhpcy55ID0gTWF0aC5mbG9vciggdGhpcy55ICk7XHJcblx0XHR0aGlzLnogPSBNYXRoLmZsb29yKCB0aGlzLnogKTtcclxuXHRcdHRoaXMudyA9IE1hdGguZmxvb3IoIHRoaXMudyApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRjZWlsOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5jZWlsKCB0aGlzLnggKTtcclxuXHRcdHRoaXMueSA9IE1hdGguY2VpbCggdGhpcy55ICk7XHJcblx0XHR0aGlzLnogPSBNYXRoLmNlaWwoIHRoaXMueiApO1xyXG5cdFx0dGhpcy53ID0gTWF0aC5jZWlsKCB0aGlzLncgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0cm91bmQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR0aGlzLnggPSBNYXRoLnJvdW5kKCB0aGlzLnggKTtcclxuXHRcdHRoaXMueSA9IE1hdGgucm91bmQoIHRoaXMueSApO1xyXG5cdFx0dGhpcy56ID0gTWF0aC5yb3VuZCggdGhpcy56ICk7XHJcblx0XHR0aGlzLncgPSBNYXRoLnJvdW5kKCB0aGlzLncgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0cm91bmRUb1plcm86IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR0aGlzLnggPSAoIHRoaXMueCA8IDAgKSA/IE1hdGguY2VpbCggdGhpcy54ICkgOiBNYXRoLmZsb29yKCB0aGlzLnggKTtcclxuXHRcdHRoaXMueSA9ICggdGhpcy55IDwgMCApID8gTWF0aC5jZWlsKCB0aGlzLnkgKSA6IE1hdGguZmxvb3IoIHRoaXMueSApO1xyXG5cdFx0dGhpcy56ID0gKCB0aGlzLnogPCAwICkgPyBNYXRoLmNlaWwoIHRoaXMueiApIDogTWF0aC5mbG9vciggdGhpcy56ICk7XHJcblx0XHR0aGlzLncgPSAoIHRoaXMudyA8IDAgKSA/IE1hdGguY2VpbCggdGhpcy53ICkgOiBNYXRoLmZsb29yKCB0aGlzLncgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0bmVnYXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gLSB0aGlzLng7XHJcblx0XHR0aGlzLnkgPSAtIHRoaXMueTtcclxuXHRcdHRoaXMueiA9IC0gdGhpcy56O1xyXG5cdFx0dGhpcy53ID0gLSB0aGlzLnc7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGRvdDogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnggKiB2LnggKyB0aGlzLnkgKiB2LnkgKyB0aGlzLnogKiB2LnogKyB0aGlzLncgKiB2Lnc7XHJcblxyXG5cdH0sXHJcblxyXG5cdGxlbmd0aFNxOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudztcclxuXHJcblx0fSxcclxuXHJcblx0bGVuZ3RoOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0cmV0dXJuIE1hdGguc3FydCggdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1hbmhhdHRhbkxlbmd0aDogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHJldHVybiBNYXRoLmFicyggdGhpcy54ICkgKyBNYXRoLmFicyggdGhpcy55ICkgKyBNYXRoLmFicyggdGhpcy56ICkgKyBNYXRoLmFicyggdGhpcy53ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdG5vcm1hbGl6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmRpdmlkZVNjYWxhciggdGhpcy5sZW5ndGgoKSB8fCAxICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldExlbmd0aDogZnVuY3Rpb24gKCBsZW5ndGggKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoIGxlbmd0aCApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRsZXJwOiBmdW5jdGlvbiAoIHYsIGFscGhhICkge1xyXG5cclxuXHRcdHRoaXMueCArPSAoIHYueCAtIHRoaXMueCApICogYWxwaGE7XHJcblx0XHR0aGlzLnkgKz0gKCB2LnkgLSB0aGlzLnkgKSAqIGFscGhhO1xyXG5cdFx0dGhpcy56ICs9ICggdi56IC0gdGhpcy56ICkgKiBhbHBoYTtcclxuXHRcdHRoaXMudyArPSAoIHYudyAtIHRoaXMudyApICogYWxwaGE7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGxlcnBWZWN0b3JzOiBmdW5jdGlvbiAoIHYxLCB2MiwgYWxwaGEgKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuc3ViVmVjdG9ycyggdjIsIHYxICkubXVsdGlwbHlTY2FsYXIoIGFscGhhICkuYWRkKCB2MSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRlcXVhbHM6IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHRyZXR1cm4gKCAoIHYueCA9PT0gdGhpcy54ICkgJiYgKCB2LnkgPT09IHRoaXMueSApICYmICggdi56ID09PSB0aGlzLnogKSAmJiAoIHYudyA9PT0gdGhpcy53ICkgKTtcclxuXHJcblx0fSxcclxuXHJcblx0ZnJvbUFycmF5OiBmdW5jdGlvbiAoIGFycmF5LCBvZmZzZXQgKSB7XHJcblxyXG5cdFx0aWYgKCBvZmZzZXQgPT09IHVuZGVmaW5lZCApIG9mZnNldCA9IDA7XHJcblxyXG5cdFx0dGhpcy54ID0gYXJyYXlbIG9mZnNldCBdO1xyXG5cdFx0dGhpcy55ID0gYXJyYXlbIG9mZnNldCArIDEgXTtcclxuXHRcdHRoaXMueiA9IGFycmF5WyBvZmZzZXQgKyAyIF07XHJcblx0XHR0aGlzLncgPSBhcnJheVsgb2Zmc2V0ICsgMyBdO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHR0b0FycmF5OiBmdW5jdGlvbiAoIGFycmF5LCBvZmZzZXQgKSB7XHJcblxyXG5cdFx0aWYgKCBhcnJheSA9PT0gdW5kZWZpbmVkICkgYXJyYXkgPSBbXTtcclxuXHRcdGlmICggb2Zmc2V0ID09PSB1bmRlZmluZWQgKSBvZmZzZXQgPSAwO1xyXG5cclxuXHRcdGFycmF5WyBvZmZzZXQgXSA9IHRoaXMueDtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyAxIF0gPSB0aGlzLnk7XHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgMiBdID0gdGhpcy56O1xyXG5cdFx0YXJyYXlbIG9mZnNldCArIDMgXSA9IHRoaXMudztcclxuXHJcblx0XHRyZXR1cm4gYXJyYXk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGZyb21CdWZmZXJBdHRyaWJ1dGU6IGZ1bmN0aW9uICggYXR0cmlidXRlLCBpbmRleCwgb2Zmc2V0ICkge1xyXG5cclxuXHRcdGlmICggb2Zmc2V0ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLlZlY3RvcjQ6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS4nICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMueCA9IGF0dHJpYnV0ZS5nZXRYKCBpbmRleCApO1xyXG5cdFx0dGhpcy55ID0gYXR0cmlidXRlLmdldFkoIGluZGV4ICk7XHJcblx0XHR0aGlzLnogPSBhdHRyaWJ1dGUuZ2V0WiggaW5kZXggKTtcclxuXHRcdHRoaXMudyA9IGF0dHJpYnV0ZS5nZXRXKCBpbmRleCApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9XHJcblxyXG59ICk7XHJcblxyXG5cclxuZXhwb3J0IHsgVmVjdG9yNCB9O1xyXG4iLCJpbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAnLi9WZWN0b3IzLmpzJztcclxuaW1wb3J0IHsgVmVjdG9yNCB9IGZyb20gJy4vVmVjdG9yNC5qcyc7XHJcblxyXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay9cclxuICogQGF1dGhvciBwaGlsb2diIC8gaHR0cDovL2Jsb2cudGhlaml0Lm9yZy9cclxuICogQGF1dGhvciBqb3JkaV9yb3MgLyBodHRwOi8vcGxhdHRzb2Z0LmNvbVxyXG4gKiBAYXV0aG9yIEQxcGxvMWQgLyBodHRwOi8vZ2l0aHViLmNvbS9EMXBsbzFkXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvXHJcbiAqIEBhdXRob3IgdGlta25pcCAvIGh0dHA6Ly93d3cuZmxvb3JwbGFubmVyLmNvbS9cclxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICovXHJcblxyXG5mdW5jdGlvbiBNYXRyaXg0KCkge1xyXG5cclxuXHR0aGlzLmVsZW1lbnRzID0gW1xyXG5cclxuXHRcdDEsIDAsIDAsIDAsXHJcblx0XHQwLCAxLCAwLCAwLFxyXG5cdFx0MCwgMCwgMSwgMCxcclxuXHRcdDAsIDAsIDAsIDFcclxuXHJcblx0XTtcclxuXHJcblx0aWYgKCBhcmd1bWVudHMubGVuZ3RoID4gMCApIHtcclxuXHJcblx0XHRjb25zb2xlLmVycm9yKCAnQ09PTC5NYXRyaXg0OiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLicgKTtcclxuXHJcblx0fVxyXG5cclxufVxyXG5cclxuT2JqZWN0LmFzc2lnbiggTWF0cml4NC5wcm90b3R5cGUsIHtcclxuXHJcblx0aXNNYXRyaXg0OiB0cnVlLFxyXG5cclxuXHRzZXQ6IGZ1bmN0aW9uICggbjExLCBuMTIsIG4xMywgbjE0LCBuMjEsIG4yMiwgbjIzLCBuMjQsIG4zMSwgbjMyLCBuMzMsIG4zNCwgbjQxLCBuNDIsIG40MywgbjQ0ICkge1xyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG5cdFx0dGVbIDAgXSA9IG4xMTsgdGVbIDQgXSA9IG4xMjsgdGVbIDggXSA9IG4xMzsgdGVbIDEyIF0gPSBuMTQ7XHJcblx0XHR0ZVsgMSBdID0gbjIxOyB0ZVsgNSBdID0gbjIyOyB0ZVsgOSBdID0gbjIzOyB0ZVsgMTMgXSA9IG4yNDtcclxuXHRcdHRlWyAyIF0gPSBuMzE7IHRlWyA2IF0gPSBuMzI7IHRlWyAxMCBdID0gbjMzOyB0ZVsgMTQgXSA9IG4zNDtcclxuXHRcdHRlWyAzIF0gPSBuNDE7IHRlWyA3IF0gPSBuNDI7IHRlWyAxMSBdID0gbjQzOyB0ZVsgMTUgXSA9IG40NDtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcbiAgICBzZXRJZGVudGl0eSA6ZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLmVsZW1lbnRzO1xyXG4gICAgICAgIGVbMF0gPSAxOyAgIGVbNF0gPSAwOyAgIGVbOF0gID0gMDsgICBlWzEyXSA9IDA7XHJcbiAgICAgICAgZVsxXSA9IDA7ICAgZVs1XSA9IDE7ICAgZVs5XSAgPSAwOyAgIGVbMTNdID0gMDtcclxuICAgICAgICBlWzJdID0gMDsgICBlWzZdID0gMDsgICBlWzEwXSA9IDE7ICAgZVsxNF0gPSAwO1xyXG4gICAgICAgIGVbM10gPSAwOyAgIGVbN10gPSAwOyAgIGVbMTFdID0gMDsgICBlWzE1XSA9IDE7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG5cclxuICAgIG11bHRpcGx5VmVjdG9yMyA6ZnVuY3Rpb24ocG9zKSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLmVsZW1lbnRzO1xyXG4gICAgICAgIHZhciBwID0gcG9zLmVsZW1lbnRzO1xyXG4gICAgICAgIHZhciB2ID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gdi5lbGVtZW50cztcclxuXHJcbiAgICAgICAgcmVzdWx0WzBdID0gcFswXSAqIGVbMF0gKyBwWzFdICogZVs0XSArIHBbMl0gKiBlWyA4XSArIGVbMTFdO1xyXG4gICAgICAgIHJlc3VsdFsxXSA9IHBbMF0gKiBlWzFdICsgcFsxXSAqIGVbNV0gKyBwWzJdICogZVsgOV0gKyBlWzEyXTtcclxuICAgICAgICByZXN1bHRbMl0gPSBwWzBdICogZVsyXSArIHBbMV0gKiBlWzZdICsgcFsyXSAqIGVbMTBdICsgZVsxM107XHJcblxyXG4gICAgICAgIHJldHVybiB2O1xyXG4gICAgfSxcclxuXHJcbiAgICBtdWx0aXBseVZlY3RvcjQgOmZ1bmN0aW9uKHBvcykge1xyXG4gICAgICAgIHZhciBlID0gdGhpcy5lbGVtZW50cztcclxuICAgICAgICB2YXIgcCA9IHBvcy5lbGVtZW50cztcclxuICAgICAgICB2YXIgdiA9IG5ldyBWZWN0b3I0KCk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHYuZWxlbWVudHM7XHJcblxyXG4gICAgICAgIHJlc3VsdFswXSA9IHBbMF0gKiBlWzBdICsgcFsxXSAqIGVbNF0gKyBwWzJdICogZVsgOF0gKyBwWzNdICogZVsxMl07XHJcbiAgICAgICAgcmVzdWx0WzFdID0gcFswXSAqIGVbMV0gKyBwWzFdICogZVs1XSArIHBbMl0gKiBlWyA5XSArIHBbM10gKiBlWzEzXTtcclxuICAgICAgICByZXN1bHRbMl0gPSBwWzBdICogZVsyXSArIHBbMV0gKiBlWzZdICsgcFsyXSAqIGVbMTBdICsgcFszXSAqIGVbMTRdO1xyXG4gICAgICAgIHJlc3VsdFszXSA9IHBbMF0gKiBlWzNdICsgcFsxXSAqIGVbN10gKyBwWzJdICogZVsxMV0gKyBwWzNdICogZVsxNV07XHJcblxyXG4gICAgICAgIHYgPSBuZXcgVmVjdG9yNChyZXN1bHRbMF0scmVzdWx0WzFdLHJlc3VsdFsyXSxyZXN1bHRbM10pO1xyXG4gICAgICAgIHJldHVybiB2O1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRJbnZlcnNlT2YgOmZ1bmN0aW9uKG90aGVyKSB7XHJcbiAgICAgICAgdmFyIGksIHMsIGQsIGludiwgZGV0O1xyXG5cclxuICAgICAgICBzID0gb3RoZXIuZWxlbWVudHM7XHJcbiAgICAgICAgZCA9IHRoaXMuZWxlbWVudHM7XHJcbiAgICAgICAgaW52ID0gbmV3IEZsb2F0MzJBcnJheSgxNik7XHJcblxyXG4gICAgICAgIGludlswXSAgPSAgIHNbNV0qc1sxMF0qc1sxNV0gLSBzWzVdICpzWzExXSpzWzE0XSAtIHNbOV0gKnNbNl0qc1sxNV1cclxuICAgICAgICAgICAgKyBzWzldKnNbN10gKnNbMTRdICsgc1sxM10qc1s2XSAqc1sxMV0gLSBzWzEzXSpzWzddKnNbMTBdO1xyXG4gICAgICAgIGludls0XSAgPSAtIHNbNF0qc1sxMF0qc1sxNV0gKyBzWzRdICpzWzExXSpzWzE0XSArIHNbOF0gKnNbNl0qc1sxNV1cclxuICAgICAgICAgICAgLSBzWzhdKnNbN10gKnNbMTRdIC0gc1sxMl0qc1s2XSAqc1sxMV0gKyBzWzEyXSpzWzddKnNbMTBdO1xyXG4gICAgICAgIGludls4XSAgPSAgIHNbNF0qc1s5XSAqc1sxNV0gLSBzWzRdICpzWzExXSpzWzEzXSAtIHNbOF0gKnNbNV0qc1sxNV1cclxuICAgICAgICAgICAgKyBzWzhdKnNbN10gKnNbMTNdICsgc1sxMl0qc1s1XSAqc1sxMV0gLSBzWzEyXSpzWzddKnNbOV07XHJcbiAgICAgICAgaW52WzEyXSA9IC0gc1s0XSpzWzldICpzWzE0XSArIHNbNF0gKnNbMTBdKnNbMTNdICsgc1s4XSAqc1s1XSpzWzE0XVxyXG4gICAgICAgICAgICAtIHNbOF0qc1s2XSAqc1sxM10gLSBzWzEyXSpzWzVdICpzWzEwXSArIHNbMTJdKnNbNl0qc1s5XTtcclxuXHJcbiAgICAgICAgaW52WzFdICA9IC0gc1sxXSpzWzEwXSpzWzE1XSArIHNbMV0gKnNbMTFdKnNbMTRdICsgc1s5XSAqc1syXSpzWzE1XVxyXG4gICAgICAgICAgICAtIHNbOV0qc1szXSAqc1sxNF0gLSBzWzEzXSpzWzJdICpzWzExXSArIHNbMTNdKnNbM10qc1sxMF07XHJcbiAgICAgICAgaW52WzVdICA9ICAgc1swXSpzWzEwXSpzWzE1XSAtIHNbMF0gKnNbMTFdKnNbMTRdIC0gc1s4XSAqc1syXSpzWzE1XVxyXG4gICAgICAgICAgICArIHNbOF0qc1szXSAqc1sxNF0gKyBzWzEyXSpzWzJdICpzWzExXSAtIHNbMTJdKnNbM10qc1sxMF07XHJcbiAgICAgICAgaW52WzldICA9IC0gc1swXSpzWzldICpzWzE1XSArIHNbMF0gKnNbMTFdKnNbMTNdICsgc1s4XSAqc1sxXSpzWzE1XVxyXG4gICAgICAgICAgICAtIHNbOF0qc1szXSAqc1sxM10gLSBzWzEyXSpzWzFdICpzWzExXSArIHNbMTJdKnNbM10qc1s5XTtcclxuICAgICAgICBpbnZbMTNdID0gICBzWzBdKnNbOV0gKnNbMTRdIC0gc1swXSAqc1sxMF0qc1sxM10gLSBzWzhdICpzWzFdKnNbMTRdXHJcbiAgICAgICAgICAgICsgc1s4XSpzWzJdICpzWzEzXSArIHNbMTJdKnNbMV0gKnNbMTBdIC0gc1sxMl0qc1syXSpzWzldO1xyXG5cclxuICAgICAgICBpbnZbMl0gID0gICBzWzFdKnNbNl0qc1sxNV0gLSBzWzFdICpzWzddKnNbMTRdIC0gc1s1XSAqc1syXSpzWzE1XVxyXG4gICAgICAgICAgICArIHNbNV0qc1szXSpzWzE0XSArIHNbMTNdKnNbMl0qc1s3XSAgLSBzWzEzXSpzWzNdKnNbNl07XHJcbiAgICAgICAgaW52WzZdICA9IC0gc1swXSpzWzZdKnNbMTVdICsgc1swXSAqc1s3XSpzWzE0XSArIHNbNF0gKnNbMl0qc1sxNV1cclxuICAgICAgICAgICAgLSBzWzRdKnNbM10qc1sxNF0gLSBzWzEyXSpzWzJdKnNbN10gICsgc1sxMl0qc1szXSpzWzZdO1xyXG4gICAgICAgIGludlsxMF0gPSAgIHNbMF0qc1s1XSpzWzE1XSAtIHNbMF0gKnNbN10qc1sxM10gLSBzWzRdICpzWzFdKnNbMTVdXHJcbiAgICAgICAgICAgICsgc1s0XSpzWzNdKnNbMTNdICsgc1sxMl0qc1sxXSpzWzddICAtIHNbMTJdKnNbM10qc1s1XTtcclxuICAgICAgICBpbnZbMTRdID0gLSBzWzBdKnNbNV0qc1sxNF0gKyBzWzBdICpzWzZdKnNbMTNdICsgc1s0XSAqc1sxXSpzWzE0XVxyXG4gICAgICAgICAgICAtIHNbNF0qc1syXSpzWzEzXSAtIHNbMTJdKnNbMV0qc1s2XSAgKyBzWzEyXSpzWzJdKnNbNV07XHJcblxyXG4gICAgICAgIGludlszXSAgPSAtIHNbMV0qc1s2XSpzWzExXSArIHNbMV0qc1s3XSpzWzEwXSArIHNbNV0qc1syXSpzWzExXVxyXG4gICAgICAgICAgICAtIHNbNV0qc1szXSpzWzEwXSAtIHNbOV0qc1syXSpzWzddICArIHNbOV0qc1szXSpzWzZdO1xyXG4gICAgICAgIGludls3XSAgPSAgIHNbMF0qc1s2XSpzWzExXSAtIHNbMF0qc1s3XSpzWzEwXSAtIHNbNF0qc1syXSpzWzExXVxyXG4gICAgICAgICAgICArIHNbNF0qc1szXSpzWzEwXSArIHNbOF0qc1syXSpzWzddICAtIHNbOF0qc1szXSpzWzZdO1xyXG4gICAgICAgIGludlsxMV0gPSAtIHNbMF0qc1s1XSpzWzExXSArIHNbMF0qc1s3XSpzWzldICArIHNbNF0qc1sxXSpzWzExXVxyXG4gICAgICAgICAgICAtIHNbNF0qc1szXSpzWzldICAtIHNbOF0qc1sxXSpzWzddICArIHNbOF0qc1szXSpzWzVdO1xyXG4gICAgICAgIGludlsxNV0gPSAgIHNbMF0qc1s1XSpzWzEwXSAtIHNbMF0qc1s2XSpzWzldICAtIHNbNF0qc1sxXSpzWzEwXVxyXG4gICAgICAgICAgICArIHNbNF0qc1syXSpzWzldICArIHNbOF0qc1sxXSpzWzZdICAtIHNbOF0qc1syXSpzWzVdO1xyXG5cclxuICAgICAgICBkZXQgPSBzWzBdKmludlswXSArIHNbMV0qaW52WzRdICsgc1syXSppbnZbOF0gKyBzWzNdKmludlsxMl07XHJcbiAgICAgICAgaWYgKGRldCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRldCA9IDEgLyBkZXQ7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgZFtpXSA9IGludltpXSAqIGRldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbnZlcnQgOmZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldEludmVyc2VPZih0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgb3J0aG8gOmZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uY2F0KG5ldyBNYXRyaXg0KCkuc2V0T3J0aG8obGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0RnJ1c3R1bSA6ZnVuY3Rpb24obGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcclxuICAgICAgICB2YXIgZSwgcncsIHJoLCByZDtcclxuXHJcbiAgICAgICAgaWYgKGxlZnQgPT09IHJpZ2h0IHx8IHRvcCA9PT0gYm90dG9tIHx8IG5lYXIgPT09IGZhcikge1xyXG4gICAgICAgICAgICB0aHJvdyAnbnVsbCBmcnVzdHVtJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5lYXIgPD0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyAnbmVhciA8PSAwJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZhciA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93ICdmYXIgPD0gMCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBydyA9IDEgLyAocmlnaHQgLSBsZWZ0KTtcclxuICAgICAgICByaCA9IDEgLyAodG9wIC0gYm90dG9tKTtcclxuICAgICAgICByZCA9IDEgLyAoZmFyIC0gbmVhcik7XHJcblxyXG4gICAgICAgIGUgPSB0aGlzLmVsZW1lbnRzO1xyXG5cclxuICAgICAgICBlWyAwXSA9IDIgKiBuZWFyICogcnc7XHJcbiAgICAgICAgZVsgMV0gPSAwO1xyXG4gICAgICAgIGVbIDJdID0gMDtcclxuICAgICAgICBlWyAzXSA9IDA7XHJcblxyXG4gICAgICAgIGVbIDRdID0gMDtcclxuICAgICAgICBlWyA1XSA9IDIgKiBuZWFyICogcmg7XHJcbiAgICAgICAgZVsgNl0gPSAwO1xyXG4gICAgICAgIGVbIDddID0gMDtcclxuXHJcbiAgICAgICAgZVsgOF0gPSAocmlnaHQgKyBsZWZ0KSAqIHJ3O1xyXG4gICAgICAgIGVbIDldID0gKHRvcCArIGJvdHRvbSkgKiByaDtcclxuICAgICAgICBlWzEwXSA9IC0oZmFyICsgbmVhcikgKiByZDtcclxuICAgICAgICBlWzExXSA9IC0xO1xyXG5cclxuICAgICAgICBlWzEyXSA9IDA7XHJcbiAgICAgICAgZVsxM10gPSAwO1xyXG4gICAgICAgIGVbMTRdID0gLTIgKiBuZWFyICogZmFyICogcmQ7XHJcbiAgICAgICAgZVsxNV0gPSAwO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcblxyXG4gICAgc2V0T3J0aG8gOmZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XHJcbiAgICAgICAgdmFyIGUsIHJ3LCByaCwgcmQ7XHJcblxyXG4gICAgICAgIGlmIChsZWZ0ID09PSByaWdodCB8fCBib3R0b20gPT09IHRvcCB8fCBuZWFyID09PSBmYXIpIHtcclxuICAgICAgICAgICAgdGhyb3cgJ251bGwgZnJ1c3R1bSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBydyA9IDEgLyAocmlnaHQgLSBsZWZ0KTtcclxuICAgICAgICByaCA9IDEgLyAodG9wIC0gYm90dG9tKTtcclxuICAgICAgICByZCA9IDEgLyAoZmFyIC0gbmVhcik7XHJcblxyXG4gICAgICAgIGUgPSB0aGlzLmVsZW1lbnRzO1xyXG5cclxuICAgICAgICBlWzBdICA9IDIgKiBydztcclxuICAgICAgICBlWzFdICA9IDA7XHJcbiAgICAgICAgZVsyXSAgPSAwO1xyXG4gICAgICAgIGVbM10gID0gMDtcclxuXHJcbiAgICAgICAgZVs0XSAgPSAwO1xyXG4gICAgICAgIGVbNV0gID0gMiAqIHJoO1xyXG4gICAgICAgIGVbNl0gID0gMDtcclxuICAgICAgICBlWzddICA9IDA7XHJcblxyXG4gICAgICAgIGVbOF0gID0gMDtcclxuICAgICAgICBlWzldICA9IDA7XHJcbiAgICAgICAgZVsxMF0gPSAtMiAqIHJkO1xyXG4gICAgICAgIGVbMTFdID0gMDtcclxuXHJcbiAgICAgICAgZVsxMl0gPSAtKHJpZ2h0ICsgbGVmdCkgKiBydztcclxuICAgICAgICBlWzEzXSA9IC0odG9wICsgYm90dG9tKSAqIHJoO1xyXG4gICAgICAgIGVbMTRdID0gLShmYXIgKyBuZWFyKSAqIHJkO1xyXG4gICAgICAgIGVbMTVdID0gMTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG5cclxuICAgIGNvbmNhdCA6ZnVuY3Rpb24ob3RoZXIpIHtcclxuICAgICAgICB2YXIgaSwgZSwgYSwgYiwgYWkwLCBhaTEsIGFpMiwgYWkzO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgZSA9IGEgKiBiXHJcbiAgICAgICAgZSA9IHRoaXMuZWxlbWVudHM7XHJcbiAgICAgICAgYSA9IHRoaXMuZWxlbWVudHM7XHJcbiAgICAgICAgYiA9IG90aGVyLmVsZW1lbnRzO1xyXG5cclxuICAgICAgICAvLyBJZiBlIGVxdWFscyBiLCBjb3B5IGIgdG8gdGVtcG9yYXJ5IG1hdHJpeC5cclxuICAgICAgICBpZiAoZSA9PT0gYikge1xyXG4gICAgICAgICAgICBiID0gbmV3IEZsb2F0MzJBcnJheSgxNik7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBiW2ldID0gZVtpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgICAgICBhaTA9YVtpXTsgIGFpMT1hW2krNF07ICBhaTI9YVtpKzhdOyAgYWkzPWFbaSsxMl07XHJcbiAgICAgICAgICAgIGVbaV0gICAgPSBhaTAgKiBiWzBdICArIGFpMSAqIGJbMV0gICsgYWkyICogYlsyXSAgKyBhaTMgKiBiWzNdO1xyXG4gICAgICAgICAgICBlW2krNF0gID0gYWkwICogYls0XSAgKyBhaTEgKiBiWzVdICArIGFpMiAqIGJbNl0gICsgYWkzICogYls3XTtcclxuICAgICAgICAgICAgZVtpKzhdICA9IGFpMCAqIGJbOF0gICsgYWkxICogYls5XSAgKyBhaTIgKiBiWzEwXSArIGFpMyAqIGJbMTFdO1xyXG4gICAgICAgICAgICBlW2krMTJdID0gYWkwICogYlsxMl0gKyBhaTEgKiBiWzEzXSArIGFpMiAqIGJbMTRdICsgYWkzICogYlsxNV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcblxyXG4gICAgZnJ1c3R1bSA6ZnVuY3Rpb24obGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25jYXQobmV3IE1hdHJpeDQoKS5zZXRGcnVzdHVtKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFBlcnNwZWN0aXZlIDpmdW5jdGlvbihmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcikge1xyXG4gICAgICAgIHZhciBlLCByZCwgcywgY3Q7XHJcblxyXG4gICAgICAgIGlmIChuZWFyID09PSBmYXIgfHwgYXNwZWN0ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93ICdudWxsIGZydXN0dW0nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmVhciA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93ICduZWFyIDw9IDAnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmFyIDw9IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgJ2ZhciA8PSAwJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvdnkgPSBNYXRoLlBJICogZm92eSAvIDE4MCAvIDI7XHJcbiAgICAgICAgcyA9IE1hdGguc2luKGZvdnkpO1xyXG4gICAgICAgIGlmIChzID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93ICdudWxsIGZydXN0dW0nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmQgPSAxIC8gKGZhciAtIG5lYXIpO1xyXG4gICAgICAgIGN0ID0gTWF0aC5jb3MoZm92eSkgLyBzO1xyXG5cclxuICAgICAgICBlID0gdGhpcy5lbGVtZW50cztcclxuXHJcbiAgICAgICAgZVswXSAgPSBjdCAvIGFzcGVjdDtcclxuICAgICAgICBlWzFdICA9IDA7XHJcbiAgICAgICAgZVsyXSAgPSAwO1xyXG4gICAgICAgIGVbM10gID0gMDtcclxuXHJcbiAgICAgICAgZVs0XSAgPSAwO1xyXG4gICAgICAgIGVbNV0gID0gY3Q7XHJcbiAgICAgICAgZVs2XSAgPSAwO1xyXG4gICAgICAgIGVbN10gID0gMDtcclxuXHJcbiAgICAgICAgZVs4XSAgPSAwO1xyXG4gICAgICAgIGVbOV0gID0gMDtcclxuICAgICAgICBlWzEwXSA9IC0oZmFyICsgbmVhcikgKiByZDtcclxuICAgICAgICBlWzExXSA9IC0xO1xyXG5cclxuICAgICAgICBlWzEyXSA9IDA7XHJcbiAgICAgICAgZVsxM10gPSAwO1xyXG4gICAgICAgIGVbMTRdID0gLTIgKiBuZWFyICogZmFyICogcmQ7XHJcbiAgICAgICAgZVsxNV0gPSAwO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcblxyXG4gICAgcGVyc3BlY3RpdmUgOmZ1bmN0aW9uKGZvdnksIGFzcGVjdCwgbmVhciwgZmFyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uY2F0KG5ldyBNYXRyaXg0KCkuc2V0UGVyc3BlY3RpdmUoZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0U2NhbGUgOmZ1bmN0aW9uKHgsIHksIHopIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuZWxlbWVudHM7XHJcbiAgICAgICAgZVswXSA9IHg7ICBlWzRdID0gMDsgIGVbOF0gID0gMDsgIGVbMTJdID0gMDtcclxuICAgICAgICBlWzFdID0gMDsgIGVbNV0gPSB5OyAgZVs5XSAgPSAwOyAgZVsxM10gPSAwO1xyXG4gICAgICAgIGVbMl0gPSAwOyAgZVs2XSA9IDA7ICBlWzEwXSA9IHo7ICBlWzE0XSA9IDA7XHJcbiAgICAgICAgZVszXSA9IDA7ICBlWzddID0gMDsgIGVbMTFdID0gMDsgIGVbMTVdID0gMTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcblxyXG4gICAgc2NhbGUgOmZ1bmN0aW9uKHgsIHksIHopIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuZWxlbWVudHM7XHJcbiAgICAgICAgZVswXSAqPSB4OyAgZVs0XSAqPSB5OyAgZVs4XSAgKj0gejtcclxuICAgICAgICBlWzFdICo9IHg7ICBlWzVdICo9IHk7ICBlWzldICAqPSB6O1xyXG4gICAgICAgIGVbMl0gKj0geDsgIGVbNl0gKj0geTsgIGVbMTBdICo9IHo7XHJcbiAgICAgICAgZVszXSAqPSB4OyAgZVs3XSAqPSB5OyAgZVsxMV0gKj0gejtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcblxyXG5cdGlkZW50aXR5OiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dGhpcy5zZXQoXHJcblxyXG5cdFx0XHQxLCAwLCAwLCAwLFxyXG5cdFx0XHQwLCAxLCAwLCAwLFxyXG5cdFx0XHQwLCAwLCAxLCAwLFxyXG5cdFx0XHQwLCAwLCAwLCAxXHJcblxyXG5cdFx0KTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0Y2xvbmU6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRyZXR1cm4gbmV3IE1hdHJpeDQoKS5mcm9tQXJyYXkoIHRoaXMuZWxlbWVudHMgKTtcclxuXHJcblx0fSxcclxuXHJcblx0Y29weTogZnVuY3Rpb24gKCBtICkge1xyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblx0XHR2YXIgbWUgPSBtLmVsZW1lbnRzO1xyXG5cclxuXHRcdHRlWyAwIF0gPSBtZVsgMCBdOyB0ZVsgMSBdID0gbWVbIDEgXTsgdGVbIDIgXSA9IG1lWyAyIF07IHRlWyAzIF0gPSBtZVsgMyBdO1xyXG5cdFx0dGVbIDQgXSA9IG1lWyA0IF07IHRlWyA1IF0gPSBtZVsgNSBdOyB0ZVsgNiBdID0gbWVbIDYgXTsgdGVbIDcgXSA9IG1lWyA3IF07XHJcblx0XHR0ZVsgOCBdID0gbWVbIDggXTsgdGVbIDkgXSA9IG1lWyA5IF07IHRlWyAxMCBdID0gbWVbIDEwIF07IHRlWyAxMSBdID0gbWVbIDExIF07XHJcblx0XHR0ZVsgMTIgXSA9IG1lWyAxMiBdOyB0ZVsgMTMgXSA9IG1lWyAxMyBdOyB0ZVsgMTQgXSA9IG1lWyAxNCBdOyB0ZVsgMTUgXSA9IG1lWyAxNSBdO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRjb3B5UG9zaXRpb246IGZ1bmN0aW9uICggbSApIHtcclxuXHJcblx0XHR2YXIgdGUgPSB0aGlzLmVsZW1lbnRzLCBtZSA9IG0uZWxlbWVudHM7XHJcblxyXG5cdFx0dGVbIDEyIF0gPSBtZVsgMTIgXTtcclxuXHRcdHRlWyAxMyBdID0gbWVbIDEzIF07XHJcblx0XHR0ZVsgMTQgXSA9IG1lWyAxNCBdO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRleHRyYWN0QmFzaXM6IGZ1bmN0aW9uICggeEF4aXMsIHlBeGlzLCB6QXhpcyApIHtcclxuXHJcblx0XHR4QXhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKCB0aGlzLCAwICk7XHJcblx0XHR5QXhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKCB0aGlzLCAxICk7XHJcblx0XHR6QXhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKCB0aGlzLCAyICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1ha2VCYXNpczogZnVuY3Rpb24gKCB4QXhpcywgeUF4aXMsIHpBeGlzICkge1xyXG5cclxuXHRcdHRoaXMuc2V0KFxyXG5cdFx0XHR4QXhpcy54LCB5QXhpcy54LCB6QXhpcy54LCAwLFxyXG5cdFx0XHR4QXhpcy55LCB5QXhpcy55LCB6QXhpcy55LCAwLFxyXG5cdFx0XHR4QXhpcy56LCB5QXhpcy56LCB6QXhpcy56LCAwLFxyXG5cdFx0XHQwLCAwLCAwLCAxXHJcblx0XHQpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRleHRyYWN0Um90YXRpb246IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdjEgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiBleHRyYWN0Um90YXRpb24oIG0gKSB7XHJcblxyXG5cdFx0XHQvLyB0aGlzIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0IHJlZmxlY3Rpb24gbWF0cmljZXNcclxuXHJcblx0XHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblx0XHRcdHZhciBtZSA9IG0uZWxlbWVudHM7XHJcblxyXG5cdFx0XHR2YXIgc2NhbGVYID0gMSAvIHYxLnNldEZyb21NYXRyaXhDb2x1bW4oIG0sIDAgKS5sZW5ndGgoKTtcclxuXHRcdFx0dmFyIHNjYWxlWSA9IDEgLyB2MS5zZXRGcm9tTWF0cml4Q29sdW1uKCBtLCAxICkubGVuZ3RoKCk7XHJcblx0XHRcdHZhciBzY2FsZVogPSAxIC8gdjEuc2V0RnJvbU1hdHJpeENvbHVtbiggbSwgMiApLmxlbmd0aCgpO1xyXG5cclxuXHRcdFx0dGVbIDAgXSA9IG1lWyAwIF0gKiBzY2FsZVg7XHJcblx0XHRcdHRlWyAxIF0gPSBtZVsgMSBdICogc2NhbGVYO1xyXG5cdFx0XHR0ZVsgMiBdID0gbWVbIDIgXSAqIHNjYWxlWDtcclxuXHRcdFx0dGVbIDMgXSA9IDA7XHJcblxyXG5cdFx0XHR0ZVsgNCBdID0gbWVbIDQgXSAqIHNjYWxlWTtcclxuXHRcdFx0dGVbIDUgXSA9IG1lWyA1IF0gKiBzY2FsZVk7XHJcblx0XHRcdHRlWyA2IF0gPSBtZVsgNiBdICogc2NhbGVZO1xyXG5cdFx0XHR0ZVsgNyBdID0gMDtcclxuXHJcblx0XHRcdHRlWyA4IF0gPSBtZVsgOCBdICogc2NhbGVaO1xyXG5cdFx0XHR0ZVsgOSBdID0gbWVbIDkgXSAqIHNjYWxlWjtcclxuXHRcdFx0dGVbIDEwIF0gPSBtZVsgMTAgXSAqIHNjYWxlWjtcclxuXHRcdFx0dGVbIDExIF0gPSAwO1xyXG5cclxuXHRcdFx0dGVbIDEyIF0gPSAwO1xyXG5cdFx0XHR0ZVsgMTMgXSA9IDA7XHJcblx0XHRcdHRlWyAxNCBdID0gMDtcclxuXHRcdFx0dGVbIDE1IF0gPSAxO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSgpLFxyXG5cclxuXHRtYWtlUm90YXRpb25Gcm9tRXVsZXI6IGZ1bmN0aW9uICggZXVsZXIgKSB7XHJcblxyXG5cdFx0aWYgKCAhICggZXVsZXIgJiYgZXVsZXIuaXNFdWxlciApICkge1xyXG5cclxuXHRcdFx0Y29uc29sZS5lcnJvciggJ0NPT0wuTWF0cml4NDogLm1ha2VSb3RhdGlvbkZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci4nICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG5cdFx0dmFyIHggPSBldWxlci54LCB5ID0gZXVsZXIueSwgeiA9IGV1bGVyLno7XHJcblx0XHR2YXIgYSA9IE1hdGguY29zKCB4ICksIGIgPSBNYXRoLnNpbiggeCApO1xyXG5cdFx0dmFyIGMgPSBNYXRoLmNvcyggeSApLCBkID0gTWF0aC5zaW4oIHkgKTtcclxuXHRcdHZhciBlID0gTWF0aC5jb3MoIHogKSwgZiA9IE1hdGguc2luKCB6ICk7XHJcblxyXG5cdFx0aWYgKCBldWxlci5vcmRlciA9PT0gJ1hZWicgKSB7XHJcblxyXG5cdFx0XHR2YXIgYWUgPSBhICogZSwgYWYgPSBhICogZiwgYmUgPSBiICogZSwgYmYgPSBiICogZjtcclxuXHJcblx0XHRcdHRlWyAwIF0gPSBjICogZTtcclxuXHRcdFx0dGVbIDQgXSA9IC0gYyAqIGY7XHJcblx0XHRcdHRlWyA4IF0gPSBkO1xyXG5cclxuXHRcdFx0dGVbIDEgXSA9IGFmICsgYmUgKiBkO1xyXG5cdFx0XHR0ZVsgNSBdID0gYWUgLSBiZiAqIGQ7XHJcblx0XHRcdHRlWyA5IF0gPSAtIGIgKiBjO1xyXG5cclxuXHRcdFx0dGVbIDIgXSA9IGJmIC0gYWUgKiBkO1xyXG5cdFx0XHR0ZVsgNiBdID0gYmUgKyBhZiAqIGQ7XHJcblx0XHRcdHRlWyAxMCBdID0gYSAqIGM7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggZXVsZXIub3JkZXIgPT09ICdZWFonICkge1xyXG5cclxuXHRcdFx0dmFyIGNlID0gYyAqIGUsIGNmID0gYyAqIGYsIGRlID0gZCAqIGUsIGRmID0gZCAqIGY7XHJcblxyXG5cdFx0XHR0ZVsgMCBdID0gY2UgKyBkZiAqIGI7XHJcblx0XHRcdHRlWyA0IF0gPSBkZSAqIGIgLSBjZjtcclxuXHRcdFx0dGVbIDggXSA9IGEgKiBkO1xyXG5cclxuXHRcdFx0dGVbIDEgXSA9IGEgKiBmO1xyXG5cdFx0XHR0ZVsgNSBdID0gYSAqIGU7XHJcblx0XHRcdHRlWyA5IF0gPSAtIGI7XHJcblxyXG5cdFx0XHR0ZVsgMiBdID0gY2YgKiBiIC0gZGU7XHJcblx0XHRcdHRlWyA2IF0gPSBkZiArIGNlICogYjtcclxuXHRcdFx0dGVbIDEwIF0gPSBhICogYztcclxuXHJcblx0XHR9IGVsc2UgaWYgKCBldWxlci5vcmRlciA9PT0gJ1pYWScgKSB7XHJcblxyXG5cdFx0XHR2YXIgY2UgPSBjICogZSwgY2YgPSBjICogZiwgZGUgPSBkICogZSwgZGYgPSBkICogZjtcclxuXHJcblx0XHRcdHRlWyAwIF0gPSBjZSAtIGRmICogYjtcclxuXHRcdFx0dGVbIDQgXSA9IC0gYSAqIGY7XHJcblx0XHRcdHRlWyA4IF0gPSBkZSArIGNmICogYjtcclxuXHJcblx0XHRcdHRlWyAxIF0gPSBjZiArIGRlICogYjtcclxuXHRcdFx0dGVbIDUgXSA9IGEgKiBlO1xyXG5cdFx0XHR0ZVsgOSBdID0gZGYgLSBjZSAqIGI7XHJcblxyXG5cdFx0XHR0ZVsgMiBdID0gLSBhICogZDtcclxuXHRcdFx0dGVbIDYgXSA9IGI7XHJcblx0XHRcdHRlWyAxMCBdID0gYSAqIGM7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggZXVsZXIub3JkZXIgPT09ICdaWVgnICkge1xyXG5cclxuXHRcdFx0dmFyIGFlID0gYSAqIGUsIGFmID0gYSAqIGYsIGJlID0gYiAqIGUsIGJmID0gYiAqIGY7XHJcblxyXG5cdFx0XHR0ZVsgMCBdID0gYyAqIGU7XHJcblx0XHRcdHRlWyA0IF0gPSBiZSAqIGQgLSBhZjtcclxuXHRcdFx0dGVbIDggXSA9IGFlICogZCArIGJmO1xyXG5cclxuXHRcdFx0dGVbIDEgXSA9IGMgKiBmO1xyXG5cdFx0XHR0ZVsgNSBdID0gYmYgKiBkICsgYWU7XHJcblx0XHRcdHRlWyA5IF0gPSBhZiAqIGQgLSBiZTtcclxuXHJcblx0XHRcdHRlWyAyIF0gPSAtIGQ7XHJcblx0XHRcdHRlWyA2IF0gPSBiICogYztcclxuXHRcdFx0dGVbIDEwIF0gPSBhICogYztcclxuXHJcblx0XHR9IGVsc2UgaWYgKCBldWxlci5vcmRlciA9PT0gJ1laWCcgKSB7XHJcblxyXG5cdFx0XHR2YXIgYWMgPSBhICogYywgYWQgPSBhICogZCwgYmMgPSBiICogYywgYmQgPSBiICogZDtcclxuXHJcblx0XHRcdHRlWyAwIF0gPSBjICogZTtcclxuXHRcdFx0dGVbIDQgXSA9IGJkIC0gYWMgKiBmO1xyXG5cdFx0XHR0ZVsgOCBdID0gYmMgKiBmICsgYWQ7XHJcblxyXG5cdFx0XHR0ZVsgMSBdID0gZjtcclxuXHRcdFx0dGVbIDUgXSA9IGEgKiBlO1xyXG5cdFx0XHR0ZVsgOSBdID0gLSBiICogZTtcclxuXHJcblx0XHRcdHRlWyAyIF0gPSAtIGQgKiBlO1xyXG5cdFx0XHR0ZVsgNiBdID0gYWQgKiBmICsgYmM7XHJcblx0XHRcdHRlWyAxMCBdID0gYWMgLSBiZCAqIGY7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggZXVsZXIub3JkZXIgPT09ICdYWlknICkge1xyXG5cclxuXHRcdFx0dmFyIGFjID0gYSAqIGMsIGFkID0gYSAqIGQsIGJjID0gYiAqIGMsIGJkID0gYiAqIGQ7XHJcblxyXG5cdFx0XHR0ZVsgMCBdID0gYyAqIGU7XHJcblx0XHRcdHRlWyA0IF0gPSAtIGY7XHJcblx0XHRcdHRlWyA4IF0gPSBkICogZTtcclxuXHJcblx0XHRcdHRlWyAxIF0gPSBhYyAqIGYgKyBiZDtcclxuXHRcdFx0dGVbIDUgXSA9IGEgKiBlO1xyXG5cdFx0XHR0ZVsgOSBdID0gYWQgKiBmIC0gYmM7XHJcblxyXG5cdFx0XHR0ZVsgMiBdID0gYmMgKiBmIC0gYWQ7XHJcblx0XHRcdHRlWyA2IF0gPSBiICogZTtcclxuXHRcdFx0dGVbIDEwIF0gPSBiZCAqIGYgKyBhYztcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gYm90dG9tIHJvd1xyXG5cdFx0dGVbIDMgXSA9IDA7XHJcblx0XHR0ZVsgNyBdID0gMDtcclxuXHRcdHRlWyAxMSBdID0gMDtcclxuXHJcblx0XHQvLyBsYXN0IGNvbHVtblxyXG5cdFx0dGVbIDEyIF0gPSAwO1xyXG5cdFx0dGVbIDEzIF0gPSAwO1xyXG5cdFx0dGVbIDE0IF0gPSAwO1xyXG5cdFx0dGVbIDE1IF0gPSAxO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbjogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciB6ZXJvID0gbmV3IFZlY3RvcjMoIDAsIDAsIDAgKTtcclxuXHRcdHZhciBvbmUgPSBuZXcgVmVjdG9yMyggMSwgMSwgMSApO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiBtYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbiggcSApIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmNvbXBvc2UoIHplcm8sIHEsIG9uZSApO1xyXG5cclxuXHRcdH07XHJcblxyXG5cdH0oKSxcclxuXHJcblx0bG9va0F0OiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dmFyIHggPSBuZXcgVmVjdG9yMygpO1xyXG5cdFx0dmFyIHkgPSBuZXcgVmVjdG9yMygpO1xyXG5cdFx0dmFyIHogPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiBsb29rQXQoIGV5ZSwgdGFyZ2V0LCB1cCApIHtcclxuXHJcblx0XHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG5cdFx0XHR6LnN1YlZlY3RvcnMoIGV5ZSwgdGFyZ2V0ICk7XHJcblxyXG5cdFx0XHRpZiAoIHoubGVuZ3RoU3EoKSA9PT0gMCApIHtcclxuXHJcblx0XHRcdFx0Ly8gZXllIGFuZCB0YXJnZXQgYXJlIGluIHRoZSBzYW1lIHBvc2l0aW9uXHJcblxyXG5cdFx0XHRcdHoueiA9IDE7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR6Lm5vcm1hbGl6ZSgpO1xyXG5cdFx0XHR4LmNyb3NzVmVjdG9ycyggdXAsIHogKTtcclxuXHJcblx0XHRcdGlmICggeC5sZW5ndGhTcSgpID09PSAwICkge1xyXG5cclxuXHRcdFx0XHQvLyB1cCBhbmQgeiBhcmUgcGFyYWxsZWxcclxuXHJcblx0XHRcdFx0aWYgKCBNYXRoLmFicyggdXAueiApID09PSAxICkge1xyXG5cclxuXHRcdFx0XHRcdHoueCArPSAwLjAwMDE7XHJcblxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0ei56ICs9IDAuMDAwMTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR6Lm5vcm1hbGl6ZSgpO1xyXG5cdFx0XHRcdHguY3Jvc3NWZWN0b3JzKCB1cCwgeiApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0eC5ub3JtYWxpemUoKTtcclxuXHRcdFx0eS5jcm9zc1ZlY3RvcnMoIHosIHggKTtcclxuXHJcblx0XHRcdHRlWyAwIF0gPSB4Lng7IHRlWyA0IF0gPSB5Lng7IHRlWyA4IF0gPSB6Lng7XHJcblx0XHRcdHRlWyAxIF0gPSB4Lnk7IHRlWyA1IF0gPSB5Lnk7IHRlWyA5IF0gPSB6Lnk7XHJcblx0XHRcdHRlWyAyIF0gPSB4Lno7IHRlWyA2IF0gPSB5Lno7IHRlWyAxMCBdID0gei56O1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSgpLFxyXG5cclxuXHRtdWx0aXBseTogZnVuY3Rpb24gKCBtLCBuICkge1xyXG5cclxuXHRcdGlmICggbiAhPT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0Y29uc29sZS53YXJuKCAnQ09PTC5NYXRyaXg0OiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseU1hdHJpY2VzKCBhLCBiICkgaW5zdGVhZC4nICk7XHJcblx0XHRcdHJldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXMoIG0sIG4gKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyggdGhpcywgbSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRwcmVtdWx0aXBseTogZnVuY3Rpb24gKCBtICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXMoIG0sIHRoaXMgKTtcclxuXHJcblx0fSxcclxuXHJcblx0bXVsdGlwbHlNYXRyaWNlczogZnVuY3Rpb24gKCBhLCBiICkge1xyXG5cclxuXHRcdHZhciBhZSA9IGEuZWxlbWVudHM7XHJcblx0XHR2YXIgYmUgPSBiLmVsZW1lbnRzO1xyXG5cdFx0dmFyIHRlID0gdGhpcy5lbGVtZW50cztcclxuXHJcblx0XHR2YXIgYTExID0gYWVbIDAgXSwgYTEyID0gYWVbIDQgXSwgYTEzID0gYWVbIDggXSwgYTE0ID0gYWVbIDEyIF07XHJcblx0XHR2YXIgYTIxID0gYWVbIDEgXSwgYTIyID0gYWVbIDUgXSwgYTIzID0gYWVbIDkgXSwgYTI0ID0gYWVbIDEzIF07XHJcblx0XHR2YXIgYTMxID0gYWVbIDIgXSwgYTMyID0gYWVbIDYgXSwgYTMzID0gYWVbIDEwIF0sIGEzNCA9IGFlWyAxNCBdO1xyXG5cdFx0dmFyIGE0MSA9IGFlWyAzIF0sIGE0MiA9IGFlWyA3IF0sIGE0MyA9IGFlWyAxMSBdLCBhNDQgPSBhZVsgMTUgXTtcclxuXHJcblx0XHR2YXIgYjExID0gYmVbIDAgXSwgYjEyID0gYmVbIDQgXSwgYjEzID0gYmVbIDggXSwgYjE0ID0gYmVbIDEyIF07XHJcblx0XHR2YXIgYjIxID0gYmVbIDEgXSwgYjIyID0gYmVbIDUgXSwgYjIzID0gYmVbIDkgXSwgYjI0ID0gYmVbIDEzIF07XHJcblx0XHR2YXIgYjMxID0gYmVbIDIgXSwgYjMyID0gYmVbIDYgXSwgYjMzID0gYmVbIDEwIF0sIGIzNCA9IGJlWyAxNCBdO1xyXG5cdFx0dmFyIGI0MSA9IGJlWyAzIF0sIGI0MiA9IGJlWyA3IF0sIGI0MyA9IGJlWyAxMSBdLCBiNDQgPSBiZVsgMTUgXTtcclxuXHJcblx0XHR0ZVsgMCBdID0gYTExICogYjExICsgYTEyICogYjIxICsgYTEzICogYjMxICsgYTE0ICogYjQxO1xyXG5cdFx0dGVbIDQgXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMiArIGExNCAqIGI0MjtcclxuXHRcdHRlWyA4IF0gPSBhMTEgKiBiMTMgKyBhMTIgKiBiMjMgKyBhMTMgKiBiMzMgKyBhMTQgKiBiNDM7XHJcblx0XHR0ZVsgMTIgXSA9IGExMSAqIGIxNCArIGExMiAqIGIyNCArIGExMyAqIGIzNCArIGExNCAqIGI0NDtcclxuXHJcblx0XHR0ZVsgMSBdID0gYTIxICogYjExICsgYTIyICogYjIxICsgYTIzICogYjMxICsgYTI0ICogYjQxO1xyXG5cdFx0dGVbIDUgXSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMiArIGEyNCAqIGI0MjtcclxuXHRcdHRlWyA5IF0gPSBhMjEgKiBiMTMgKyBhMjIgKiBiMjMgKyBhMjMgKiBiMzMgKyBhMjQgKiBiNDM7XHJcblx0XHR0ZVsgMTMgXSA9IGEyMSAqIGIxNCArIGEyMiAqIGIyNCArIGEyMyAqIGIzNCArIGEyNCAqIGI0NDtcclxuXHJcblx0XHR0ZVsgMiBdID0gYTMxICogYjExICsgYTMyICogYjIxICsgYTMzICogYjMxICsgYTM0ICogYjQxO1xyXG5cdFx0dGVbIDYgXSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMiArIGEzNCAqIGI0MjtcclxuXHRcdHRlWyAxMCBdID0gYTMxICogYjEzICsgYTMyICogYjIzICsgYTMzICogYjMzICsgYTM0ICogYjQzO1xyXG5cdFx0dGVbIDE0IF0gPSBhMzEgKiBiMTQgKyBhMzIgKiBiMjQgKyBhMzMgKiBiMzQgKyBhMzQgKiBiNDQ7XHJcblxyXG5cdFx0dGVbIDMgXSA9IGE0MSAqIGIxMSArIGE0MiAqIGIyMSArIGE0MyAqIGIzMSArIGE0NCAqIGI0MTtcclxuXHRcdHRlWyA3IF0gPSBhNDEgKiBiMTIgKyBhNDIgKiBiMjIgKyBhNDMgKiBiMzIgKyBhNDQgKiBiNDI7XHJcblx0XHR0ZVsgMTEgXSA9IGE0MSAqIGIxMyArIGE0MiAqIGIyMyArIGE0MyAqIGIzMyArIGE0NCAqIGI0MztcclxuXHRcdHRlWyAxNSBdID0gYTQxICogYjE0ICsgYTQyICogYjI0ICsgYTQzICogYjM0ICsgYTQ0ICogYjQ0O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtdWx0aXBseVNjYWxhcjogZnVuY3Rpb24gKCBzICkge1xyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG5cdFx0dGVbIDAgXSAqPSBzOyB0ZVsgNCBdICo9IHM7IHRlWyA4IF0gKj0gczsgdGVbIDEyIF0gKj0gcztcclxuXHRcdHRlWyAxIF0gKj0gczsgdGVbIDUgXSAqPSBzOyB0ZVsgOSBdICo9IHM7IHRlWyAxMyBdICo9IHM7XHJcblx0XHR0ZVsgMiBdICo9IHM7IHRlWyA2IF0gKj0gczsgdGVbIDEwIF0gKj0gczsgdGVbIDE0IF0gKj0gcztcclxuXHRcdHRlWyAzIF0gKj0gczsgdGVbIDcgXSAqPSBzOyB0ZVsgMTEgXSAqPSBzOyB0ZVsgMTUgXSAqPSBzO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRhcHBseVRvQnVmZmVyQXR0cmlidXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dmFyIHYxID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSggYXR0cmlidXRlICkge1xyXG5cclxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gYXR0cmlidXRlLmNvdW50OyBpIDwgbDsgaSArKyApIHtcclxuXHJcblx0XHRcdFx0djEueCA9IGF0dHJpYnV0ZS5nZXRYKCBpICk7XHJcblx0XHRcdFx0djEueSA9IGF0dHJpYnV0ZS5nZXRZKCBpICk7XHJcblx0XHRcdFx0djEueiA9IGF0dHJpYnV0ZS5nZXRaKCBpICk7XHJcblxyXG5cdFx0XHRcdHYxLmFwcGx5TWF0cml4NCggdGhpcyApO1xyXG5cclxuXHRcdFx0XHRhdHRyaWJ1dGUuc2V0WFlaKCBpLCB2MS54LCB2MS55LCB2MS56ICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gYXR0cmlidXRlO1xyXG5cclxuXHRcdH07XHJcblxyXG5cdH0oKSxcclxuXHJcblx0ZGV0ZXJtaW5hbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdGUgPSB0aGlzLmVsZW1lbnRzO1xyXG5cclxuXHRcdHZhciBuMTEgPSB0ZVsgMCBdLCBuMTIgPSB0ZVsgNCBdLCBuMTMgPSB0ZVsgOCBdLCBuMTQgPSB0ZVsgMTIgXTtcclxuXHRcdHZhciBuMjEgPSB0ZVsgMSBdLCBuMjIgPSB0ZVsgNSBdLCBuMjMgPSB0ZVsgOSBdLCBuMjQgPSB0ZVsgMTMgXTtcclxuXHRcdHZhciBuMzEgPSB0ZVsgMiBdLCBuMzIgPSB0ZVsgNiBdLCBuMzMgPSB0ZVsgMTAgXSwgbjM0ID0gdGVbIDE0IF07XHJcblx0XHR2YXIgbjQxID0gdGVbIDMgXSwgbjQyID0gdGVbIDcgXSwgbjQzID0gdGVbIDExIF0sIG40NCA9IHRlWyAxNSBdO1xyXG5cclxuXHRcdC8vVE9ETzogbWFrZSB0aGlzIG1vcmUgZWZmaWNpZW50XHJcblx0XHQvLyggYmFzZWQgb24gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9tYXRyaXgvZnVuY3Rpb25zL2ludmVyc2UvZm91ckQvaW5kZXguaHRtIClcclxuXHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHRuNDEgKiAoXHJcblx0XHRcdFx0KyBuMTQgKiBuMjMgKiBuMzJcclxuXHRcdFx0XHQgLSBuMTMgKiBuMjQgKiBuMzJcclxuXHRcdFx0XHQgLSBuMTQgKiBuMjIgKiBuMzNcclxuXHRcdFx0XHQgKyBuMTIgKiBuMjQgKiBuMzNcclxuXHRcdFx0XHQgKyBuMTMgKiBuMjIgKiBuMzRcclxuXHRcdFx0XHQgLSBuMTIgKiBuMjMgKiBuMzRcclxuXHRcdFx0KSArXHJcblx0XHRcdG40MiAqIChcclxuXHRcdFx0XHQrIG4xMSAqIG4yMyAqIG4zNFxyXG5cdFx0XHRcdCAtIG4xMSAqIG4yNCAqIG4zM1xyXG5cdFx0XHRcdCArIG4xNCAqIG4yMSAqIG4zM1xyXG5cdFx0XHRcdCAtIG4xMyAqIG4yMSAqIG4zNFxyXG5cdFx0XHRcdCArIG4xMyAqIG4yNCAqIG4zMVxyXG5cdFx0XHRcdCAtIG4xNCAqIG4yMyAqIG4zMVxyXG5cdFx0XHQpICtcclxuXHRcdFx0bjQzICogKFxyXG5cdFx0XHRcdCsgbjExICogbjI0ICogbjMyXHJcblx0XHRcdFx0IC0gbjExICogbjIyICogbjM0XHJcblx0XHRcdFx0IC0gbjE0ICogbjIxICogbjMyXHJcblx0XHRcdFx0ICsgbjEyICogbjIxICogbjM0XHJcblx0XHRcdFx0ICsgbjE0ICogbjIyICogbjMxXHJcblx0XHRcdFx0IC0gbjEyICogbjI0ICogbjMxXHJcblx0XHRcdCkgK1xyXG5cdFx0XHRuNDQgKiAoXHJcblx0XHRcdFx0LSBuMTMgKiBuMjIgKiBuMzFcclxuXHRcdFx0XHQgLSBuMTEgKiBuMjMgKiBuMzJcclxuXHRcdFx0XHQgKyBuMTEgKiBuMjIgKiBuMzNcclxuXHRcdFx0XHQgKyBuMTMgKiBuMjEgKiBuMzJcclxuXHRcdFx0XHQgLSBuMTIgKiBuMjEgKiBuMzNcclxuXHRcdFx0XHQgKyBuMTIgKiBuMjMgKiBuMzFcclxuXHRcdFx0KVxyXG5cclxuXHRcdCk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHRyYW5zcG9zZTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblx0XHR2YXIgdG1wO1xyXG5cclxuXHRcdHRtcCA9IHRlWyAxIF07IHRlWyAxIF0gPSB0ZVsgNCBdOyB0ZVsgNCBdID0gdG1wO1xyXG5cdFx0dG1wID0gdGVbIDIgXTsgdGVbIDIgXSA9IHRlWyA4IF07IHRlWyA4IF0gPSB0bXA7XHJcblx0XHR0bXAgPSB0ZVsgNiBdOyB0ZVsgNiBdID0gdGVbIDkgXTsgdGVbIDkgXSA9IHRtcDtcclxuXHJcblx0XHR0bXAgPSB0ZVsgMyBdOyB0ZVsgMyBdID0gdGVbIDEyIF07IHRlWyAxMiBdID0gdG1wO1xyXG5cdFx0dG1wID0gdGVbIDcgXTsgdGVbIDcgXSA9IHRlWyAxMyBdOyB0ZVsgMTMgXSA9IHRtcDtcclxuXHRcdHRtcCA9IHRlWyAxMSBdOyB0ZVsgMTEgXSA9IHRlWyAxNCBdOyB0ZVsgMTQgXSA9IHRtcDtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0UG9zaXRpb246IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHR2YXIgdGUgPSB0aGlzLmVsZW1lbnRzO1xyXG5cclxuXHRcdHRlWyAxMiBdID0gdi54O1xyXG5cdFx0dGVbIDEzIF0gPSB2Lnk7XHJcblx0XHR0ZVsgMTQgXSA9IHYuejtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0Z2V0SW52ZXJzZTogZnVuY3Rpb24gKCBtLCB0aHJvd09uRGVnZW5lcmF0ZSApIHtcclxuXHJcblx0XHQvLyBiYXNlZCBvbiBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL21hdHJpeC9mdW5jdGlvbnMvaW52ZXJzZS9mb3VyRC9pbmRleC5odG1cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHMsXHJcblx0XHRcdG1lID0gbS5lbGVtZW50cyxcclxuXHJcblx0XHRcdG4xMSA9IG1lWyAwIF0sIG4yMSA9IG1lWyAxIF0sIG4zMSA9IG1lWyAyIF0sIG40MSA9IG1lWyAzIF0sXHJcblx0XHRcdG4xMiA9IG1lWyA0IF0sIG4yMiA9IG1lWyA1IF0sIG4zMiA9IG1lWyA2IF0sIG40MiA9IG1lWyA3IF0sXHJcblx0XHRcdG4xMyA9IG1lWyA4IF0sIG4yMyA9IG1lWyA5IF0sIG4zMyA9IG1lWyAxMCBdLCBuNDMgPSBtZVsgMTEgXSxcclxuXHRcdFx0bjE0ID0gbWVbIDEyIF0sIG4yNCA9IG1lWyAxMyBdLCBuMzQgPSBtZVsgMTQgXSwgbjQ0ID0gbWVbIDE1IF0sXHJcblxyXG5cdFx0XHR0MTEgPSBuMjMgKiBuMzQgKiBuNDIgLSBuMjQgKiBuMzMgKiBuNDIgKyBuMjQgKiBuMzIgKiBuNDMgLSBuMjIgKiBuMzQgKiBuNDMgLSBuMjMgKiBuMzIgKiBuNDQgKyBuMjIgKiBuMzMgKiBuNDQsXHJcblx0XHRcdHQxMiA9IG4xNCAqIG4zMyAqIG40MiAtIG4xMyAqIG4zNCAqIG40MiAtIG4xNCAqIG4zMiAqIG40MyArIG4xMiAqIG4zNCAqIG40MyArIG4xMyAqIG4zMiAqIG40NCAtIG4xMiAqIG4zMyAqIG40NCxcclxuXHRcdFx0dDEzID0gbjEzICogbjI0ICogbjQyIC0gbjE0ICogbjIzICogbjQyICsgbjE0ICogbjIyICogbjQzIC0gbjEyICogbjI0ICogbjQzIC0gbjEzICogbjIyICogbjQ0ICsgbjEyICogbjIzICogbjQ0LFxyXG5cdFx0XHR0MTQgPSBuMTQgKiBuMjMgKiBuMzIgLSBuMTMgKiBuMjQgKiBuMzIgLSBuMTQgKiBuMjIgKiBuMzMgKyBuMTIgKiBuMjQgKiBuMzMgKyBuMTMgKiBuMjIgKiBuMzQgLSBuMTIgKiBuMjMgKiBuMzQ7XHJcblxyXG5cdFx0dmFyIGRldCA9IG4xMSAqIHQxMSArIG4yMSAqIHQxMiArIG4zMSAqIHQxMyArIG40MSAqIHQxNDtcclxuXHJcblx0XHRpZiAoIGRldCA9PT0gMCApIHtcclxuXHJcblx0XHRcdHZhciBtc2cgPSBcIkNPT0wuTWF0cml4NDogLmdldEludmVyc2UoKSBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCI7XHJcblxyXG5cdFx0XHRpZiAoIHRocm93T25EZWdlbmVyYXRlID09PSB0cnVlICkge1xyXG5cclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xyXG5cclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS53YXJuKCBtc2cgKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmlkZW50aXR5KCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHZhciBkZXRJbnYgPSAxIC8gZGV0O1xyXG5cclxuXHRcdHRlWyAwIF0gPSB0MTEgKiBkZXRJbnY7XHJcblx0XHR0ZVsgMSBdID0gKCBuMjQgKiBuMzMgKiBuNDEgLSBuMjMgKiBuMzQgKiBuNDEgLSBuMjQgKiBuMzEgKiBuNDMgKyBuMjEgKiBuMzQgKiBuNDMgKyBuMjMgKiBuMzEgKiBuNDQgLSBuMjEgKiBuMzMgKiBuNDQgKSAqIGRldEludjtcclxuXHRcdHRlWyAyIF0gPSAoIG4yMiAqIG4zNCAqIG40MSAtIG4yNCAqIG4zMiAqIG40MSArIG4yNCAqIG4zMSAqIG40MiAtIG4yMSAqIG4zNCAqIG40MiAtIG4yMiAqIG4zMSAqIG40NCArIG4yMSAqIG4zMiAqIG40NCApICogZGV0SW52O1xyXG5cdFx0dGVbIDMgXSA9ICggbjIzICogbjMyICogbjQxIC0gbjIyICogbjMzICogbjQxIC0gbjIzICogbjMxICogbjQyICsgbjIxICogbjMzICogbjQyICsgbjIyICogbjMxICogbjQzIC0gbjIxICogbjMyICogbjQzICkgKiBkZXRJbnY7XHJcblxyXG5cdFx0dGVbIDQgXSA9IHQxMiAqIGRldEludjtcclxuXHRcdHRlWyA1IF0gPSAoIG4xMyAqIG4zNCAqIG40MSAtIG4xNCAqIG4zMyAqIG40MSArIG4xNCAqIG4zMSAqIG40MyAtIG4xMSAqIG4zNCAqIG40MyAtIG4xMyAqIG4zMSAqIG40NCArIG4xMSAqIG4zMyAqIG40NCApICogZGV0SW52O1xyXG5cdFx0dGVbIDYgXSA9ICggbjE0ICogbjMyICogbjQxIC0gbjEyICogbjM0ICogbjQxIC0gbjE0ICogbjMxICogbjQyICsgbjExICogbjM0ICogbjQyICsgbjEyICogbjMxICogbjQ0IC0gbjExICogbjMyICogbjQ0ICkgKiBkZXRJbnY7XHJcblx0XHR0ZVsgNyBdID0gKCBuMTIgKiBuMzMgKiBuNDEgLSBuMTMgKiBuMzIgKiBuNDEgKyBuMTMgKiBuMzEgKiBuNDIgLSBuMTEgKiBuMzMgKiBuNDIgLSBuMTIgKiBuMzEgKiBuNDMgKyBuMTEgKiBuMzIgKiBuNDMgKSAqIGRldEludjtcclxuXHJcblx0XHR0ZVsgOCBdID0gdDEzICogZGV0SW52O1xyXG5cdFx0dGVbIDkgXSA9ICggbjE0ICogbjIzICogbjQxIC0gbjEzICogbjI0ICogbjQxIC0gbjE0ICogbjIxICogbjQzICsgbjExICogbjI0ICogbjQzICsgbjEzICogbjIxICogbjQ0IC0gbjExICogbjIzICogbjQ0ICkgKiBkZXRJbnY7XHJcblx0XHR0ZVsgMTAgXSA9ICggbjEyICogbjI0ICogbjQxIC0gbjE0ICogbjIyICogbjQxICsgbjE0ICogbjIxICogbjQyIC0gbjExICogbjI0ICogbjQyIC0gbjEyICogbjIxICogbjQ0ICsgbjExICogbjIyICogbjQ0ICkgKiBkZXRJbnY7XHJcblx0XHR0ZVsgMTEgXSA9ICggbjEzICogbjIyICogbjQxIC0gbjEyICogbjIzICogbjQxIC0gbjEzICogbjIxICogbjQyICsgbjExICogbjIzICogbjQyICsgbjEyICogbjIxICogbjQzIC0gbjExICogbjIyICogbjQzICkgKiBkZXRJbnY7XHJcblxyXG5cdFx0dGVbIDEyIF0gPSB0MTQgKiBkZXRJbnY7XHJcblx0XHR0ZVsgMTMgXSA9ICggbjEzICogbjI0ICogbjMxIC0gbjE0ICogbjIzICogbjMxICsgbjE0ICogbjIxICogbjMzIC0gbjExICogbjI0ICogbjMzIC0gbjEzICogbjIxICogbjM0ICsgbjExICogbjIzICogbjM0ICkgKiBkZXRJbnY7XHJcblx0XHR0ZVsgMTQgXSA9ICggbjE0ICogbjIyICogbjMxIC0gbjEyICogbjI0ICogbjMxIC0gbjE0ICogbjIxICogbjMyICsgbjExICogbjI0ICogbjMyICsgbjEyICogbjIxICogbjM0IC0gbjExICogbjIyICogbjM0ICkgKiBkZXRJbnY7XHJcblx0XHR0ZVsgMTUgXSA9ICggbjEyICogbjIzICogbjMxIC0gbjEzICogbjIyICogbjMxICsgbjEzICogbjIxICogbjMyIC0gbjExICogbjIzICogbjMyIC0gbjEyICogbjIxICogbjMzICsgbjExICogbjIyICogbjMzICkgKiBkZXRJbnY7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNjYWxlOiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0dmFyIHRlID0gdGhpcy5lbGVtZW50cztcclxuXHRcdHZhciB4ID0gdi54LCB5ID0gdi55LCB6ID0gdi56O1xyXG5cclxuXHRcdHRlWyAwIF0gKj0geDsgdGVbIDQgXSAqPSB5OyB0ZVsgOCBdICo9IHo7XHJcblx0XHR0ZVsgMSBdICo9IHg7IHRlWyA1IF0gKj0geTsgdGVbIDkgXSAqPSB6O1xyXG5cdFx0dGVbIDIgXSAqPSB4OyB0ZVsgNiBdICo9IHk7IHRlWyAxMCBdICo9IHo7XHJcblx0XHR0ZVsgMyBdICo9IHg7IHRlWyA3IF0gKj0geTsgdGVbIDExIF0gKj0gejtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcbiAgICBzZXRUcmFuc2xhdGUgOmZ1bmN0aW9uKHgsIHksIHopIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuZWxlbWVudHM7XHJcbiAgICAgICAgZVswXSA9IDE7ICBlWzRdID0gMDsgIGVbOF0gID0gMDsgIGVbMTJdID0geDtcclxuICAgICAgICBlWzFdID0gMDsgIGVbNV0gPSAxOyAgZVs5XSAgPSAwOyAgZVsxM10gPSB5O1xyXG4gICAgICAgIGVbMl0gPSAwOyAgZVs2XSA9IDA7ICBlWzEwXSA9IDE7ICBlWzE0XSA9IHo7XHJcbiAgICAgICAgZVszXSA9IDA7ICBlWzddID0gMDsgIGVbMTFdID0gMDsgIGVbMTVdID0gMTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcblxyXG4gICAgdHJhbnNsYXRlIDpmdW5jdGlvbih4LCB5LCB6KSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLmVsZW1lbnRzO1xyXG4gICAgICAgIGVbMTJdICs9IGVbMF0gKiB4ICsgZVs0XSAqIHkgKyBlWzhdICAqIHo7XHJcbiAgICAgICAgZVsxM10gKz0gZVsxXSAqIHggKyBlWzVdICogeSArIGVbOV0gICogejtcclxuICAgICAgICBlWzE0XSArPSBlWzJdICogeCArIGVbNl0gKiB5ICsgZVsxMF0gKiB6O1xyXG4gICAgICAgIGVbMTVdICs9IGVbM10gKiB4ICsgZVs3XSAqIHkgKyBlWzExXSAqIHo7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFJvdGF0ZSA6ZnVuY3Rpb24oYW5nbGUsIHgsIHksIHopIHtcclxuICAgICAgICB2YXIgZSwgcywgYywgbGVuLCBybGVuLCBuYywgeHksIHl6LCB6eCwgeHMsIHlzLCB6cztcclxuXHJcbiAgICAgICAgYW5nbGUgPSBNYXRoLlBJICogYW5nbGUgLyAxODA7XHJcbiAgICAgICAgZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG4gICAgICAgIHMgPSBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICAgICAgYyA9IE1hdGguY29zKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgaWYgKDAgIT09IHggJiYgMCA9PT0geSAmJiAwID09PSB6KSB7XHJcbiAgICAgICAgICAgIC8vIFJvdGF0aW9uIGFyb3VuZCBYIGF4aXNcclxuICAgICAgICAgICAgaWYgKHggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzID0gLXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZVswXSA9IDE7ICBlWzRdID0gMDsgIGVbIDhdID0gMDsgIGVbMTJdID0gMDtcclxuICAgICAgICAgICAgZVsxXSA9IDA7ICBlWzVdID0gYzsgIGVbIDldID0tczsgIGVbMTNdID0gMDtcclxuICAgICAgICAgICAgZVsyXSA9IDA7ICBlWzZdID0gczsgIGVbMTBdID0gYzsgIGVbMTRdID0gMDtcclxuICAgICAgICAgICAgZVszXSA9IDA7ICBlWzddID0gMDsgIGVbMTFdID0gMDsgIGVbMTVdID0gMTtcclxuICAgICAgICB9IGVsc2UgaWYgKDAgPT09IHggJiYgMCAhPT0geSAmJiAwID09PSB6KSB7XHJcbiAgICAgICAgICAgIC8vIFJvdGF0aW9uIGFyb3VuZCBZIGF4aXNcclxuICAgICAgICAgICAgaWYgKHkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzID0gLXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZVswXSA9IGM7ICBlWzRdID0gMDsgIGVbIDhdID0gczsgIGVbMTJdID0gMDtcclxuICAgICAgICAgICAgZVsxXSA9IDA7ICBlWzVdID0gMTsgIGVbIDldID0gMDsgIGVbMTNdID0gMDtcclxuICAgICAgICAgICAgZVsyXSA9LXM7ICBlWzZdID0gMDsgIGVbMTBdID0gYzsgIGVbMTRdID0gMDtcclxuICAgICAgICAgICAgZVszXSA9IDA7ICBlWzddID0gMDsgIGVbMTFdID0gMDsgIGVbMTVdID0gMTtcclxuICAgICAgICB9IGVsc2UgaWYgKDAgPT09IHggJiYgMCA9PT0geSAmJiAwICE9PSB6KSB7XHJcbiAgICAgICAgICAgIC8vIFJvdGF0aW9uIGFyb3VuZCBaIGF4aXNcclxuICAgICAgICAgICAgaWYgKHogPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzID0gLXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZVswXSA9IGM7ICBlWzRdID0tczsgIGVbIDhdID0gMDsgIGVbMTJdID0gMDtcclxuICAgICAgICAgICAgZVsxXSA9IHM7ICBlWzVdID0gYzsgIGVbIDldID0gMDsgIGVbMTNdID0gMDtcclxuICAgICAgICAgICAgZVsyXSA9IDA7ICBlWzZdID0gMDsgIGVbMTBdID0gMTsgIGVbMTRdID0gMDtcclxuICAgICAgICAgICAgZVszXSA9IDA7ICBlWzddID0gMDsgIGVbMTFdID0gMDsgIGVbMTVdID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSb3RhdGlvbiBhcm91bmQgYW5vdGhlciBheGlzXHJcbiAgICAgICAgICAgIGxlbiA9IE1hdGguc3FydCh4KnggKyB5KnkgKyB6KnopO1xyXG4gICAgICAgICAgICBpZiAobGVuICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBybGVuID0gMSAvIGxlbjtcclxuICAgICAgICAgICAgICAgIHggKj0gcmxlbjtcclxuICAgICAgICAgICAgICAgIHkgKj0gcmxlbjtcclxuICAgICAgICAgICAgICAgIHogKj0gcmxlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuYyA9IDEgLSBjO1xyXG4gICAgICAgICAgICB4eSA9IHggKiB5O1xyXG4gICAgICAgICAgICB5eiA9IHkgKiB6O1xyXG4gICAgICAgICAgICB6eCA9IHogKiB4O1xyXG4gICAgICAgICAgICB4cyA9IHggKiBzO1xyXG4gICAgICAgICAgICB5cyA9IHkgKiBzO1xyXG4gICAgICAgICAgICB6cyA9IHogKiBzO1xyXG5cclxuICAgICAgICAgICAgZVsgMF0gPSB4KngqbmMgKyAgYztcclxuICAgICAgICAgICAgZVsgMV0gPSB4eSAqbmMgKyB6cztcclxuICAgICAgICAgICAgZVsgMl0gPSB6eCAqbmMgLSB5cztcclxuICAgICAgICAgICAgZVsgM10gPSAwO1xyXG5cclxuICAgICAgICAgICAgZVsgNF0gPSB4eSAqbmMgLSB6cztcclxuICAgICAgICAgICAgZVsgNV0gPSB5KnkqbmMgKyAgYztcclxuICAgICAgICAgICAgZVsgNl0gPSB5eiAqbmMgKyB4cztcclxuICAgICAgICAgICAgZVsgN10gPSAwO1xyXG5cclxuICAgICAgICAgICAgZVsgOF0gPSB6eCAqbmMgKyB5cztcclxuICAgICAgICAgICAgZVsgOV0gPSB5eiAqbmMgLSB4cztcclxuICAgICAgICAgICAgZVsxMF0gPSB6KnoqbmMgKyAgYztcclxuICAgICAgICAgICAgZVsxMV0gPSAwO1xyXG5cclxuICAgICAgICAgICAgZVsxMl0gPSAwO1xyXG4gICAgICAgICAgICBlWzEzXSA9IDA7XHJcbiAgICAgICAgICAgIGVbMTRdID0gMDtcclxuICAgICAgICAgICAgZVsxNV0gPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG5cclxuICAgIHJvdGF0ZSA6ZnVuY3Rpb24oYW5nbGUsIHgsIHksIHopIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25jYXQobmV3IE1hdHJpeDQoKS5zZXRSb3RhdGUoYW5nbGUsIHgsIHksIHopKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0TG9va0F0IDpmdW5jdGlvbihleWVYLCBleWVZLCBleWVaLCBjZW50ZXJYLCBjZW50ZXJZLCBjZW50ZXJaLCB1cFgsIHVwWSwgdXBaKSB7XHJcbiAgICAgICAgdmFyIGUsIGZ4LCBmeSwgZnosIHJsZiwgc3gsIHN5LCBzeiwgcmxzLCB1eCwgdXksIHV6O1xyXG5cclxuICAgICAgICBmeCA9IGNlbnRlclggLSBleWVYO1xyXG4gICAgICAgIGZ5ID0gY2VudGVyWSAtIGV5ZVk7XHJcbiAgICAgICAgZnogPSBjZW50ZXJaIC0gZXllWjtcclxuXHJcbiAgICAgICAgLy8gTm9ybWFsaXplIGYuXHJcbiAgICAgICAgcmxmID0gMSAvIE1hdGguc3FydChmeCpmeCArIGZ5KmZ5ICsgZnoqZnopO1xyXG4gICAgICAgIGZ4ICo9IHJsZjtcclxuICAgICAgICBmeSAqPSBybGY7XHJcbiAgICAgICAgZnogKj0gcmxmO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgY3Jvc3MgcHJvZHVjdCBvZiBmIGFuZCB1cC5cclxuICAgICAgICBzeCA9IGZ5ICogdXBaIC0gZnogKiB1cFk7XHJcbiAgICAgICAgc3kgPSBmeiAqIHVwWCAtIGZ4ICogdXBaO1xyXG4gICAgICAgIHN6ID0gZnggKiB1cFkgLSBmeSAqIHVwWDtcclxuXHJcbiAgICAgICAgLy8gTm9ybWFsaXplIHMuXHJcbiAgICAgICAgcmxzID0gMSAvIE1hdGguc3FydChzeCpzeCArIHN5KnN5ICsgc3oqc3opO1xyXG4gICAgICAgIHN4ICo9IHJscztcclxuICAgICAgICBzeSAqPSBybHM7XHJcbiAgICAgICAgc3ogKj0gcmxzO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgY3Jvc3MgcHJvZHVjdCBvZiBzIGFuZCBmLlxyXG4gICAgICAgIHV4ID0gc3kgKiBmeiAtIHN6ICogZnk7XHJcbiAgICAgICAgdXkgPSBzeiAqIGZ4IC0gc3ggKiBmejtcclxuICAgICAgICB1eiA9IHN4ICogZnkgLSBzeSAqIGZ4O1xyXG5cclxuICAgICAgICAvLyBTZXQgdG8gdGhpcy5cclxuICAgICAgICBlID0gdGhpcy5lbGVtZW50cztcclxuICAgICAgICBlWzBdID0gc3g7XHJcbiAgICAgICAgZVsxXSA9IHV4O1xyXG4gICAgICAgIGVbMl0gPSAtZng7XHJcbiAgICAgICAgZVszXSA9IDA7XHJcblxyXG4gICAgICAgIGVbNF0gPSBzeTtcclxuICAgICAgICBlWzVdID0gdXk7XHJcbiAgICAgICAgZVs2XSA9IC1meTtcclxuICAgICAgICBlWzddID0gMDtcclxuXHJcbiAgICAgICAgZVs4XSA9IHN6O1xyXG4gICAgICAgIGVbOV0gPSB1ejtcclxuICAgICAgICBlWzEwXSA9IC1mejtcclxuICAgICAgICBlWzExXSA9IDA7XHJcblxyXG4gICAgICAgIGVbMTJdID0gMDtcclxuICAgICAgICBlWzEzXSA9IDA7XHJcbiAgICAgICAgZVsxNF0gPSAwO1xyXG4gICAgICAgIGVbMTVdID0gMTtcclxuXHJcbiAgICAgICAgLy8gVHJhbnNsYXRlLlxyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZSgtZXllWCwgLWV5ZVksIC1leWVaKTtcclxuICAgIH0sXHJcblxyXG4gICAgbG9va0F0MiA6ZnVuY3Rpb24oZXllWCwgZXllWSwgZXllWiwgY2VudGVyWCwgY2VudGVyWSwgY2VudGVyWiwgdXBYLCB1cFksIHVwWikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmNhdChuZXcgTWF0cml4NCgpLnNldExvb2tBdChleWVYLCBleWVZLCBleWVaLCBjZW50ZXJYLCBjZW50ZXJZLCBjZW50ZXJaLCB1cFgsIHVwWSwgdXBaKSk7XHJcbiAgICB9LFxyXG5cclxuXHRnZXRNYXhTY2FsZU9uQXhpczogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG5cdFx0dmFyIHNjYWxlWFNxID0gdGVbIDAgXSAqIHRlWyAwIF0gKyB0ZVsgMSBdICogdGVbIDEgXSArIHRlWyAyIF0gKiB0ZVsgMiBdO1xyXG5cdFx0dmFyIHNjYWxlWVNxID0gdGVbIDQgXSAqIHRlWyA0IF0gKyB0ZVsgNSBdICogdGVbIDUgXSArIHRlWyA2IF0gKiB0ZVsgNiBdO1xyXG5cdFx0dmFyIHNjYWxlWlNxID0gdGVbIDggXSAqIHRlWyA4IF0gKyB0ZVsgOSBdICogdGVbIDkgXSArIHRlWyAxMCBdICogdGVbIDEwIF07XHJcblxyXG5cdFx0cmV0dXJuIE1hdGguc3FydCggTWF0aC5tYXgoIHNjYWxlWFNxLCBzY2FsZVlTcSwgc2NhbGVaU3EgKSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtYWtlVHJhbnNsYXRpb246IGZ1bmN0aW9uICggeCwgeSwgeiApIHtcclxuXHJcblx0XHR0aGlzLnNldChcclxuXHJcblx0XHRcdDEsIDAsIDAsIHgsXHJcblx0XHRcdDAsIDEsIDAsIHksXHJcblx0XHRcdDAsIDAsIDEsIHosXHJcblx0XHRcdDAsIDAsIDAsIDFcclxuXHJcblx0XHQpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtYWtlUm90YXRpb25YOiBmdW5jdGlvbiAoIHRoZXRhICkge1xyXG5cclxuXHRcdHZhciBjID0gTWF0aC5jb3MoIHRoZXRhICksIHMgPSBNYXRoLnNpbiggdGhldGEgKTtcclxuXHJcblx0XHR0aGlzLnNldChcclxuXHJcblx0XHRcdDEsIDAsIDAsIDAsXHJcblx0XHRcdDAsIGMsIC0gcywgMCxcclxuXHRcdFx0MCwgcywgYywgMCxcclxuXHRcdFx0MCwgMCwgMCwgMVxyXG5cclxuXHRcdCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1ha2VSb3RhdGlvblk6IGZ1bmN0aW9uICggdGhldGEgKSB7XHJcblxyXG5cdFx0dmFyIGMgPSBNYXRoLmNvcyggdGhldGEgKSwgcyA9IE1hdGguc2luKCB0aGV0YSApO1xyXG5cclxuXHRcdHRoaXMuc2V0KFxyXG5cclxuXHRcdFx0IGMsIDAsIHMsIDAsXHJcblx0XHRcdCAwLCAxLCAwLCAwLFxyXG5cdFx0XHQtIHMsIDAsIGMsIDAsXHJcblx0XHRcdCAwLCAwLCAwLCAxXHJcblxyXG5cdFx0KTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0bWFrZVJvdGF0aW9uWjogZnVuY3Rpb24gKCB0aGV0YSApIHtcclxuXHJcblx0XHR2YXIgYyA9IE1hdGguY29zKCB0aGV0YSApLCBzID0gTWF0aC5zaW4oIHRoZXRhICk7XHJcblxyXG5cdFx0dGhpcy5zZXQoXHJcblxyXG5cdFx0XHRjLCAtIHMsIDAsIDAsXHJcblx0XHRcdHMsIGMsIDAsIDAsXHJcblx0XHRcdDAsIDAsIDEsIDAsXHJcblx0XHRcdDAsIDAsIDAsIDFcclxuXHJcblx0XHQpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtYWtlUm90YXRpb25BeGlzOiBmdW5jdGlvbiAoIGF4aXMsIGFuZ2xlICkge1xyXG5cclxuXHRcdC8vIEJhc2VkIG9uIGh0dHA6Ly93d3cuZ2FtZWRldi5uZXQvcmVmZXJlbmNlL2FydGljbGVzL2FydGljbGUxMTk5LmFzcFxyXG5cclxuXHRcdHZhciBjID0gTWF0aC5jb3MoIGFuZ2xlICk7XHJcblx0XHR2YXIgcyA9IE1hdGguc2luKCBhbmdsZSApO1xyXG5cdFx0dmFyIHQgPSAxIC0gYztcclxuXHRcdHZhciB4ID0gYXhpcy54LCB5ID0gYXhpcy55LCB6ID0gYXhpcy56O1xyXG5cdFx0dmFyIHR4ID0gdCAqIHgsIHR5ID0gdCAqIHk7XHJcblxyXG5cdFx0dGhpcy5zZXQoXHJcblxyXG5cdFx0XHR0eCAqIHggKyBjLCB0eCAqIHkgLSBzICogeiwgdHggKiB6ICsgcyAqIHksIDAsXHJcblx0XHRcdHR4ICogeSArIHMgKiB6LCB0eSAqIHkgKyBjLCB0eSAqIHogLSBzICogeCwgMCxcclxuXHRcdFx0dHggKiB6IC0gcyAqIHksIHR5ICogeiArIHMgKiB4LCB0ICogeiAqIHogKyBjLCAwLFxyXG5cdFx0XHQwLCAwLCAwLCAxXHJcblxyXG5cdFx0KTtcclxuXHJcblx0XHQgcmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1ha2VTY2FsZTogZnVuY3Rpb24gKCB4LCB5LCB6ICkge1xyXG5cclxuXHRcdHRoaXMuc2V0KFxyXG5cclxuXHRcdFx0eCwgMCwgMCwgMCxcclxuXHRcdFx0MCwgeSwgMCwgMCxcclxuXHRcdFx0MCwgMCwgeiwgMCxcclxuXHRcdFx0MCwgMCwgMCwgMVxyXG5cclxuXHRcdCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1ha2VTaGVhcjogZnVuY3Rpb24gKCB4LCB5LCB6ICkge1xyXG5cclxuXHRcdHRoaXMuc2V0KFxyXG5cclxuXHRcdFx0MSwgeSwgeiwgMCxcclxuXHRcdFx0eCwgMSwgeiwgMCxcclxuXHRcdFx0eCwgeSwgMSwgMCxcclxuXHRcdFx0MCwgMCwgMCwgMVxyXG5cclxuXHRcdCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNvbXBvc2U6IGZ1bmN0aW9uICggcG9zaXRpb24sIHF1YXRlcm5pb24sIHNjYWxlICkge1xyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG5cdFx0dmFyIHggPSBxdWF0ZXJuaW9uLl94LCB5ID0gcXVhdGVybmlvbi5feSwgeiA9IHF1YXRlcm5pb24uX3osIHcgPSBxdWF0ZXJuaW9uLl93O1xyXG5cdFx0dmFyIHgyID0geCArIHgsXHR5MiA9IHkgKyB5LCB6MiA9IHogKyB6O1xyXG5cdFx0dmFyIHh4ID0geCAqIHgyLCB4eSA9IHggKiB5MiwgeHogPSB4ICogejI7XHJcblx0XHR2YXIgeXkgPSB5ICogeTIsIHl6ID0geSAqIHoyLCB6eiA9IHogKiB6MjtcclxuXHRcdHZhciB3eCA9IHcgKiB4Miwgd3kgPSB3ICogeTIsIHd6ID0gdyAqIHoyO1xyXG5cclxuXHRcdHZhciBzeCA9IHNjYWxlLngsIHN5ID0gc2NhbGUueSwgc3ogPSBzY2FsZS56O1xyXG5cclxuXHQgICAgICAgIHRlWyAwIF0gPSAoIDEgLSAoIHl5ICsgenogKSApICogc3g7XHJcblx0ICAgICAgICB0ZVsgMSBdID0gKCB4eSArIHd6ICkgKiBzeDtcclxuXHQgICAgICAgIHRlWyAyIF0gPSAoIHh6IC0gd3kgKSAqIHN4O1xyXG5cdCAgICAgICAgdGVbIDMgXSA9IDA7XHJcblxyXG5cdCAgICAgICAgdGVbIDQgXSA9ICggeHkgLSB3eiApICogc3k7XHJcblx0ICAgICAgICB0ZVsgNSBdID0gKCAxIC0gKCB4eCArIHp6ICkgKSAqIHN5O1xyXG5cdCAgICAgICAgdGVbIDYgXSA9ICggeXogKyB3eCApICogc3k7XHJcblx0ICAgICAgICB0ZVsgNyBdID0gMDtcclxuXHJcblx0ICAgICAgICB0ZVsgOCBdID0gKCB4eiArIHd5ICkgKiBzejtcclxuXHQgICAgICAgIHRlWyA5IF0gPSAoIHl6IC0gd3ggKSAqIHN6O1xyXG5cdCAgICAgICAgdGVbIDEwIF0gPSAoIDEgLSAoIHh4ICsgeXkgKSApICogc3o7XHJcblx0ICAgICAgICB0ZVsgMTEgXSA9IDA7XHJcblxyXG5cdCAgICAgICAgdGVbIDEyIF0gPSBwb3NpdGlvbi54O1xyXG5cdCAgICAgICAgdGVbIDEzIF0gPSBwb3NpdGlvbi55O1xyXG5cdCAgICAgICAgdGVbIDE0IF0gPSBwb3NpdGlvbi56O1xyXG5cdCAgICAgICAgdGVbIDE1IF0gPSAxO1xyXG5cclxuXHQgICAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRkZWNvbXBvc2U6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdmVjdG9yID0gbmV3IFZlY3RvcjMoKTtcclxuXHRcdHZhciBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiBkZWNvbXBvc2UoIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBzY2FsZSApIHtcclxuXHJcblx0XHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG5cdFx0XHR2YXIgc3ggPSB2ZWN0b3Iuc2V0KCB0ZVsgMCBdLCB0ZVsgMSBdLCB0ZVsgMiBdICkubGVuZ3RoKCk7XHJcblx0XHRcdHZhciBzeSA9IHZlY3Rvci5zZXQoIHRlWyA0IF0sIHRlWyA1IF0sIHRlWyA2IF0gKS5sZW5ndGgoKTtcclxuXHRcdFx0dmFyIHN6ID0gdmVjdG9yLnNldCggdGVbIDggXSwgdGVbIDkgXSwgdGVbIDEwIF0gKS5sZW5ndGgoKTtcclxuXHJcblx0XHRcdC8vIGlmIGRldGVybWluZSBpcyBuZWdhdGl2ZSwgd2UgbmVlZCB0byBpbnZlcnQgb25lIHNjYWxlXHJcblx0XHRcdHZhciBkZXQgPSB0aGlzLmRldGVybWluYW50KCk7XHJcblx0XHRcdGlmICggZGV0IDwgMCApIHN4ID0gLSBzeDtcclxuXHJcblx0XHRcdHBvc2l0aW9uLnggPSB0ZVsgMTIgXTtcclxuXHRcdFx0cG9zaXRpb24ueSA9IHRlWyAxMyBdO1xyXG5cdFx0XHRwb3NpdGlvbi56ID0gdGVbIDE0IF07XHJcblxyXG5cdFx0XHQvLyBzY2FsZSB0aGUgcm90YXRpb24gcGFydFxyXG5cdFx0XHRtYXRyaXguY29weSggdGhpcyApO1xyXG5cclxuXHRcdFx0dmFyIGludlNYID0gMSAvIHN4O1xyXG5cdFx0XHR2YXIgaW52U1kgPSAxIC8gc3k7XHJcblx0XHRcdHZhciBpbnZTWiA9IDEgLyBzejtcclxuXHJcblx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMCBdICo9IGludlNYO1xyXG5cdFx0XHRtYXRyaXguZWxlbWVudHNbIDEgXSAqPSBpbnZTWDtcclxuXHRcdFx0bWF0cml4LmVsZW1lbnRzWyAyIF0gKj0gaW52U1g7XHJcblxyXG5cdFx0XHRtYXRyaXguZWxlbWVudHNbIDQgXSAqPSBpbnZTWTtcclxuXHRcdFx0bWF0cml4LmVsZW1lbnRzWyA1IF0gKj0gaW52U1k7XHJcblx0XHRcdG1hdHJpeC5lbGVtZW50c1sgNiBdICo9IGludlNZO1xyXG5cclxuXHRcdFx0bWF0cml4LmVsZW1lbnRzWyA4IF0gKj0gaW52U1o7XHJcblx0XHRcdG1hdHJpeC5lbGVtZW50c1sgOSBdICo9IGludlNaO1xyXG5cdFx0XHRtYXRyaXguZWxlbWVudHNbIDEwIF0gKj0gaW52U1o7XHJcblxyXG5cdFx0XHRxdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeCggbWF0cml4ICk7XHJcblxyXG5cdFx0XHRzY2FsZS54ID0gc3g7XHJcblx0XHRcdHNjYWxlLnkgPSBzeTtcclxuXHRcdFx0c2NhbGUueiA9IHN6O1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSgpLFxyXG5cclxuXHRtYWtlUGVyc3BlY3RpdmU6IGZ1bmN0aW9uICggbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLCBuZWFyLCBmYXIgKSB7XHJcblxyXG5cdFx0aWYgKCBmYXIgPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdGNvbnNvbGUud2FybiggJ0NPT0wuTWF0cml4NDogLm1ha2VQZXJzcGVjdGl2ZSgpIGhhcyBiZWVuIHJlZGVmaW5lZCBhbmQgaGFzIGEgbmV3IHNpZ25hdHVyZS4gUGxlYXNlIGNoZWNrIHRoZSBkb2NzLicgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIHRlID0gdGhpcy5lbGVtZW50cztcclxuXHRcdHZhciB4ID0gMiAqIG5lYXIgLyAoIHJpZ2h0IC0gbGVmdCApO1xyXG5cdFx0dmFyIHkgPSAyICogbmVhciAvICggdG9wIC0gYm90dG9tICk7XHJcblxyXG5cdFx0dmFyIGEgPSAoIHJpZ2h0ICsgbGVmdCApIC8gKCByaWdodCAtIGxlZnQgKTtcclxuXHRcdHZhciBiID0gKCB0b3AgKyBib3R0b20gKSAvICggdG9wIC0gYm90dG9tICk7XHJcblx0XHR2YXIgYyA9IC0gKCBmYXIgKyBuZWFyICkgLyAoIGZhciAtIG5lYXIgKTtcclxuXHRcdHZhciBkID0gLSAyICogZmFyICogbmVhciAvICggZmFyIC0gbmVhciApO1xyXG5cclxuXHRcdHRlWyAwIF0gPSB4O1x0dGVbIDQgXSA9IDA7XHR0ZVsgOCBdID0gYTtcdHRlWyAxMiBdID0gMDtcclxuXHRcdHRlWyAxIF0gPSAwO1x0dGVbIDUgXSA9IHk7XHR0ZVsgOSBdID0gYjtcdHRlWyAxMyBdID0gMDtcclxuXHRcdHRlWyAyIF0gPSAwO1x0dGVbIDYgXSA9IDA7XHR0ZVsgMTAgXSA9IGM7XHR0ZVsgMTQgXSA9IGQ7XHJcblx0XHR0ZVsgMyBdID0gMDtcdHRlWyA3IF0gPSAwO1x0dGVbIDExIF0gPSAtIDE7XHR0ZVsgMTUgXSA9IDA7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1ha2VPcnRob2dyYXBoaWM6IGZ1bmN0aW9uICggbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLCBuZWFyLCBmYXIgKSB7XHJcblxyXG5cdFx0dmFyIHRlID0gdGhpcy5lbGVtZW50cztcclxuXHRcdHZhciB3ID0gMS4wIC8gKCByaWdodCAtIGxlZnQgKTtcclxuXHRcdHZhciBoID0gMS4wIC8gKCB0b3AgLSBib3R0b20gKTtcclxuXHRcdHZhciBwID0gMS4wIC8gKCBmYXIgLSBuZWFyICk7XHJcblxyXG5cdFx0dmFyIHggPSAoIHJpZ2h0ICsgbGVmdCApICogdztcclxuXHRcdHZhciB5ID0gKCB0b3AgKyBib3R0b20gKSAqIGg7XHJcblx0XHR2YXIgeiA9ICggZmFyICsgbmVhciApICogcDtcclxuXHJcblx0XHR0ZVsgMCBdID0gMiAqIHc7XHR0ZVsgNCBdID0gMDtcdHRlWyA4IF0gPSAwO1x0dGVbIDEyIF0gPSAtIHg7XHJcblx0XHR0ZVsgMSBdID0gMDtcdHRlWyA1IF0gPSAyICogaDtcdHRlWyA5IF0gPSAwO1x0dGVbIDEzIF0gPSAtIHk7XHJcblx0XHR0ZVsgMiBdID0gMDtcdHRlWyA2IF0gPSAwO1x0dGVbIDEwIF0gPSAtIDIgKiBwO1x0dGVbIDE0IF0gPSAtIHo7XHJcblx0XHR0ZVsgMyBdID0gMDtcdHRlWyA3IF0gPSAwO1x0dGVbIDExIF0gPSAwO1x0dGVbIDE1IF0gPSAxO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRlcXVhbHM6IGZ1bmN0aW9uICggbWF0cml4ICkge1xyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblx0XHR2YXIgbWUgPSBtYXRyaXguZWxlbWVudHM7XHJcblxyXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgMTY7IGkgKysgKSB7XHJcblxyXG5cdFx0XHRpZiAoIHRlWyBpIF0gIT09IG1lWyBpIF0gKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cclxuXHR9LFxyXG5cclxuXHRmcm9tQXJyYXk6IGZ1bmN0aW9uICggYXJyYXksIG9mZnNldCApIHtcclxuXHJcblx0XHRpZiAoIG9mZnNldCA9PT0gdW5kZWZpbmVkICkgb2Zmc2V0ID0gMDtcclxuXHJcblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCAxNjsgaSArKyApIHtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudHNbIGkgXSA9IGFycmF5WyBpICsgb2Zmc2V0IF07XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHR0b0FycmF5OiBmdW5jdGlvbiAoIGFycmF5LCBvZmZzZXQgKSB7XHJcblxyXG5cdFx0aWYgKCBhcnJheSA9PT0gdW5kZWZpbmVkICkgYXJyYXkgPSBbXTtcclxuXHRcdGlmICggb2Zmc2V0ID09PSB1bmRlZmluZWQgKSBvZmZzZXQgPSAwO1xyXG5cclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblxyXG5cdFx0YXJyYXlbIG9mZnNldCBdID0gdGVbIDAgXTtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyAxIF0gPSB0ZVsgMSBdO1xyXG5cdFx0YXJyYXlbIG9mZnNldCArIDIgXSA9IHRlWyAyIF07XHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgMyBdID0gdGVbIDMgXTtcclxuXHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgNCBdID0gdGVbIDQgXTtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyA1IF0gPSB0ZVsgNSBdO1xyXG5cdFx0YXJyYXlbIG9mZnNldCArIDYgXSA9IHRlWyA2IF07XHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgNyBdID0gdGVbIDcgXTtcclxuXHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgOCBdID0gdGVbIDggXTtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyA5IF0gPSB0ZVsgOSBdO1xyXG5cdFx0YXJyYXlbIG9mZnNldCArIDEwIF0gPSB0ZVsgMTAgXTtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyAxMSBdID0gdGVbIDExIF07XHJcblxyXG5cdFx0YXJyYXlbIG9mZnNldCArIDEyIF0gPSB0ZVsgMTIgXTtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyAxMyBdID0gdGVbIDEzIF07XHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgMTQgXSA9IHRlWyAxNCBdO1xyXG5cdFx0YXJyYXlbIG9mZnNldCArIDE1IF0gPSB0ZVsgMTUgXTtcclxuXHJcblx0XHRyZXR1cm4gYXJyYXk7XHJcblxyXG5cdH1cclxuXHJcbn0gKTtcclxuXHJcblxyXG5leHBvcnQgeyBNYXRyaXg0IH07XHJcbiIsImltcG9ydCB7IFF1YXRlcm5pb24gfSBmcm9tICcuL1F1YXRlcm5pb24uanMnO1xyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAnLi9WZWN0b3IzLmpzJztcclxuaW1wb3J0IHsgTWF0cml4NCB9IGZyb20gJy4vTWF0cml4NC5qcyc7XHJcbmltcG9ydCB7IF9NYXRoIH0gZnJvbSAnLi9NYXRoLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIEV1bGVyKCB4LCB5LCB6LCBvcmRlciApIHtcclxuXHJcblx0dGhpcy5feCA9IHggfHwgMDtcclxuXHR0aGlzLl95ID0geSB8fCAwO1xyXG5cdHRoaXMuX3ogPSB6IHx8IDA7XHJcblx0dGhpcy5fb3JkZXIgPSBvcmRlciB8fCBFdWxlci5EZWZhdWx0T3JkZXI7XHJcblxyXG59XHJcblxyXG5FdWxlci5Sb3RhdGlvbk9yZGVycyA9IFsgJ1hZWicsICdZWlgnLCAnWlhZJywgJ1haWScsICdZWFonLCAnWllYJyBdO1xyXG5cclxuRXVsZXIuRGVmYXVsdE9yZGVyID0gJ1hZWic7XHJcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyggRXVsZXIucHJvdG90eXBlLCB7XHJcblxyXG5cdHg6IHtcclxuXHJcblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLl94O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy5feCA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdHk6IHtcclxuXHJcblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLl95O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy5feSA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdHo6IHtcclxuXHJcblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLl96O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy5feiA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdG9yZGVyOiB7XHJcblxyXG5cdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5fb3JkZXI7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XHJcblxyXG5cdFx0XHR0aGlzLl9vcmRlciA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcbn0gKTtcclxuXHJcbk9iamVjdC5hc3NpZ24oIEV1bGVyLnByb3RvdHlwZSwge1xyXG5cclxuXHRpc0V1bGVyOiB0cnVlLFxyXG5cclxuXHRzZXQ6IGZ1bmN0aW9uICggeCwgeSwgeiwgb3JkZXIgKSB7XHJcblxyXG5cdFx0dGhpcy5feCA9IHg7XHJcblx0XHR0aGlzLl95ID0geTtcclxuXHRcdHRoaXMuX3ogPSB6O1xyXG5cdFx0dGhpcy5fb3JkZXIgPSBvcmRlciB8fCB0aGlzLl9vcmRlcjtcclxuXHJcblx0XHR0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0Y2xvbmU6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoIHRoaXMuX3gsIHRoaXMuX3ksIHRoaXMuX3osIHRoaXMuX29yZGVyICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNvcHk6IGZ1bmN0aW9uICggZXVsZXIgKSB7XHJcblxyXG5cdFx0dGhpcy5feCA9IGV1bGVyLl94O1xyXG5cdFx0dGhpcy5feSA9IGV1bGVyLl95O1xyXG5cdFx0dGhpcy5feiA9IGV1bGVyLl96O1xyXG5cdFx0dGhpcy5fb3JkZXIgPSBldWxlci5fb3JkZXI7XHJcblxyXG5cdFx0dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldEZyb21Sb3RhdGlvbk1hdHJpeDogZnVuY3Rpb24gKCBtLCBvcmRlciwgdXBkYXRlICkge1xyXG5cclxuXHRcdHZhciBjbGFtcCA9IF9NYXRoLmNsYW1wO1xyXG5cclxuXHRcdC8vIGFzc3VtZXMgdGhlIHVwcGVyIDN4MyBvZiBtIGlzIGEgcHVyZSByb3RhdGlvbiBtYXRyaXggKGkuZSwgdW5zY2FsZWQpXHJcblxyXG5cdFx0dmFyIHRlID0gbS5lbGVtZW50cztcclxuXHRcdHZhciBtMTEgPSB0ZVsgMCBdLCBtMTIgPSB0ZVsgNCBdLCBtMTMgPSB0ZVsgOCBdO1xyXG5cdFx0dmFyIG0yMSA9IHRlWyAxIF0sIG0yMiA9IHRlWyA1IF0sIG0yMyA9IHRlWyA5IF07XHJcblx0XHR2YXIgbTMxID0gdGVbIDIgXSwgbTMyID0gdGVbIDYgXSwgbTMzID0gdGVbIDEwIF07XHJcblxyXG5cdFx0b3JkZXIgPSBvcmRlciB8fCB0aGlzLl9vcmRlcjtcclxuXHJcblx0XHRpZiAoIG9yZGVyID09PSAnWFlaJyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3kgPSBNYXRoLmFzaW4oIGNsYW1wKCBtMTMsIC0gMSwgMSApICk7XHJcblxyXG5cdFx0XHRpZiAoIE1hdGguYWJzKCBtMTMgKSA8IDAuOTk5OTkgKSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3ggPSBNYXRoLmF0YW4yKCAtIG0yMywgbTMzICk7XHJcblx0XHRcdFx0dGhpcy5feiA9IE1hdGguYXRhbjIoIC0gbTEyLCBtMTEgKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3ggPSBNYXRoLmF0YW4yKCBtMzIsIG0yMiApO1xyXG5cdFx0XHRcdHRoaXMuX3ogPSAwO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gZWxzZSBpZiAoIG9yZGVyID09PSAnWVhaJyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3ggPSBNYXRoLmFzaW4oIC0gY2xhbXAoIG0yMywgLSAxLCAxICkgKTtcclxuXHJcblx0XHRcdGlmICggTWF0aC5hYnMoIG0yMyApIDwgMC45OTk5OSApIHtcclxuXHJcblx0XHRcdFx0dGhpcy5feSA9IE1hdGguYXRhbjIoIG0xMywgbTMzICk7XHJcblx0XHRcdFx0dGhpcy5feiA9IE1hdGguYXRhbjIoIG0yMSwgbTIyICk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHR0aGlzLl95ID0gTWF0aC5hdGFuMiggLSBtMzEsIG0xMSApO1xyXG5cdFx0XHRcdHRoaXMuX3ogPSAwO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gZWxzZSBpZiAoIG9yZGVyID09PSAnWlhZJyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3ggPSBNYXRoLmFzaW4oIGNsYW1wKCBtMzIsIC0gMSwgMSApICk7XHJcblxyXG5cdFx0XHRpZiAoIE1hdGguYWJzKCBtMzIgKSA8IDAuOTk5OTkgKSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3kgPSBNYXRoLmF0YW4yKCAtIG0zMSwgbTMzICk7XHJcblx0XHRcdFx0dGhpcy5feiA9IE1hdGguYXRhbjIoIC0gbTEyLCBtMjIgKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3kgPSAwO1xyXG5cdFx0XHRcdHRoaXMuX3ogPSBNYXRoLmF0YW4yKCBtMjEsIG0xMSApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gZWxzZSBpZiAoIG9yZGVyID09PSAnWllYJyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3kgPSBNYXRoLmFzaW4oIC0gY2xhbXAoIG0zMSwgLSAxLCAxICkgKTtcclxuXHJcblx0XHRcdGlmICggTWF0aC5hYnMoIG0zMSApIDwgMC45OTk5OSApIHtcclxuXHJcblx0XHRcdFx0dGhpcy5feCA9IE1hdGguYXRhbjIoIG0zMiwgbTMzICk7XHJcblx0XHRcdFx0dGhpcy5feiA9IE1hdGguYXRhbjIoIG0yMSwgbTExICk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHR0aGlzLl94ID0gMDtcclxuXHRcdFx0XHR0aGlzLl96ID0gTWF0aC5hdGFuMiggLSBtMTIsIG0yMiApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gZWxzZSBpZiAoIG9yZGVyID09PSAnWVpYJyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3ogPSBNYXRoLmFzaW4oIGNsYW1wKCBtMjEsIC0gMSwgMSApICk7XHJcblxyXG5cdFx0XHRpZiAoIE1hdGguYWJzKCBtMjEgKSA8IDAuOTk5OTkgKSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3ggPSBNYXRoLmF0YW4yKCAtIG0yMywgbTIyICk7XHJcblx0XHRcdFx0dGhpcy5feSA9IE1hdGguYXRhbjIoIC0gbTMxLCBtMTEgKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3ggPSAwO1xyXG5cdFx0XHRcdHRoaXMuX3kgPSBNYXRoLmF0YW4yKCBtMTMsIG0zMyApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gZWxzZSBpZiAoIG9yZGVyID09PSAnWFpZJyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3ogPSBNYXRoLmFzaW4oIC0gY2xhbXAoIG0xMiwgLSAxLCAxICkgKTtcclxuXHJcblx0XHRcdGlmICggTWF0aC5hYnMoIG0xMiApIDwgMC45OTk5OSApIHtcclxuXHJcblx0XHRcdFx0dGhpcy5feCA9IE1hdGguYXRhbjIoIG0zMiwgbTIyICk7XHJcblx0XHRcdFx0dGhpcy5feSA9IE1hdGguYXRhbjIoIG0xMywgbTExICk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHR0aGlzLl94ID0gTWF0aC5hdGFuMiggLSBtMjMsIG0zMyApO1xyXG5cdFx0XHRcdHRoaXMuX3kgPSAwO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLkV1bGVyOiAuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCkgZ2l2ZW4gdW5zdXBwb3J0ZWQgb3JkZXI6ICcgKyBvcmRlciApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vcmRlciA9IG9yZGVyO1xyXG5cclxuXHRcdGlmICggdXBkYXRlICE9PSBmYWxzZSApIHRoaXMub25DaGFuZ2VDYWxsYmFjaygpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRGcm9tUXVhdGVybmlvbjogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiBzZXRGcm9tUXVhdGVybmlvbiggcSwgb3JkZXIsIHVwZGF0ZSApIHtcclxuXHJcblx0XHRcdG1hdHJpeC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbiggcSApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCBtYXRyaXgsIG9yZGVyLCB1cGRhdGUgKTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHR9KCksXHJcblxyXG5cdHNldEZyb21WZWN0b3IzOiBmdW5jdGlvbiAoIHYsIG9yZGVyICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnNldCggdi54LCB2LnksIHYueiwgb3JkZXIgfHwgdGhpcy5fb3JkZXIgKTtcclxuXHJcblx0fSxcclxuXHJcblx0cmVvcmRlcjogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdC8vIFdBUk5JTkc6IHRoaXMgZGlzY2FyZHMgcmV2b2x1dGlvbiBpbmZvcm1hdGlvbiAtYmhvdXN0b25cclxuXHJcblx0XHR2YXIgcSA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcblxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHJlb3JkZXIoIG5ld09yZGVyICkge1xyXG5cclxuXHRcdFx0cS5zZXRGcm9tRXVsZXIoIHRoaXMgKTtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzLnNldEZyb21RdWF0ZXJuaW9uKCBxLCBuZXdPcmRlciApO1xyXG5cclxuXHRcdH07XHJcblxyXG5cdH0oKSxcclxuXHJcblx0ZXF1YWxzOiBmdW5jdGlvbiAoIGV1bGVyICkge1xyXG5cclxuXHRcdHJldHVybiAoIGV1bGVyLl94ID09PSB0aGlzLl94ICkgJiYgKCBldWxlci5feSA9PT0gdGhpcy5feSApICYmICggZXVsZXIuX3ogPT09IHRoaXMuX3ogKSAmJiAoIGV1bGVyLl9vcmRlciA9PT0gdGhpcy5fb3JkZXIgKTtcclxuXHJcblx0fSxcclxuXHJcblx0ZnJvbUFycmF5OiBmdW5jdGlvbiAoIGFycmF5ICkge1xyXG5cclxuXHRcdHRoaXMuX3ggPSBhcnJheVsgMCBdO1xyXG5cdFx0dGhpcy5feSA9IGFycmF5WyAxIF07XHJcblx0XHR0aGlzLl96ID0gYXJyYXlbIDIgXTtcclxuXHRcdGlmICggYXJyYXlbIDMgXSAhPT0gdW5kZWZpbmVkICkgdGhpcy5fb3JkZXIgPSBhcnJheVsgMyBdO1xyXG5cclxuXHRcdHRoaXMub25DaGFuZ2VDYWxsYmFjaygpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHR0b0FycmF5OiBmdW5jdGlvbiAoIGFycmF5LCBvZmZzZXQgKSB7XHJcblxyXG5cdFx0aWYgKCBhcnJheSA9PT0gdW5kZWZpbmVkICkgYXJyYXkgPSBbXTtcclxuXHRcdGlmICggb2Zmc2V0ID09PSB1bmRlZmluZWQgKSBvZmZzZXQgPSAwO1xyXG5cclxuXHRcdGFycmF5WyBvZmZzZXQgXSA9IHRoaXMuX3g7XHJcblx0XHRhcnJheVsgb2Zmc2V0ICsgMSBdID0gdGhpcy5feTtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyAyIF0gPSB0aGlzLl96O1xyXG5cdFx0YXJyYXlbIG9mZnNldCArIDMgXSA9IHRoaXMuX29yZGVyO1xyXG5cclxuXHRcdHJldHVybiBhcnJheTtcclxuXHJcblx0fSxcclxuXHJcblx0dG9WZWN0b3IzOiBmdW5jdGlvbiAoIG9wdGlvbmFsUmVzdWx0ICkge1xyXG5cclxuXHRcdGlmICggb3B0aW9uYWxSZXN1bHQgKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gb3B0aW9uYWxSZXN1bHQuc2V0KCB0aGlzLl94LCB0aGlzLl95LCB0aGlzLl96ICk7XHJcblxyXG5cdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdHJldHVybiBuZXcgVmVjdG9yMyggdGhpcy5feCwgdGhpcy5feSwgdGhpcy5feiApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0b25DaGFuZ2U6IGZ1bmN0aW9uICggY2FsbGJhY2sgKSB7XHJcblxyXG5cdFx0dGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG9uQ2hhbmdlQ2FsbGJhY2s6IGZ1bmN0aW9uICgpIHt9XHJcblxyXG59ICk7XHJcblxyXG5cclxuZXhwb3J0IHsgRXVsZXIgfTtcclxuIiwiXHJcbmltcG9ydCBNYXRlcmlhbCBmcm9tIFwiLi4vbWF0ZXJpYWwvTWF0ZXJpYWwuanNcIjtcclxuaW1wb3J0IHtNYXRyaXg0fSBmcm9tIFwiLi4vbWF0aC9NYXRyaXg0XCI7XHJcbmltcG9ydCB7RXVsZXJ9IGZyb20gXCIuLi9tYXRoL0V1bGVyXCI7XHJcbmltcG9ydCB7UXVhdGVybmlvbn0gZnJvbSBcIi4uL21hdGgvUXVhdGVybmlvblwiO1xyXG5pbXBvcnQge1ZlY3RvcjN9IGZyb20gXCIuLi9tYXRoL1ZlY3RvcjNcIjtcclxuXHJcblxyXG5cclxuXHJcbmNsYXNzIE1lc2gge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW0pIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSAnTWVzaCc7XHJcbiAgICAgICAgcGFyYW0gPSBwYXJhbSB8fCB7fTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gcGFyYW0uZ2VvbWV0cnk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IHBhcmFtLm1hdGVyaWFsIHx8IG5ldyBNYXRlcmlhbCgpO1xyXG5cclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcGFyYW0ucG9zaXRpb24gfHwgWzAsMCwwXTtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gcGFyYW0ucm90YXRpb24gfHwgbmV3IEV1bGVyKCk7XHJcbiAgICAgICAgdGhpcy5zY2FsZSA9IHBhcmFtLnNjYWxlIHx8IFsxLDEsMV07XHJcblxyXG4gICAgICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUV1bGVyKCB0aGlzLnJvdGF0aW9uLCBmYWxzZSApO1xyXG5cclxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLm1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXhXb3JsZCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaXgoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2V0UG9zaXRpb24ocG9zaXRpb24pe1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJvdGF0aW9uKHJvdGF0aW9uQXJyYXkpe1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSBuZXcgRXVsZXIoKS5mcm9tQXJyYXkocm90YXRpb25BcnJheSk7XHJcbiAgICAgICAgdmFyIHF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpLnNldEZyb21FdWxlciggdGhpcy5yb3RhdGlvbiwgZmFsc2UgKTtcclxuICAgICAgICB0aGlzLnNldFF1YXRlcm5pb24ocXVhdGVybmlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UXVhdGVybmlvbihxdWF0ZXJuaW9uKXtcclxuXHJcbiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gcXVhdGVybmlvbjtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uLnNldEZyb21RdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uLCB1bmRlZmluZWQsIGZhbHNlICk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaXgoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTY2FsZShzY2FsZUFycmF5KXtcclxuICAgICAgICB0aGlzLnNjYWxlID0gc2NhbGVBcnJheTtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU1hdHJpeCgpe1xyXG4gICAgICAgIHRoaXMubWF0cml4LmNvbXBvc2UoIG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHRoaXMucG9zaXRpb24pLCB0aGlzLnF1YXRlcm5pb24sIG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHRoaXMuc2NhbGUpICk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaXhXb3JsZCAoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRNYXRyaXgobWF0cml4KXtcclxuICAgICAgICB0aGlzLm1hdHJpeCA9IG1hdHJpeDtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkICgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU1hdHJpeFdvcmxkICgpIHtcclxuXHJcbiAgICAgICAgLy8gdGhpcy51cGRhdGVNYXRyaXgoKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnBhcmVudCA9PT0gbnVsbCApIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWF0cml4V29ybGQgPSB0aGlzLm1hdHJpeC5jbG9uZSgpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKCB0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCwgdGhpcy5tYXRyaXggKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNoaWxkcmVuTWF0cml4V29ybGQoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0V29ybGRQb3NpdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIHRhcmdldCA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMudXBkYXRlTWF0cml4V29ybGQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tTWF0cml4UG9zaXRpb24oIHRoaXMubWF0cml4V29ybGQgKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ2hpbGRyZW5NYXRyaXhXb3JsZCgpe1xyXG5cclxuICAgICAgICBmb3IodmFyIGkgaW4gdGhpcy5jaGlsZHJlbil7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5baV0udXBkYXRlTWF0cml4V29ybGQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNsb25lKCl7XHJcbiAgICAgICAgdmFyIG1lc2ggPSBuZXcgTWVzaCh7XHJcbiAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LmNsb25lKCksXHJcbiAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLm1hdGVyaWFsLmNsb25lKCksXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLnNsaWNlKDApLFxyXG4gICAgICAgICAgICByb3RhdGlvbjogdGhpcy5yb3RhdGlvbi5jbG9uZSgpLFxyXG4gICAgICAgICAgICBzY2FsZTogdGhpcy5zY2FsZS5zbGljZSgwKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzaDtcclxuICAgIH1cclxuXHJcbiAgICBhZGQobWVzaCl7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKG1lc2gpO1xyXG4gICAgICAgIG1lc2gucGFyZW50ID0gdGhpcztcclxuICAgICAgICBtZXNoLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJvdGF0ZU9uQXhpcyAoYXhpcywgYW5nbGUpIHtcclxuXHJcbiAgICAgICAgdmFyIHExID0gbmV3IFF1YXRlcm5pb24oKTtcclxuICAgICAgICBxMS5zZXRGcm9tQXhpc0FuZ2xlKCBheGlzLCBhbmdsZSApO1xyXG4gICAgICAgIHZhciBxdWF0ZXJuaW9uID0gdGhpcy5xdWF0ZXJuaW9uLm11bHRpcGx5KCBxMSApO1xyXG4gICAgICAgIHRoaXMuc2V0UXVhdGVybmlvbihxdWF0ZXJuaW9uKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcm90YXRlWCAoYW5nbGUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5yb3RhdGVPbkF4aXMoIG5ldyBWZWN0b3IzKDEsMCwwKSwgYW5nbGUgKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcm90YXRlWSAoYW5nbGUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5yb3RhdGVPbkF4aXMoIG5ldyBWZWN0b3IzKDAsMSwwKSwgYW5nbGUgKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcm90YXRlWiAoYW5nbGUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5yb3RhdGVPbkF4aXMoIG5ldyBWZWN0b3IzKDAsMCwxKSwgYW5nbGUgKTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNZXNoO1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxMCwgR29vZ2xlIEluYy5cclxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XHJcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcclxuICogbWV0OlxyXG4gKlxyXG4gKiAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxyXG4gKiBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXHJcbiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmVcclxuICogY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxyXG4gKiBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlXHJcbiAqIGRpc3RyaWJ1dGlvbi5cclxuICogICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xyXG4gKiBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxyXG4gKiB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxyXG4gKlxyXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXHJcbiAqIFwiQVMgSVNcIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1RcclxuICogTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXHJcbiAqIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXHJcbiAqIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLFxyXG4gKiBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXHJcbiAqIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxyXG4gKiBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTllcclxuICogVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxyXG4gKiAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0VcclxuICogT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgVGhpcyBmaWxlIGNvbnRhaW5zIGZ1bmN0aW9ucyBldmVyeSB3ZWJnbCBwcm9ncmFtIHdpbGwgbmVlZFxyXG4gKiBhIHZlcnNpb24gb2Ygb25lIHdheSBvciBhbm90aGVyLlxyXG4gKlxyXG4gKiBJbnN0ZWFkIG9mIHNldHRpbmcgdXAgYSBjb250ZXh0IG1hbnVhbGx5IGl0IGlzIHJlY29tbWVuZGVkIHRvXHJcbiAqIHVzZS4gVGhpcyB3aWxsIGNoZWNrIGZvciBzdWNjZXNzIG9yIGZhaWx1cmUuIE9uIGZhaWx1cmUgaXRcclxuICogd2lsbCBhdHRlbXB0IHRvIHByZXNlbnQgYW4gYXBwcm9yaWF0ZSBtZXNzYWdlIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiAgICAgICBnbCA9IFdlYkdMVXRpbHMuc2V0dXBXZWJHTChjYW52YXMpO1xyXG4gKlxyXG4gKiBGb3IgYW5pbWF0ZWQgV2ViR0wgYXBwcyB1c2Ugb2Ygc2V0VGltZW91dCBvciBzZXRJbnRlcnZhbCBhcmVcclxuICogZGlzY291cmFnZWQuIEl0IGlzIHJlY29tbWVuZGVkIHlvdSBzdHJ1Y3R1cmUgeW91ciByZW5kZXJpbmdcclxuICogbG9vcCBsaWtlIHRoaXMuXHJcbiAqXHJcbiAqICAgICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICogICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlciwgY2FudmFzKTtcclxuICpcclxuICogICAgICAgICAvLyBkbyByZW5kZXJpbmdcclxuICogICAgICAgICAuLi5cclxuICogICAgICAgfVxyXG4gKiAgICAgICByZW5kZXIoKTtcclxuICpcclxuICogVGhpcyB3aWxsIGNhbGwgeW91ciByZW5kZXJpbmcgZnVuY3Rpb24gdXAgdG8gdGhlIHJlZnJlc2ggcmF0ZVxyXG4gKiBvZiB5b3VyIGRpc3BsYXkgYnV0IHdpbGwgc3RvcCByZW5kZXJpbmcgaWYgeW91ciBhcHAgaXMgbm90XHJcbiAqIHZpc2libGUuXHJcbiAqL1xyXG5cclxudmFyIFdlYkdMVXRpbHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBIVExNIGZvciBhIGZhaWx1cmUgbWVzc2FnZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FudmFzQ29udGFpbmVySWQgaWQgb2YgY29udGFpbmVyIG9mIHRoXHJcbiAqICAgICAgICBjYW52YXMuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGh0bWwuXHJcbiAqL1xyXG52YXIgbWFrZUZhaWxIVE1MID0gZnVuY3Rpb24obXNnKSB7XHJcbiAgcmV0dXJuICcnICtcclxuICAgICAgICAnPGRpdiBzdHlsZT1cIm1hcmdpbjogYXV0bzsgd2lkdGg6NTAwcHg7ei1pbmRleDoxMDAwMDttYXJnaW4tdG9wOjIwZW07dGV4dC1hbGlnbjpjZW50ZXI7XCI+JyArIG1zZyArICc8L2Rpdj4nO1xyXG4gIHJldHVybiAnJyArXHJcbiAgICAnPHRhYmxlIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogIzhDRTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTtcIj48dHI+JyArXHJcbiAgICAnPHRkIGFsaWduPVwiY2VudGVyXCI+JyArXHJcbiAgICAnPGRpdiBzdHlsZT1cImRpc3BsYXk6IHRhYmxlLWNlbGw7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XCI+JyArXHJcbiAgICAnPGRpdiBzdHlsZT1cIlwiPicgKyBtc2cgKyAnPC9kaXY+JyArXHJcbiAgICAnPC9kaXY+JyArXHJcbiAgICAnPC90ZD48L3RyPjwvdGFibGU+JztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNZXNhc2dlIGZvciBnZXR0aW5nIGEgd2ViZ2wgYnJvd3NlclxyXG4gKiBAdHlwZSB7c3RyaW5nfVxyXG4gKi9cclxudmFyIEdFVF9BX1dFQkdMX0JST1dTRVIgPSAnJyArXHJcbiAgJ1RoaXMgcGFnZSByZXF1aXJlcyBhIGJyb3dzZXIgdGhhdCBzdXBwb3J0cyBXZWJHTC48YnIvPicgK1xyXG4gICc8YSBocmVmPVwiaHR0cDovL2dldC53ZWJnbC5vcmdcIj5DbGljayBoZXJlIHRvIHVwZ3JhZGUgeW91ciBicm93c2VyLjwvYT4nO1xyXG5cclxuLyoqXHJcbiAqIE1lc2FzZ2UgZm9yIG5lZWQgYmV0dGVyIGhhcmR3YXJlXHJcbiAqIEB0eXBlIHtzdHJpbmd9XHJcbiAqL1xyXG52YXIgT1RIRVJfUFJPQkxFTSA9ICcnICtcclxuICBcIkl0IGRvZXNuJ3QgYXBwZWFyIHlvdXIgY29tcHV0ZXIgY2FuIHN1cHBvcnQgV2ViR0wuPGJyLz5cIiArXHJcbiAgJzxhIGhyZWY9XCJodHRwOi8vZ2V0LndlYmdsLm9yZ1wiPkNsaWNrIGhlcmUgZm9yIG1vcmUgaW5mb3JtYXRpb24uPC9hPic7XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHdlYmdsIGNvbnRleHQuIElmIGNyZWF0aW9uIGZhaWxzIGl0IHdpbGxcclxuICogY2hhbmdlIHRoZSBjb250ZW50cyBvZiB0aGUgY29udGFpbmVyIG9mIHRoZSA8Y2FudmFzPlxyXG4gKiB0YWcgdG8gYW4gZXJyb3IgbWVzc2FnZSB3aXRoIHRoZSBjb3JyZWN0IGxpbmtzIGZvciBXZWJHTC5cclxuICogQHBhcmFtIHtFbGVtZW50fSBjYW52YXMuIFRoZSBjYW52YXMgZWxlbWVudCB0byBjcmVhdGUgYVxyXG4gKiAgICAgY29udGV4dCBmcm9tLlxyXG4gKiBAcGFyYW0ge1dlYkdMQ29udGV4dENyZWF0aW9uQXR0aXJidXRlc30gb3B0X2F0dHJpYnMgQW55XHJcbiAqICAgICBjcmVhdGlvbiBhdHRyaWJ1dGVzIHlvdSB3YW50IHRvIHBhc3MgaW4uXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb246KG1zZyl9IG9wdF9vbkVycm9yIEFuIGZ1bmN0aW9uIHRvIGNhbGxcclxuICogICAgIGlmIHRoZXJlIGlzIGFuIGVycm9yIGR1cmluZyBjcmVhdGlvbi5cclxuICogQHJldHVybiB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBUaGUgY3JlYXRlZCBjb250ZXh0LlxyXG4gKi9cclxudmFyIHNldHVwV2ViR0wgPSBmdW5jdGlvbihjYW52YXMsIG9wdF9hdHRyaWJzLCBvcHRfb25FcnJvcikge1xyXG4gIGZ1bmN0aW9uIGhhbmRsZUNyZWF0aW9uRXJyb3IobXNnKSB7XHJcbiAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07XHJcbiAgICAvL3ZhciBjb250YWluZXIgPSBjYW52YXMucGFyZW50Tm9kZTtcclxuICAgIGlmIChjb250YWluZXIpIHtcclxuICAgICAgdmFyIHN0ciA9IHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgP1xyXG4gICAgICAgICAgIE9USEVSX1BST0JMRU0gOlxyXG4gICAgICAgICAgIEdFVF9BX1dFQkdMX0JST1dTRVI7XHJcbiAgICAgIGlmIChtc2cpIHtcclxuICAgICAgICBzdHIgKz0gXCI8YnIvPjxici8+U3RhdHVzOiBcIiArIG1zZztcclxuICAgICAgfVxyXG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gbWFrZUZhaWxIVE1MKHN0cik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgb3B0X29uRXJyb3IgPSBvcHRfb25FcnJvciB8fCBoYW5kbGVDcmVhdGlvbkVycm9yO1xyXG5cclxuICBpZiAoY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0Y3JlYXRpb25lcnJvclwiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgb3B0X29uRXJyb3IoZXZlbnQuc3RhdHVzTWVzc2FnZSk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gIH1cclxuICB2YXIgY29udGV4dCA9IGNyZWF0ZTNEQ29udGV4dChjYW52YXMsIG9wdF9hdHRyaWJzKTtcclxuICBpZiAoIWNvbnRleHQpIHtcclxuICAgIGlmICghd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICBvcHRfb25FcnJvcihcIlwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9wdF9vbkVycm9yKFwiXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNvbnRleHQ7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHdlYmdsIGNvbnRleHQuXHJcbiAqIEBwYXJhbSB7IUNhbnZhc30gY2FudmFzIFRoZSBjYW52YXMgdGFnIHRvIGdldCBjb250ZXh0XHJcbiAqICAgICBmcm9tLiBJZiBvbmUgaXMgbm90IHBhc3NlZCBpbiBvbmUgd2lsbCBiZSBjcmVhdGVkLlxyXG4gKiBAcmV0dXJuIHshV2ViR0xDb250ZXh0fSBUaGUgY3JlYXRlZCBjb250ZXh0LlxyXG4gKi9cclxudmFyIGNyZWF0ZTNEQ29udGV4dCA9IGZ1bmN0aW9uKGNhbnZhcywgb3B0X2F0dHJpYnMpIHtcclxuICB2YXIgbmFtZXMgPSBbXCJ3ZWJnbFwiLCBcImV4cGVyaW1lbnRhbC13ZWJnbFwiLCBcIndlYmtpdC0zZFwiLCBcIm1vei13ZWJnbFwiXTtcclxuICB2YXIgY29udGV4dCA9IG51bGw7XHJcbiAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IG5hbWVzLmxlbmd0aDsgKytpaSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2lpXSwgb3B0X2F0dHJpYnMpO1xyXG4gICAgfSBjYXRjaChlKSB7fVxyXG4gICAgaWYgKGNvbnRleHQpIHtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBjb250ZXh0O1xyXG59XHJcblxyXG5yZXR1cm4ge1xyXG4gIGNyZWF0ZTNEQ29udGV4dDogY3JlYXRlM0RDb250ZXh0LFxyXG4gIHNldHVwV2ViR0w6IHNldHVwV2ViR0xcclxufTtcclxufSgpO1xyXG5cclxuLyoqXHJcbiAqIFByb3ZpZGVzIHJlcXVlc3RBbmltYXRpb25GcmFtZSBpbiBhIGNyb3NzIGJyb3dzZXJcclxuICogd2F5LlxyXG4gKi9cclxuaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XHJcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IChmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgIHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgIGZ1bmN0aW9uKC8qIGZ1bmN0aW9uIEZyYW1lUmVxdWVzdENhbGxiYWNrICovIGNhbGxiYWNrLCAvKiBET01FbGVtZW50IEVsZW1lbnQgKi8gZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAvNjApO1xyXG4gICAgICAgICAgIH07XHJcbiAgfSkoKTtcclxufVxyXG5cclxuLyoqICogRVJSQVRBOiAnY2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJyByZW5hbWVkIHRvICdjYW5jZWxBbmltYXRpb25GcmFtZScgdG8gcmVmbGVjdCBhbiB1cGRhdGUgdG8gdGhlIFczQyBBbmltYXRpb24tVGltaW5nIFNwZWMuIFxyXG4gKiBcclxuICogQ2FuY2VscyBhbiBhbmltYXRpb24gZnJhbWUgcmVxdWVzdC4gXHJcbiAqIENoZWNrcyBmb3IgY3Jvc3MtYnJvd3NlciBzdXBwb3J0LCBmYWxscyBiYWNrIHRvIGNsZWFyVGltZW91dC4gXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSAgQW5pbWF0aW9uIGZyYW1lIHJlcXVlc3QuICovXHJcbmlmICghd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKSB7XHJcbiAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gKHdpbmRvdy5jYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1zQ2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1zQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vQ2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm9DYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFdlYkdMVXRpbHM7IiwiLy9Db3B5cmlnaHQgKGMpIDIwMDkgVGhlIENocm9taXVtIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxyXG4vL2ZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUuXHJcblxyXG4vLyBWYXJpb3VzIGZ1bmN0aW9ucyBmb3IgaGVscGluZyBkZWJ1ZyBXZWJHTCBhcHBzLlxyXG5cclxudmFyIFdlYkdMRGVidWdVdGlscyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuLyoqXHJcbiAqIFdyYXBwZWQgbG9nZ2luZyBmdW5jdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IG1zZyBNZXNzYWdlIHRvIGxvZy5cclxuICovXHJcbnZhciBsb2cgPSBmdW5jdGlvbihtc2cpIHtcclxuICBpZiAod2luZG93LmNvbnNvbGUgJiYgd2luZG93LmNvbnNvbGUubG9nKSB7XHJcbiAgICB3aW5kb3cuY29uc29sZS5sb2cobXNnKTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogV2hpY2ggYXJndWVtZW50cyBhcmUgZW51bXMuXHJcbiAqIEB0eXBlIHshT2JqZWN0LjxudW1iZXIsIHN0cmluZz59XHJcbiAqL1xyXG52YXIgZ2xWYWxpZEVudW1Db250ZXh0cyA9IHtcclxuXHJcbiAgLy8gR2VuZXJpYyBzZXR0ZXJzIGFuZCBnZXR0ZXJzXHJcblxyXG4gICdlbmFibGUnOiB7IDA6dHJ1ZSB9LFxyXG4gICdkaXNhYmxlJzogeyAwOnRydWUgfSxcclxuICAnZ2V0UGFyYW1ldGVyJzogeyAwOnRydWUgfSxcclxuXHJcbiAgLy8gUmVuZGVyaW5nXHJcblxyXG4gICdkcmF3QXJyYXlzJzogeyAwOnRydWUgfSxcclxuICAnZHJhd0VsZW1lbnRzJzogeyAwOnRydWUsIDI6dHJ1ZSB9LFxyXG5cclxuICAvLyBTaGFkZXJzXHJcblxyXG4gICdjcmVhdGVTaGFkZXInOiB7IDA6dHJ1ZSB9LFxyXG4gICdnZXRTaGFkZXJQYXJhbWV0ZXInOiB7IDE6dHJ1ZSB9LFxyXG4gICdnZXRQcm9ncmFtUGFyYW1ldGVyJzogeyAxOnRydWUgfSxcclxuXHJcbiAgLy8gVmVydGV4IGF0dHJpYnV0ZXNcclxuXHJcbiAgJ2dldFZlcnRleEF0dHJpYic6IHsgMTp0cnVlIH0sXHJcbiAgJ3ZlcnRleEF0dHJpYlBvaW50ZXInOiB7IDI6dHJ1ZSB9LFxyXG5cclxuICAvLyBUZXh0dXJlc1xyXG5cclxuICAnYmluZFRleHR1cmUnOiB7IDA6dHJ1ZSB9LFxyXG4gICdhY3RpdmVUZXh0dXJlJzogeyAwOnRydWUgfSxcclxuICAnZ2V0VGV4UGFyYW1ldGVyJzogeyAwOnRydWUsIDE6dHJ1ZSB9LFxyXG4gICd0ZXhQYXJhbWV0ZXJmJzogeyAwOnRydWUsIDE6dHJ1ZSB9LFxyXG4gICd0ZXhQYXJhbWV0ZXJpJzogeyAwOnRydWUsIDE6dHJ1ZSwgMjp0cnVlIH0sXHJcbiAgJ3RleEltYWdlMkQnOiB7IDA6dHJ1ZSwgMjp0cnVlLCA2OnRydWUsIDc6dHJ1ZSB9LFxyXG4gICd0ZXhTdWJJbWFnZTJEJzogeyAwOnRydWUsIDY6dHJ1ZSwgNzp0cnVlIH0sXHJcbiAgJ2NvcHlUZXhJbWFnZTJEJzogeyAwOnRydWUsIDI6dHJ1ZSB9LFxyXG4gICdjb3B5VGV4U3ViSW1hZ2UyRCc6IHsgMDp0cnVlIH0sXHJcbiAgJ2dlbmVyYXRlTWlwbWFwJzogeyAwOnRydWUgfSxcclxuXHJcbiAgLy8gQnVmZmVyIG9iamVjdHNcclxuXHJcbiAgJ2JpbmRCdWZmZXInOiB7IDA6dHJ1ZSB9LFxyXG4gICdidWZmZXJEYXRhJzogeyAwOnRydWUsIDI6dHJ1ZSB9LFxyXG4gICdidWZmZXJTdWJEYXRhJzogeyAwOnRydWUgfSxcclxuICAnZ2V0QnVmZmVyUGFyYW1ldGVyJzogeyAwOnRydWUsIDE6dHJ1ZSB9LFxyXG5cclxuICAvLyBSZW5kZXJidWZmZXJzIGFuZCBmcmFtZWJ1ZmZlcnNcclxuXHJcbiAgJ3BpeGVsU3RvcmVpJzogeyAwOnRydWUsIDE6dHJ1ZSB9LFxyXG4gICdyZWFkUGl4ZWxzJzogeyA0OnRydWUsIDU6dHJ1ZSB9LFxyXG4gICdiaW5kUmVuZGVyYnVmZmVyJzogeyAwOnRydWUgfSxcclxuICAnYmluZEZyYW1lYnVmZmVyJzogeyAwOnRydWUgfSxcclxuICAnY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyc6IHsgMDp0cnVlIH0sXHJcbiAgJ2ZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyJzogeyAwOnRydWUsIDE6dHJ1ZSwgMjp0cnVlIH0sXHJcbiAgJ2ZyYW1lYnVmZmVyVGV4dHVyZTJEJzogeyAwOnRydWUsIDE6dHJ1ZSwgMjp0cnVlIH0sXHJcbiAgJ2dldEZyYW1lYnVmZmVyQXR0YWNobWVudFBhcmFtZXRlcic6IHsgMDp0cnVlLCAxOnRydWUsIDI6dHJ1ZSB9LFxyXG4gICdnZXRSZW5kZXJidWZmZXJQYXJhbWV0ZXInOiB7IDA6dHJ1ZSwgMTp0cnVlIH0sXHJcbiAgJ3JlbmRlcmJ1ZmZlclN0b3JhZ2UnOiB7IDA6dHJ1ZSwgMTp0cnVlIH0sXHJcblxyXG4gIC8vIEZyYW1lIGJ1ZmZlciBvcGVyYXRpb25zIChjbGVhciwgYmxlbmQsIGRlcHRoIHRlc3QsIHN0ZW5jaWwpXHJcblxyXG4gICdjbGVhcic6IHsgMDp0cnVlIH0sXHJcbiAgJ2RlcHRoRnVuYyc6IHsgMDp0cnVlIH0sXHJcbiAgJ2JsZW5kRnVuYyc6IHsgMDp0cnVlLCAxOnRydWUgfSxcclxuICAnYmxlbmRGdW5jU2VwYXJhdGUnOiB7IDA6dHJ1ZSwgMTp0cnVlLCAyOnRydWUsIDM6dHJ1ZSB9LFxyXG4gICdibGVuZEVxdWF0aW9uJzogeyAwOnRydWUgfSxcclxuICAnYmxlbmRFcXVhdGlvblNlcGFyYXRlJzogeyAwOnRydWUsIDE6dHJ1ZSB9LFxyXG4gICdzdGVuY2lsRnVuYyc6IHsgMDp0cnVlIH0sXHJcbiAgJ3N0ZW5jaWxGdW5jU2VwYXJhdGUnOiB7IDA6dHJ1ZSwgMTp0cnVlIH0sXHJcbiAgJ3N0ZW5jaWxNYXNrU2VwYXJhdGUnOiB7IDA6dHJ1ZSB9LFxyXG4gICdzdGVuY2lsT3AnOiB7IDA6dHJ1ZSwgMTp0cnVlLCAyOnRydWUgfSxcclxuICAnc3RlbmNpbE9wU2VwYXJhdGUnOiB7IDA6dHJ1ZSwgMTp0cnVlLCAyOnRydWUsIDM6dHJ1ZSB9LFxyXG5cclxuICAvLyBDdWxsaW5nXHJcblxyXG4gICdjdWxsRmFjZSc6IHsgMDp0cnVlIH0sXHJcbiAgJ2Zyb250RmFjZSc6IHsgMDp0cnVlIH0sXHJcbn07XHJcblxyXG4vKipcclxuICogTWFwIG9mIG51bWJlcnMgdG8gbmFtZXMuXHJcbiAqIEB0eXBlIHtPYmplY3R9XHJcbiAqL1xyXG52YXIgZ2xFbnVtcyA9IG51bGw7XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZXMgdGhpcyBtb2R1bGUuIFNhZmUgdG8gY2FsbCBtb3JlIHRoYW4gb25jZS5cclxuICogQHBhcmFtIHshV2ViR0xSZW5kZXJpbmdDb250ZXh0fSBjdHggQSBXZWJHTCBjb250ZXh0LiBJZlxyXG4gKiAgICB5b3UgaGF2ZSBtb3JlIHRoYW4gb25lIGNvbnRleHQgaXQgZG9lc24ndCBtYXR0ZXIgd2hpY2ggb25lXHJcbiAqICAgIHlvdSBwYXNzIGluLCBpdCBpcyBvbmx5IHVzZWQgdG8gcHVsbCBvdXQgY29uc3RhbnRzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdChjdHgpIHtcclxuICBpZiAoZ2xFbnVtcyA9PSBudWxsKSB7XHJcbiAgICBnbEVudW1zID0geyB9O1xyXG4gICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIGN0eCkge1xyXG4gICAgICBpZiAodHlwZW9mIGN0eFtwcm9wZXJ0eU5hbWVdID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgZ2xFbnVtc1tjdHhbcHJvcGVydHlOYW1lXV0gPSBwcm9wZXJ0eU5hbWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgdGhlIHV0aWxzIGhhdmUgYmVlbiBpbml0aWFsaXplZC5cclxuICovXHJcbmZ1bmN0aW9uIGNoZWNrSW5pdCgpIHtcclxuICBpZiAoZ2xFbnVtcyA9PSBudWxsKSB7XHJcbiAgICB0aHJvdyAnV2ViR0xEZWJ1Z1V0aWxzLmluaXQoY3R4KSBub3QgY2FsbGVkJztcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgb3IgZmFsc2UgaWYgdmFsdWUgbWF0Y2hlcyBhbnkgV2ViR0wgZW51bVxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIGNoZWNrIGlmIGl0IG1pZ2h0IGJlIGFuIGVudW0uXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgbWF0Y2hlcyBvbmUgb2YgdGhlIFdlYkdMIGRlZmluZWQgZW51bXNcclxuICovXHJcbmZ1bmN0aW9uIG1pZ2h0QmVFbnVtKHZhbHVlKSB7XHJcbiAgY2hlY2tJbml0KCk7XHJcbiAgcmV0dXJuIChnbEVudW1zW3ZhbHVlXSAhPT0gdW5kZWZpbmVkKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgYW4gc3RyaW5nIHZlcnNpb24gb2YgYW4gV2ViR0wgZW51bS5cclxuICpcclxuICogRXhhbXBsZTpcclxuICogICB2YXIgc3RyID0gV2ViR0xEZWJ1Z1V0aWwuZ2xFbnVtVG9TdHJpbmcoY3R4LmdldEVycm9yKCkpO1xyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gcmV0dXJuIGFuIGVudW0gZm9yXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHN0cmluZyB2ZXJzaW9uIG9mIHRoZSBlbnVtLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2xFbnVtVG9TdHJpbmcodmFsdWUpIHtcclxuICBjaGVja0luaXQoKTtcclxuICB2YXIgbmFtZSA9IGdsRW51bXNbdmFsdWVdO1xyXG4gIHJldHVybiAobmFtZSAhPT0gdW5kZWZpbmVkKSA/IG5hbWUgOlxyXG4gICAgICAoXCIqVU5LTk9XTiBXZWJHTCBFTlVNICgweFwiICsgdmFsdWUudG9TdHJpbmcoMTYpICsgXCIpXCIpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc3RyaW5nIHZlcnNpb24gb2YgYSBXZWJHTCBhcmd1bWVudC5cclxuICogQXR0ZW1wdHMgdG8gY29udmVydCBlbnVtIGFyZ3VtZW50cyB0byBzdHJpbmdzLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZnVuY3Rpb25OYW1lIHRoZSBuYW1lIG9mIHRoZSBXZWJHTCBmdW5jdGlvbi5cclxuICogQHBhcmFtIHtudW1iZXJ9IGFyZ3VtZW50SW5keCB0aGUgaW5kZXggb2YgdGhlIGFyZ3VtZW50LlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgYXJndW1lbnQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHZhbHVlIGFzIGEgc3RyaW5nLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2xGdW5jdGlvbkFyZ1RvU3RyaW5nKGZ1bmN0aW9uTmFtZSwgYXJndW1lbnRJbmRleCwgdmFsdWUpIHtcclxuICB2YXIgZnVuY0luZm8gPSBnbFZhbGlkRW51bUNvbnRleHRzW2Z1bmN0aW9uTmFtZV07XHJcbiAgaWYgKGZ1bmNJbmZvICE9PSB1bmRlZmluZWQpIHtcclxuICAgIGlmIChmdW5jSW5mb1thcmd1bWVudEluZGV4XSkge1xyXG4gICAgICByZXR1cm4gZ2xFbnVtVG9TdHJpbmcodmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdpdmVuIGEgV2ViR0wgY29udGV4dCByZXR1cm5zIGEgd3JhcHBlZCBjb250ZXh0IHRoYXQgY2FsbHNcclxuICogZ2wuZ2V0RXJyb3IgYWZ0ZXIgZXZlcnkgY29tbWFuZCBhbmQgY2FsbHMgYSBmdW5jdGlvbiBpZiB0aGVcclxuICogcmVzdWx0IGlzIG5vdCBnbC5OT19FUlJPUi5cclxuICpcclxuICogQHBhcmFtIHshV2ViR0xSZW5kZXJpbmdDb250ZXh0fSBjdHggVGhlIHdlYmdsIGNvbnRleHQgdG9cclxuICogICAgICAgIHdyYXAuXHJcbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKGVyciwgZnVuY05hbWUsIGFyZ3MpOiB2b2lkfSBvcHRfb25FcnJvckZ1bmNcclxuICogICAgICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gZ2wuZ2V0RXJyb3IgcmV0dXJucyBhblxyXG4gKiAgICAgICAgZXJyb3IuIElmIG5vdCBzcGVjaWZpZWQgdGhlIGRlZmF1bHQgZnVuY3Rpb24gY2FsbHNcclxuICogICAgICAgIGNvbnNvbGUubG9nIHdpdGggYSBtZXNzYWdlLlxyXG4gKi9cclxuZnVuY3Rpb24gbWFrZURlYnVnQ29udGV4dChjdHgsIG9wdF9vbkVycm9yRnVuYykge1xyXG4gIGluaXQoY3R4KTtcclxuICBvcHRfb25FcnJvckZ1bmMgPSBvcHRfb25FcnJvckZ1bmMgfHwgZnVuY3Rpb24oZXJyLCBmdW5jdGlvbk5hbWUsIGFyZ3MpIHtcclxuICAgICAgICAvLyBhcHBhcmVudGx5IHdlIGNhbid0IGRvIGFyZ3Muam9pbihcIixcIik7XHJcbiAgICAgICAgdmFyIGFyZ1N0ciA9IFwiXCI7XHJcbiAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGFyZ3MubGVuZ3RoOyArK2lpKSB7XHJcbiAgICAgICAgICBhcmdTdHIgKz0gKChpaSA9PSAwKSA/ICcnIDogJywgJykgK1xyXG4gICAgICAgICAgICAgIGdsRnVuY3Rpb25BcmdUb1N0cmluZyhmdW5jdGlvbk5hbWUsIGlpLCBhcmdzW2lpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZyhcIldlYkdMIGVycm9yIFwiKyBnbEVudW1Ub1N0cmluZyhlcnIpICsgXCIgaW4gXCIrIGZ1bmN0aW9uTmFtZSArXHJcbiAgICAgICAgICAgIFwiKFwiICsgYXJnU3RyICsgXCIpXCIpO1xyXG4gICAgICB9O1xyXG5cclxuICAvLyBIb2xkcyBib29sZWFucyBmb3IgZWFjaCBHTCBlcnJvciBzbyBhZnRlciB3ZSBnZXQgdGhlIGVycm9yIG91cnNlbHZlc1xyXG4gIC8vIHdlIGNhbiBzdGlsbCByZXR1cm4gaXQgdG8gdGhlIGNsaWVudCBhcHAuXHJcbiAgdmFyIGdsRXJyb3JTaGFkb3cgPSB7IH07XHJcblxyXG4gIC8vIE1ha2VzIGEgZnVuY3Rpb24gdGhhdCBjYWxscyBhIFdlYkdMIGZ1bmN0aW9uIGFuZCB0aGVuIGNhbGxzIGdldEVycm9yLlxyXG4gIGZ1bmN0aW9uIG1ha2VFcnJvcldyYXBwZXIoY3R4LCBmdW5jdGlvbk5hbWUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHJlc3VsdCA9IGN0eFtmdW5jdGlvbk5hbWVdLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcclxuICAgICAgdmFyIGVyciA9IGN0eC5nZXRFcnJvcigpO1xyXG4gICAgICBpZiAoZXJyICE9IDApIHtcclxuICAgICAgICBnbEVycm9yU2hhZG93W2Vycl0gPSB0cnVlO1xyXG4gICAgICAgIG9wdF9vbkVycm9yRnVuYyhlcnIsIGZ1bmN0aW9uTmFtZSwgYXJndW1lbnRzKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIE1ha2UgYSBhbiBvYmplY3QgdGhhdCBoYXMgYSBjb3B5IG9mIGV2ZXJ5IHByb3BlcnR5IG9mIHRoZSBXZWJHTCBjb250ZXh0XHJcbiAgLy8gYnV0IHdyYXBzIGFsbCBmdW5jdGlvbnMuXHJcbiAgdmFyIHdyYXBwZXIgPSB7fTtcclxuICBmb3IgKHZhciBwcm9wZXJ0eU5hbWUgaW4gY3R4KSB7XHJcbiAgICBpZiAodHlwZW9mIGN0eFtwcm9wZXJ0eU5hbWVdID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgIHdyYXBwZXJbcHJvcGVydHlOYW1lXSA9IG1ha2VFcnJvcldyYXBwZXIoY3R4LCBwcm9wZXJ0eU5hbWUpO1xyXG4gICAgIH0gZWxzZSB7XHJcbiAgICAgICB3cmFwcGVyW3Byb3BlcnR5TmFtZV0gPSBjdHhbcHJvcGVydHlOYW1lXTtcclxuICAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBPdmVycmlkZSB0aGUgZ2V0RXJyb3IgZnVuY3Rpb24gd2l0aCBvbmUgdGhhdCByZXR1cm5zIG91ciBzYXZlZCByZXN1bHRzLlxyXG4gIHdyYXBwZXIuZ2V0RXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvciAodmFyIGVyciBpbiBnbEVycm9yU2hhZG93KSB7XHJcbiAgICAgIGlmIChnbEVycm9yU2hhZG93W2Vycl0pIHtcclxuICAgICAgICBnbEVycm9yU2hhZG93W2Vycl0gPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gZXJyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3R4Lk5PX0VSUk9SO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB3cmFwcGVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldFRvSW5pdGlhbFN0YXRlKGN0eCkge1xyXG4gIHZhciBudW1BdHRyaWJzID0gY3R4LmdldFBhcmFtZXRlcihjdHguTUFYX1ZFUlRFWF9BVFRSSUJTKTtcclxuICB2YXIgdG1wID0gY3R4LmNyZWF0ZUJ1ZmZlcigpO1xyXG4gIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIHRtcCk7XHJcbiAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IG51bUF0dHJpYnM7ICsraWkpIHtcclxuICAgIGN0eC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoaWkpO1xyXG4gICAgY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIoaWksIDQsIGN0eC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgY3R4LnZlcnRleEF0dHJpYjFmKGlpLCAwKTtcclxuICB9XHJcbiAgY3R4LmRlbGV0ZUJ1ZmZlcih0bXApO1xyXG5cclxuICB2YXIgbnVtVGV4dHVyZVVuaXRzID0gY3R4LmdldFBhcmFtZXRlcihjdHguTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO1xyXG4gIGZvciAodmFyIGlpID0gMDsgaWkgPCBudW1UZXh0dXJlVW5pdHM7ICsraWkpIHtcclxuICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIGlpKTtcclxuICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV9DVUJFX01BUCwgbnVsbCk7XHJcbiAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xyXG4gIH1cclxuXHJcbiAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwKTtcclxuICBjdHgudXNlUHJvZ3JhbShudWxsKTtcclxuICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICBjdHguYmluZEJ1ZmZlcihjdHguRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBudWxsKTtcclxuICBjdHguYmluZFJlbmRlcmJ1ZmZlcihjdHguUkVOREVSQlVGRkVSLCBudWxsKTtcclxuICBjdHguZGlzYWJsZShjdHguQkxFTkQpO1xyXG4gIGN0eC5kaXNhYmxlKGN0eC5DVUxMX0ZBQ0UpO1xyXG4gIGN0eC5kaXNhYmxlKGN0eC5ERVBUSF9URVNUKTtcclxuICBjdHguZGlzYWJsZShjdHguRElUSEVSKTtcclxuICBjdHguZGlzYWJsZShjdHguU0NJU1NPUl9URVNUKTtcclxuICBjdHguYmxlbmRDb2xvcigwLCAwLCAwLCAwKTtcclxuICBjdHguYmxlbmRFcXVhdGlvbihjdHguRlVOQ19BREQpO1xyXG4gIGN0eC5ibGVuZEZ1bmMoY3R4Lk9ORSwgY3R4LlpFUk8pO1xyXG4gIGN0eC5jbGVhckNvbG9yKDAsIDAsIDAsIDApO1xyXG4gIGN0eC5jbGVhckRlcHRoKDEpO1xyXG4gIGN0eC5jbGVhclN0ZW5jaWwoLTEpO1xyXG4gIGN0eC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgY3R4LmN1bGxGYWNlKGN0eC5CQUNLKTtcclxuICBjdHguZGVwdGhGdW5jKGN0eC5MRVNTKTtcclxuICBjdHguZGVwdGhNYXNrKHRydWUpO1xyXG4gIGN0eC5kZXB0aFJhbmdlKDAsIDEpO1xyXG4gIGN0eC5mcm9udEZhY2UoY3R4LkNDVyk7XHJcbiAgY3R4LmhpbnQoY3R4LkdFTkVSQVRFX01JUE1BUF9ISU5ULCBjdHguRE9OVF9DQVJFKTtcclxuICBjdHgubGluZVdpZHRoKDEpO1xyXG4gIGN0eC5waXhlbFN0b3JlaShjdHguUEFDS19BTElHTk1FTlQsIDQpO1xyXG4gIGN0eC5waXhlbFN0b3JlaShjdHguVU5QQUNLX0FMSUdOTUVOVCwgNCk7XHJcbiAgY3R4LnBpeGVsU3RvcmVpKGN0eC5VTlBBQ0tfRkxJUF9ZX1dFQkdMLCBmYWxzZSk7XHJcbiAgY3R4LnBpeGVsU3RvcmVpKGN0eC5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsIGZhbHNlKTtcclxuICAvLyBUT0RPOiBEZWxldGUgdGhpcyBJRi5cclxuICBpZiAoY3R4LlVOUEFDS19DT0xPUlNQQUNFX0NPTlZFUlNJT05fV0VCR0wpIHtcclxuICAgIGN0eC5waXhlbFN0b3JlaShjdHguVU5QQUNLX0NPTE9SU1BBQ0VfQ09OVkVSU0lPTl9XRUJHTCwgY3R4LkJST1dTRVJfREVGQVVMVF9XRUJHTCk7XHJcbiAgfVxyXG4gIGN0eC5wb2x5Z29uT2Zmc2V0KDAsIDApO1xyXG4gIGN0eC5zYW1wbGVDb3ZlcmFnZSgxLCBmYWxzZSk7XHJcbiAgY3R4LnNjaXNzb3IoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xyXG4gIGN0eC5zdGVuY2lsRnVuYyhjdHguQUxXQVlTLCAwLCAweEZGRkZGRkZGKTtcclxuICBjdHguc3RlbmNpbE1hc2soMHhGRkZGRkZGRik7XHJcbiAgY3R4LnN0ZW5jaWxPcChjdHguS0VFUCwgY3R4LktFRVAsIGN0eC5LRUVQKTtcclxuICBjdHgudmlld3BvcnQoMCwgMCwgY3R4LmNhbnZhcy5jbGllbnRXaWR0aCwgY3R4LmNhbnZhcy5jbGllbnRIZWlnaHQpO1xyXG4gIGN0eC5jbGVhcihjdHguQ09MT1JfQlVGRkVSX0JJVCB8IGN0eC5ERVBUSF9CVUZGRVJfQklUIHwgY3R4LlNURU5DSUxfQlVGRkVSX0JJVCk7XHJcblxyXG4gIC8vIFRPRE86IFRoaXMgc2hvdWxkIE5PVCBiZSBuZWVkZWQgYnV0IEZpcmVmb3ggZmFpbHMgd2l0aCAnaGludCdcclxuICB3aGlsZShjdHguZ2V0RXJyb3IoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMb3N0Q29udGV4dFNpbXVsYXRpbmdDb250ZXh0KGN0eCkge1xyXG4gIHZhciB3cmFwcGVyXyA9IHt9O1xyXG4gIHZhciBjb250ZXh0SWRfID0gMTtcclxuICB2YXIgY29udGV4dExvc3RfID0gZmFsc2U7XHJcbiAgdmFyIHJlc291cmNlSWRfID0gMDtcclxuICB2YXIgcmVzb3VyY2VEYl8gPSBbXTtcclxuICB2YXIgb25Mb3N0XyA9IHVuZGVmaW5lZDtcclxuICB2YXIgb25SZXN0b3JlZF8gPSB1bmRlZmluZWQ7XHJcbiAgdmFyIG5leHRPblJlc3RvcmVkXyA9IHVuZGVmaW5lZDtcclxuXHJcbiAgLy8gSG9sZHMgYm9vbGVhbnMgZm9yIGVhY2ggR0wgZXJyb3Igc28gY2FuIHNpbXVsYXRlIGVycm9ycy5cclxuICB2YXIgZ2xFcnJvclNoYWRvd18gPSB7IH07XHJcblxyXG4gIGZ1bmN0aW9uIGlzV2ViR0xPYmplY3Qob2JqKSB7XHJcbiAgICAvL3JldHVybiBmYWxzZTtcclxuICAgIHJldHVybiAob2JqIGluc3RhbmNlb2YgV2ViR0xCdWZmZXIgfHxcclxuICAgICAgICAgICAgb2JqIGluc3RhbmNlb2YgV2ViR0xGcmFtZWJ1ZmZlciB8fFxyXG4gICAgICAgICAgICBvYmogaW5zdGFuY2VvZiBXZWJHTFByb2dyYW0gfHxcclxuICAgICAgICAgICAgb2JqIGluc3RhbmNlb2YgV2ViR0xSZW5kZXJidWZmZXIgfHxcclxuICAgICAgICAgICAgb2JqIGluc3RhbmNlb2YgV2ViR0xTaGFkZXIgfHxcclxuICAgICAgICAgICAgb2JqIGluc3RhbmNlb2YgV2ViR0xUZXh0dXJlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrUmVzb3VyY2VzKGFyZ3MpIHtcclxuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBhcmdzLmxlbmd0aDsgKytpaSkge1xyXG4gICAgICB2YXIgYXJnID0gYXJnc1tpaV07XHJcbiAgICAgIGlmIChpc1dlYkdMT2JqZWN0KGFyZykpIHtcclxuICAgICAgICByZXR1cm4gYXJnLl9fd2ViZ2xEZWJ1Z0NvbnRleHRMb3N0SWRfXyA9PSBjb250ZXh0SWRfO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsZWFyRXJyb3JzKCkge1xyXG4gICAgdmFyIGsgPSBPYmplY3Qua2V5cyhnbEVycm9yU2hhZG93Xyk7XHJcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgay5sZW5ndGg7ICsraWkpIHtcclxuICAgICAgZGVsZXRlIGdsRXJyb3JTaGRvd19ba107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBNYWtlcyBhIGZ1bmN0aW9uIHRoYXQgc2ltdWxhdGVzIFdlYkdMIHdoZW4gb3V0IG9mIGNvbnRleHQuXHJcbiAgZnVuY3Rpb24gbWFrZUxvc3RDb250ZXh0V3JhcHBlcihjdHgsIGZ1bmN0aW9uTmFtZSkge1xyXG4gICAgdmFyIGYgPSBjdHhbZnVuY3Rpb25OYW1lXTtcclxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gT25seSBjYWxsIHRoZSBmdW5jdGlvbnMgaWYgdGhlIGNvbnRleHQgaXMgbm90IGxvc3QuXHJcbiAgICAgIGlmICghY29udGV4dExvc3RfKSB7XHJcbiAgICAgICAgaWYgKCFjaGVja1Jlc291cmNlcyhhcmd1bWVudHMpKSB7XHJcbiAgICAgICAgICBnbEVycm9yU2hhZG93X1tjdHguSU5WQUxJRF9PUEVSQVRJT05dID0gdHJ1ZTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGYuYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmb3IgKHZhciBwcm9wZXJ0eU5hbWUgaW4gY3R4KSB7XHJcbiAgICBpZiAodHlwZW9mIGN0eFtwcm9wZXJ0eU5hbWVdID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgIHdyYXBwZXJfW3Byb3BlcnR5TmFtZV0gPSBtYWtlTG9zdENvbnRleHRXcmFwcGVyKGN0eCwgcHJvcGVydHlOYW1lKTtcclxuICAgICB9IGVsc2Uge1xyXG4gICAgICAgd3JhcHBlcl9bcHJvcGVydHlOYW1lXSA9IGN0eFtwcm9wZXJ0eU5hbWVdO1xyXG4gICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1ha2VXZWJHTENvbnRleHRFdmVudChzdGF0dXNNZXNzYWdlKSB7XHJcbiAgICByZXR1cm4ge3N0YXR1c01lc3NhZ2U6IHN0YXR1c01lc3NhZ2V9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZnJlZVJlc291cmNlcygpIHtcclxuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCByZXNvdXJjZURiXy5sZW5ndGg7ICsraWkpIHtcclxuICAgICAgdmFyIHJlc291cmNlID0gcmVzb3VyY2VEYl9baWldO1xyXG4gICAgICBpZiAocmVzb3VyY2UgaW5zdGFuY2VvZiBXZWJHTEJ1ZmZlcikge1xyXG4gICAgICAgIGN0eC5kZWxldGVCdWZmZXIocmVzb3VyY2UpO1xyXG4gICAgICB9IGVsc2UgaWYgKHJlc291cmNlIGluc3RhbmNlb2YgV2ViY3R4RnJhbWVidWZmZXIpIHtcclxuICAgICAgICBjdHguZGVsZXRlRnJhbWVidWZmZXIocmVzb3VyY2UpO1xyXG4gICAgICB9IGVsc2UgaWYgKHJlc291cmNlIGluc3RhbmNlb2YgV2ViY3R4UHJvZ3JhbSkge1xyXG4gICAgICAgIGN0eC5kZWxldGVQcm9ncmFtKHJlc291cmNlKTtcclxuICAgICAgfSBlbHNlIGlmIChyZXNvdXJjZSBpbnN0YW5jZW9mIFdlYmN0eFJlbmRlcmJ1ZmZlcikge1xyXG4gICAgICAgIGN0eC5kZWxldGVSZW5kZXJidWZmZXIocmVzb3VyY2UpO1xyXG4gICAgICB9IGVsc2UgaWYgKHJlc291cmNlIGluc3RhbmNlb2YgV2ViY3R4U2hhZGVyKSB7XHJcbiAgICAgICAgY3R4LmRlbGV0ZVNoYWRlcihyZXNvdXJjZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAocmVzb3VyY2UgaW5zdGFuY2VvZiBXZWJjdHhUZXh0dXJlKSB7XHJcbiAgICAgICAgY3R4LmRlbGV0ZVRleHR1cmUocmVzb3VyY2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3cmFwcGVyXy5sb3NlQ29udGV4dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCFjb250ZXh0TG9zdF8pIHtcclxuICAgICAgY29udGV4dExvc3RfID0gdHJ1ZTtcclxuICAgICAgKytjb250ZXh0SWRfO1xyXG4gICAgICB3aGlsZSAoY3R4LmdldEVycm9yKCkpO1xyXG4gICAgICBjbGVhckVycm9ycygpO1xyXG4gICAgICBnbEVycm9yU2hhZG93X1tjdHguQ09OVEVYVF9MT1NUX1dFQkdMXSA9IHRydWU7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAob25Mb3N0Xykge1xyXG4gICAgICAgICAgICBvbkxvc3RfKG1ha2VXZWJHTENvbnRleHRFdmVudChcImNvbnRleHQgbG9zdFwiKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgd3JhcHBlcl8ucmVzdG9yZUNvbnRleHQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmIChjb250ZXh0TG9zdF8pIHtcclxuICAgICAgaWYgKG9uUmVzdG9yZWRfKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZnJlZVJlc291cmNlcygpO1xyXG4gICAgICAgICAgICByZXNldFRvSW5pdGlhbFN0YXRlKGN0eCk7XHJcbiAgICAgICAgICAgIGNvbnRleHRMb3N0XyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAob25SZXN0b3JlZF8pIHtcclxuICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBvblJlc3RvcmVkXztcclxuICAgICAgICAgICAgICBvblJlc3RvcmVkXyA9IG5leHRPblJlc3RvcmVkXztcclxuICAgICAgICAgICAgICBuZXh0T25SZXN0b3JlZF8gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgY2FsbGJhY2sobWFrZVdlYkdMQ29udGV4dEV2ZW50KFwiY29udGV4dCByZXN0b3JlZFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IFwiWW91IGNhbiBub3QgcmVzdG9yZSB0aGUgY29udGV4dCB3aXRob3V0IGEgbGlzdGVuZXJcIlxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gV3JhcCBhIGZldyBmdW5jdGlvbnMgc3BlY2lhbGx5LlxyXG4gIHdyYXBwZXJfLmdldEVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIWNvbnRleHRMb3N0Xykge1xyXG4gICAgICB2YXIgZXJyO1xyXG4gICAgICB3aGlsZSAoZXJyID0gY3R4LmdldEVycm9yKCkpIHtcclxuICAgICAgICBnbEVycm9yU2hhZG93X1tlcnJdID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgZXJyIGluIGdsRXJyb3JTaGFkb3dfKSB7XHJcbiAgICAgIGlmIChnbEVycm9yU2hhZG93X1tlcnJdKSB7XHJcbiAgICAgICAgZGVsZXRlIGdsRXJyb3JTaGFkb3dfW2Vycl07XHJcbiAgICAgICAgcmV0dXJuIGVycjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGN0eC5OT19FUlJPUjtcclxuICB9O1xyXG5cclxuICB2YXIgY3JlYXRpb25GdW5jdGlvbnMgPSBbXHJcbiAgICBcImNyZWF0ZUJ1ZmZlclwiLFxyXG4gICAgXCJjcmVhdGVGcmFtZWJ1ZmZlclwiLFxyXG4gICAgXCJjcmVhdGVQcm9ncmFtXCIsXHJcbiAgICBcImNyZWF0ZVJlbmRlcmJ1ZmZlclwiLFxyXG4gICAgXCJjcmVhdGVTaGFkZXJcIixcclxuICAgIFwiY3JlYXRlVGV4dHVyZVwiXHJcbiAgXTtcclxuICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgY3JlYXRpb25GdW5jdGlvbnMubGVuZ3RoOyArK2lpKSB7XHJcbiAgICB2YXIgZnVuY3Rpb25OYW1lID0gY3JlYXRpb25GdW5jdGlvbnNbaWldO1xyXG4gICAgd3JhcHBlcl9bZnVuY3Rpb25OYW1lXSA9IGZ1bmN0aW9uKGYpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChjb250ZXh0TG9zdF8pIHtcclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb2JqID0gZi5hcHBseShjdHgsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgb2JqLl9fd2ViZ2xEZWJ1Z0NvbnRleHRMb3N0SWRfXyA9IGNvbnRleHRJZF87XHJcbiAgICAgICAgcmVzb3VyY2VEYl8ucHVzaChvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgIH07XHJcbiAgICB9KGN0eFtmdW5jdGlvbk5hbWVdKTtcclxuICB9XHJcblxyXG4gIHZhciBmdW5jdGlvbnNUaGF0U2hvdWxkUmV0dXJuTnVsbCA9IFtcclxuICAgIFwiZ2V0QWN0aXZlQXR0cmliXCIsXHJcbiAgICBcImdldEFjdGl2ZVVuaWZvcm1cIixcclxuICAgIFwiZ2V0QnVmZmVyUGFyYW1ldGVyXCIsXHJcbiAgICBcImdldENvbnRleHRBdHRyaWJ1dGVzXCIsXHJcbiAgICBcImdldEF0dGFjaGVkU2hhZGVyc1wiLFxyXG4gICAgXCJnZXRGcmFtZWJ1ZmZlckF0dGFjaG1lbnRQYXJhbWV0ZXJcIixcclxuICAgIFwiZ2V0UGFyYW1ldGVyXCIsXHJcbiAgICBcImdldFByb2dyYW1QYXJhbWV0ZXJcIixcclxuICAgIFwiZ2V0UHJvZ3JhbUluZm9Mb2dcIixcclxuICAgIFwiZ2V0UmVuZGVyYnVmZmVyUGFyYW1ldGVyXCIsXHJcbiAgICBcImdldFNoYWRlclBhcmFtZXRlclwiLFxyXG4gICAgXCJnZXRTaGFkZXJJbmZvTG9nXCIsXHJcbiAgICBcImdldFNoYWRlclNvdXJjZVwiLFxyXG4gICAgXCJnZXRUZXhQYXJhbWV0ZXJcIixcclxuICAgIFwiZ2V0VW5pZm9ybVwiLFxyXG4gICAgXCJnZXRVbmlmb3JtTG9jYXRpb25cIixcclxuICAgIFwiZ2V0VmVydGV4QXR0cmliXCJcclxuICBdO1xyXG4gIGZvciAodmFyIGlpID0gMDsgaWkgPCBmdW5jdGlvbnNUaGF0U2hvdWxkUmV0dXJuTnVsbC5sZW5ndGg7ICsraWkpIHtcclxuICAgIHZhciBmdW5jdGlvbk5hbWUgPSBmdW5jdGlvbnNUaGF0U2hvdWxkUmV0dXJuTnVsbFtpaV07XHJcbiAgICB3cmFwcGVyX1tmdW5jdGlvbk5hbWVdID0gZnVuY3Rpb24oZikge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGNvbnRleHRMb3N0Xykge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcclxuICAgICAgfVxyXG4gICAgfSh3cmFwcGVyX1tmdW5jdGlvbk5hbWVdKTtcclxuICB9XHJcblxyXG4gIHZhciBpc0Z1bmN0aW9ucyA9IFtcclxuICAgIFwiaXNCdWZmZXJcIixcclxuICAgIFwiaXNFbmFibGVkXCIsXHJcbiAgICBcImlzRnJhbWVidWZmZXJcIixcclxuICAgIFwiaXNQcm9ncmFtXCIsXHJcbiAgICBcImlzUmVuZGVyYnVmZmVyXCIsXHJcbiAgICBcImlzU2hhZGVyXCIsXHJcbiAgICBcImlzVGV4dHVyZVwiXHJcbiAgXTtcclxuICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaXNGdW5jdGlvbnMubGVuZ3RoOyArK2lpKSB7XHJcbiAgICB2YXIgZnVuY3Rpb25OYW1lID0gaXNGdW5jdGlvbnNbaWldO1xyXG4gICAgd3JhcHBlcl9bZnVuY3Rpb25OYW1lXSA9IGZ1bmN0aW9uKGYpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChjb250ZXh0TG9zdF8pIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGYuYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xyXG4gICAgICB9XHJcbiAgICB9KHdyYXBwZXJfW2Z1bmN0aW9uTmFtZV0pO1xyXG4gIH1cclxuXHJcbiAgd3JhcHBlcl8uY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyA9IGZ1bmN0aW9uKGYpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKGNvbnRleHRMb3N0Xykge1xyXG4gICAgICAgIHJldHVybiBjdHguRlJBTUVCVUZGRVJfVU5TVVBQT1JURUQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGYuYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuICB9KHdyYXBwZXJfLmNoZWNrRnJhbWVidWZmZXJTdGF0dXMpO1xyXG5cclxuICB3cmFwcGVyXy5nZXRBdHRyaWJMb2NhdGlvbiA9IGZ1bmN0aW9uKGYpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKGNvbnRleHRMb3N0Xykge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZi5hcHBseShjdHgsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gIH0od3JhcHBlcl8uZ2V0QXR0cmliTG9jYXRpb24pO1xyXG5cclxuICB3cmFwcGVyXy5nZXRWZXJ0ZXhBdHRyaWJPZmZzZXQgPSBmdW5jdGlvbihmKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmIChjb250ZXh0TG9zdF8pIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZi5hcHBseShjdHgsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gIH0od3JhcHBlcl8uZ2V0VmVydGV4QXR0cmliT2Zmc2V0KTtcclxuXHJcbiAgd3JhcHBlcl8uaXNDb250ZXh0TG9zdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGNvbnRleHRMb3N0XztcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiB3cmFwRXZlbnQobGlzdGVuZXIpIHtcclxuICAgIGlmICh0eXBlb2YobGlzdGVuZXIpID09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICByZXR1cm4gbGlzdGVuZXI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oaW5mbykge1xyXG4gICAgICAgIGxpc3RlbmVyLmhhbmRsZUV2ZW50KGluZm8pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3cmFwcGVyXy5yZWdpc3Rlck9uQ29udGV4dExvc3RMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICBvbkxvc3RfID0gd3JhcEV2ZW50KGxpc3RlbmVyKTtcclxuICB9O1xyXG5cclxuICB3cmFwcGVyXy5yZWdpc3Rlck9uQ29udGV4dFJlc3RvcmVkTGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xyXG4gICAgaWYgKGNvbnRleHRMb3N0Xykge1xyXG4gICAgICBuZXh0T25SZXN0b3JlZF8gPSB3cmFwRXZlbnQobGlzdGVuZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb25SZXN0b3JlZF8gPSB3cmFwRXZlbnQobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHdyYXBwZXJfO1xyXG59XHJcblxyXG5yZXR1cm4ge1xyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemVzIHRoaXMgbW9kdWxlLiBTYWZlIHRvIGNhbGwgbW9yZSB0aGFuIG9uY2UuXHJcbiAgICogQHBhcmFtIHshV2ViR0xSZW5kZXJpbmdDb250ZXh0fSBjdHggQSBXZWJHTCBjb250ZXh0LiBJZlxyXG4gICAqICAgIHlvdSBoYXZlIG1vcmUgdGhhbiBvbmUgY29udGV4dCBpdCBkb2Vzbid0IG1hdHRlciB3aGljaCBvbmVcclxuICAgKiAgICB5b3UgcGFzcyBpbiwgaXQgaXMgb25seSB1c2VkIHRvIHB1bGwgb3V0IGNvbnN0YW50cy5cclxuICAgKi9cclxuICAnaW5pdCc6IGluaXQsXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdHJ1ZSBvciBmYWxzZSBpZiB2YWx1ZSBtYXRjaGVzIGFueSBXZWJHTCBlbnVtXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBjaGVjayBpZiBpdCBtaWdodCBiZSBhbiBlbnVtLlxyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgbWF0Y2hlcyBvbmUgb2YgdGhlIFdlYkdMIGRlZmluZWQgZW51bXNcclxuICAgKi9cclxuICAnbWlnaHRCZUVudW0nOiBtaWdodEJlRW51bSxcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyBhbiBzdHJpbmcgdmVyc2lvbiBvZiBhbiBXZWJHTCBlbnVtLlxyXG4gICAqXHJcbiAgICogRXhhbXBsZTpcclxuICAgKiAgIFdlYkdMRGVidWdVdGlsLmluaXQoY3R4KTtcclxuICAgKiAgIHZhciBzdHIgPSBXZWJHTERlYnVnVXRpbC5nbEVudW1Ub1N0cmluZyhjdHguZ2V0RXJyb3IoKSk7XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gcmV0dXJuIGFuIGVudW0gZm9yXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgc3RyaW5nIHZlcnNpb24gb2YgdGhlIGVudW0uXHJcbiAgICovXHJcbiAgJ2dsRW51bVRvU3RyaW5nJzogZ2xFbnVtVG9TdHJpbmcsXHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnRzIHRoZSBhcmd1bWVudCBvZiBhIFdlYkdMIGZ1bmN0aW9uIHRvIGEgc3RyaW5nLlxyXG4gICAqIEF0dGVtcHRzIHRvIGNvbnZlcnQgZW51bSBhcmd1bWVudHMgdG8gc3RyaW5ncy5cclxuICAgKlxyXG4gICAqIEV4YW1wbGU6XHJcbiAgICogICBXZWJHTERlYnVnVXRpbC5pbml0KGN0eCk7XHJcbiAgICogICB2YXIgc3RyID0gV2ViR0xEZWJ1Z1V0aWwuZ2xGdW5jdGlvbkFyZ1RvU3RyaW5nKCdiaW5kVGV4dHVyZScsIDAsIGdsLlRFWFRVUkVfMkQpO1xyXG4gICAqXHJcbiAgICogd291bGQgcmV0dXJuICdURVhUVVJFXzJEJ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZ1bmN0aW9uTmFtZSB0aGUgbmFtZSBvZiB0aGUgV2ViR0wgZnVuY3Rpb24uXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFyZ3VtZW50SW5keCB0aGUgaW5kZXggb2YgdGhlIGFyZ3VtZW50LlxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBhcmd1bWVudC5cclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB2YWx1ZSBhcyBhIHN0cmluZy5cclxuICAgKi9cclxuICAnZ2xGdW5jdGlvbkFyZ1RvU3RyaW5nJzogZ2xGdW5jdGlvbkFyZ1RvU3RyaW5nLFxyXG5cclxuICAvKipcclxuICAgKiBHaXZlbiBhIFdlYkdMIGNvbnRleHQgcmV0dXJucyBhIHdyYXBwZWQgY29udGV4dCB0aGF0IGNhbGxzXHJcbiAgICogZ2wuZ2V0RXJyb3IgYWZ0ZXIgZXZlcnkgY29tbWFuZCBhbmQgY2FsbHMgYSBmdW5jdGlvbiBpZiB0aGVcclxuICAgKiByZXN1bHQgaXMgbm90IE5PX0VSUk9SLlxyXG4gICAqXHJcbiAgICogWW91IGNhbiBzdXBwbHkgeW91ciBvd24gZnVuY3Rpb24gaWYgeW91IHdhbnQuIEZvciBleGFtcGxlLCBpZiB5b3UnZCBsaWtlXHJcbiAgICogYW4gZXhjZXB0aW9uIHRocm93biBvbiBhbnkgR0wgZXJyb3IgeW91IGNvdWxkIGRvIHRoaXNcclxuICAgKlxyXG4gICAqICAgIGZ1bmN0aW9uIHRocm93T25HTEVycm9yKGVyciwgZnVuY05hbWUsIGFyZ3MpIHtcclxuICAgKiAgICAgIHRocm93IFdlYkdMRGVidWdVdGlscy5nbEVudW1Ub1N0cmluZyhlcnIpICsgXCIgd2FzIGNhdXNlZCBieSBjYWxsIHRvXCIgK1xyXG4gICAqICAgICAgICAgICAgZnVuY05hbWU7XHJcbiAgICogICAgfTtcclxuICAgKlxyXG4gICAqICAgIGN0eCA9IFdlYkdMRGVidWdVdGlscy5tYWtlRGVidWdDb250ZXh0KFxyXG4gICAqICAgICAgICBjYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpLCB0aHJvd09uR0xFcnJvcik7XHJcbiAgICpcclxuICAgKiBAcGFyYW0geyFXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGN0eCBUaGUgd2ViZ2wgY29udGV4dCB0byB3cmFwLlxyXG4gICAqIEBwYXJhbSB7IWZ1bmN0aW9uKGVyciwgZnVuY05hbWUsIGFyZ3MpOiB2b2lkfSBvcHRfb25FcnJvckZ1bmMgVGhlIGZ1bmN0aW9uXHJcbiAgICogICAgIHRvIGNhbGwgd2hlbiBnbC5nZXRFcnJvciByZXR1cm5zIGFuIGVycm9yLiBJZiBub3Qgc3BlY2lmaWVkIHRoZSBkZWZhdWx0XHJcbiAgICogICAgIGZ1bmN0aW9uIGNhbGxzIGNvbnNvbGUubG9nIHdpdGggYSBtZXNzYWdlLlxyXG4gICAqL1xyXG4gICdtYWtlRGVidWdDb250ZXh0JzogbWFrZURlYnVnQ29udGV4dCxcclxuXHJcbiAgLyoqXHJcbiAgICogR2l2ZW4gYSBXZWJHTCBjb250ZXh0IHJldHVybnMgYSB3cmFwcGVkIGNvbnRleHQgdGhhdCBhZGRzIDRcclxuICAgKiBmdW5jdGlvbnMuXHJcbiAgICpcclxuICAgKiBjdHgubG9zZUNvbnRleHQ6XHJcbiAgICogICBzaW11bGF0ZXMgYSBsb3N0IGNvbnRleHQgZXZlbnQuXHJcbiAgICpcclxuICAgKiBjdHgucmVzdG9yZUNvbnRleHQ6XHJcbiAgICogICBzaW11bGF0ZXMgdGhlIGNvbnRleHQgYmVpbmcgcmVzdG9yZWQuXHJcbiAgICpcclxuICAgKiBjdHgucmVnaXN0ZXJPbkNvbnRleHRMb3N0TGlzdGVuZXIobGlzdGVuZXIpOlxyXG4gICAqICAgbGV0cyB5b3UgcmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgY29udGV4dCBsb3N0LiBVc2UgaW5zdGVhZFxyXG4gICAqICAgb2YgYWRkRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0bG9zdGV2ZW50JywgbGlzdGVuZXIpO1xyXG4gICAqXHJcbiAgICogY3R4LnJlZ2lzdGVyT25Db250ZXh0UmVzdG9yZWRMaXN0ZW5lcihsaXN0ZW5lcik6XHJcbiAgICogICBsZXRzIHlvdSByZWdpc3RlciBhIGxpc3RlbmVyIGZvciBjb250ZXh0IHJlc3RvcmVkLiBVc2VcclxuICAgKiAgIGluc3RlYWQgb2YgYWRkRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0cmVzdG9yZWQnLFxyXG4gICAqICAgbGlzdGVuZXIpO1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHshV2ViR0xSZW5kZXJpbmdDb250ZXh0fSBjdHggVGhlIHdlYmdsIGNvbnRleHQgdG8gd3JhcC5cclxuICAgKi9cclxuICAnbWFrZUxvc3RDb250ZXh0U2ltdWxhdGluZ0NvbnRleHQnOiBtYWtlTG9zdENvbnRleHRTaW11bGF0aW5nQ29udGV4dCxcclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXRzIGEgY29udGV4dCB0byB0aGUgaW5pdGlhbCBzdGF0ZS5cclxuICAgKiBAcGFyYW0geyFXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGN0eCBUaGUgd2ViZ2wgY29udGV4dCB0b1xyXG4gICAqICAgICByZXNldC5cclxuICAgKi9cclxuICAncmVzZXRUb0luaXRpYWxTdGF0ZSc6IHJlc2V0VG9Jbml0aWFsU3RhdGVcclxufTtcclxuXHJcbn0oKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFdlYkdMRGVidWdVdGlsczsiLCJpbXBvcnQgV2ViR0xVdGlscyBmcm9tIFwiLi93ZWJnbC11dGlscy5qc1wiO1xyXG5pbXBvcnQgV2ViR0xEZWJ1Z1V0aWxzIGZyb20gXCIuL3dlYmdsLWRlYnVnLmpzXCI7XHJcblxyXG5jb25zdCBVdGlsID0ge1xyXG4gICAgaW5pdFNoYWRlcnM6IGZ1bmN0aW9uKGdsLCB2c2hhZGVyLCBmc2hhZGVyKSB7XHJcbiAgICAgICAgdmFyIHByb2dyYW0gPSBVdGlsLmNyZWF0ZVByb2dyYW0oZ2wsIHZzaGFkZXIsIGZzaGFkZXIpO1xyXG4gICAgICAgIGlmICghcHJvZ3JhbSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0ZSBwcm9ncmFtJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgZ2wucHJvZ3JhbSA9IHByb2dyYW07XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGVQcm9ncmFtOiBmdW5jdGlvbihnbCwgdnNoYWRlciwgZnNoYWRlcikge1xyXG4gICAgICAgIC8vIENyZWF0ZSBzaGFkZXIgb2JqZWN0XHJcbiAgICAgICAgdmFyIHZlcnRleFNoYWRlciA9IFV0aWwubG9hZFNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdnNoYWRlcik7XHJcbiAgICAgICAgdmFyIGZyYWdtZW50U2hhZGVyID0gVXRpbC5sb2FkU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZzaGFkZXIpO1xyXG4gICAgICAgIGlmICghdmVydGV4U2hhZGVyIHx8ICFmcmFnbWVudFNoYWRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIHByb2dyYW0gb2JqZWN0XHJcbiAgICAgICAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICAgICAgaWYgKCFwcm9ncmFtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXR0YWNoIHRoZSBzaGFkZXIgb2JqZWN0c1xyXG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xyXG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XHJcblxyXG4gICAgICAgIC8vIExpbmsgdGhlIHByb2dyYW0gb2JqZWN0XHJcbiAgICAgICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIHRoZSByZXN1bHQgb2YgbGlua2luZ1xyXG4gICAgICAgIHZhciBsaW5rZWQgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKTtcclxuICAgICAgICBpZiAoIWxpbmtlZCkge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBsaW5rIHByb2dyYW06ICcgKyBlcnJvcik7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihmcmFnbWVudFNoYWRlcik7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb2dyYW07XHJcbiAgICB9LFxyXG5cclxuICAgIGxvYWRTaGFkZXI6IGZ1bmN0aW9uKGdsLCB0eXBlLCBzb3VyY2UpIHtcclxuICAgICAgICAvLyBDcmVhdGUgc2hhZGVyIG9iamVjdFxyXG4gICAgICAgIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgICAgICAgaWYgKHNoYWRlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1bmFibGUgdG8gY3JlYXRlIHNoYWRlcicpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgc2hhZGVyIHByb2dyYW1cclxuICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xyXG5cclxuICAgICAgICAvLyBDb21waWxlIHRoZSBzaGFkZXJcclxuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIHRoZSByZXN1bHQgb2YgY29tcGlsYXRpb25cclxuICAgICAgICB2YXIgY29tcGlsZWQgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XHJcbiAgICAgICAgaWYgKCFjb21waWxlZCkge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gY29tcGlsZSBzaGFkZXI6ICcgKyBlcnJvcik7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzaGFkZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFdlYkdMQ29udGV4dDogZnVuY3Rpb24oY2FudmFzLCBvcHRfZGVidWcpIHtcclxuICAgICAgICAvLyBHZXQgdGhlIHJlbmRlcmluZyBjb250ZXh0IGZvciBXZWJHTFxyXG4gICAgICAgIHZhciBnbCA9IFdlYkdMVXRpbHMuc2V0dXBXZWJHTChjYW52YXMpO1xyXG4gICAgICAgIGlmICghZ2wpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAvLyBpZiBvcHRfZGVidWcgaXMgZXhwbGljaXRseSBmYWxzZSwgY3JlYXRlIHRoZSBjb250ZXh0IGZvciBkZWJ1Z2dpbmdcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIgfHwgb3B0X2RlYnVnKSB7XHJcbiAgICAgICAgICAgIGdsID0gV2ViR0xEZWJ1Z1V0aWxzLm1ha2VEZWJ1Z0NvbnRleHQoZ2wpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGdsO1xyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGUzRENvbnRleHQgOiBmdW5jdGlvbihjYW52YXMsIG9wdF9hdHRyaWJzKSB7XHJcbiAgICAgICAgdmFyIG5hbWVzID0gW1wid2ViZ2xcIiwgXCJleHBlcmltZW50YWwtd2ViZ2xcIiwgXCJ3ZWJraXQtM2RcIiwgXCJtb3otd2ViZ2xcIl07XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBudWxsO1xyXG4gICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBuYW1lcy5sZW5ndGg7ICsraWkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChuYW1lc1tpaV0sIG9wdF9hdHRyaWJzKTtcclxuICAgICAgICAgICAgfSBjYXRjaChlKSB7fVxyXG4gICAgICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFV0aWw7IiwiXHJcbmNsYXNzIExpZ2h0IHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gJ0xpZ2h0JztcclxuXHJcbiAgICAgICAgcGFyYW0gPSBwYXJhbSB8fCB7fTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gcGFyYW0uY29sb3IgfHwgWzEsMSwxXTtcclxuICAgICAgICB0aGlzLmludGVuc2l0eSA9IHBhcmFtLmludGVuc2l0eSAhPT0gdW5kZWZpbmVkID8gcGFyYW0uaW50ZW5zaXR5IDogMTtcclxuICAgICAgICB0aGlzLmNhc3RTaGFkb3cgPSBwYXJhbS5jYXN0U2hhZG93O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMaWdodDtcclxuIiwiaW1wb3J0IExpZ2h0IGZyb20gXCIuL0xpZ2h0XCI7XHJcblxyXG5jbGFzcyBBbWJpZW50TGlnaHQgZXh0ZW5kcyBMaWdodHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtKSB7XHJcbiAgICAgICAgc3VwZXIocGFyYW0pO1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICdBbWJpZW50TGlnaHQnO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBbWJpZW50TGlnaHQ7XHJcbiIsImltcG9ydCBMaWdodCBmcm9tIFwiLi9MaWdodFwiO1xyXG5pbXBvcnQge1ZlY3RvcjN9IGZyb20gXCIuLi9tYXRoL1ZlY3RvcjNcIjtcclxuXHJcbmNsYXNzIERpcmVjdGlvbmFsTGlnaHQgZXh0ZW5kcyBMaWdodHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtKSB7XHJcbiAgICAgICAgc3VwZXIocGFyYW0pO1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICdEaXJlY3Rpb25hbExpZ2h0JztcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFsxLDEsMV07XHJcbiAgICAgICAgdGhpcy5zZXREaXJlY3Rpb24ocGFyYW0uZGlyZWN0aW9uIHx8IFsxLDEsMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERpcmVjdGlvbihkaXJlY3Rpb24pe1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gIG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KGRpcmVjdGlvbikubm9ybWFsaXplKCkudG9BcnJheSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEaXJlY3Rpb25hbExpZ2h0O1xyXG4iLCIvKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBwaGlsb2diIC8gaHR0cDovL2Jsb2cudGhlaml0Lm9yZy9cclxuICogQGF1dGhvciBlZ3JhZXRoZXIgLyBodHRwOi8vZWdyYWV0aGVyLmNvbS9cclxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZ1xyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIFZlY3RvcjIoIHgsIHkgKSB7XHJcblxyXG5cdHRoaXMueCA9IHggfHwgMDtcclxuXHR0aGlzLnkgPSB5IHx8IDA7XHJcblxyXG59XHJcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyggVmVjdG9yMi5wcm90b3R5cGUsIHtcclxuXHJcblx0XCJ3aWR0aFwiOiB7XHJcblxyXG5cdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy54O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy54ID0gdmFsdWU7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRcImhlaWdodFwiOiB7XHJcblxyXG5cdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy55O1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdFx0dGhpcy55ID0gdmFsdWU7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG59ICk7XHJcblxyXG5PYmplY3QuYXNzaWduKCBWZWN0b3IyLnByb3RvdHlwZSwge1xyXG5cclxuXHRpc1ZlY3RvcjI6IHRydWUsXHJcblxyXG5cdHNldDogZnVuY3Rpb24gKCB4LCB5ICkge1xyXG5cclxuXHRcdHRoaXMueCA9IHg7XHJcblx0XHR0aGlzLnkgPSB5O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRTY2FsYXI6IGZ1bmN0aW9uICggc2NhbGFyICkge1xyXG5cclxuXHRcdHRoaXMueCA9IHNjYWxhcjtcclxuXHRcdHRoaXMueSA9IHNjYWxhcjtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0c2V0WDogZnVuY3Rpb24gKCB4ICkge1xyXG5cclxuXHRcdHRoaXMueCA9IHg7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldFk6IGZ1bmN0aW9uICggeSApIHtcclxuXHJcblx0XHR0aGlzLnkgPSB5O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZXRDb21wb25lbnQ6IGZ1bmN0aW9uICggaW5kZXgsIHZhbHVlICkge1xyXG5cclxuXHRcdHN3aXRjaCAoIGluZGV4ICkge1xyXG5cclxuXHRcdFx0Y2FzZSAwOiB0aGlzLnggPSB2YWx1ZTsgYnJlYWs7XHJcblx0XHRcdGNhc2UgMTogdGhpcy55ID0gdmFsdWU7IGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoICdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcgKyBpbmRleCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0Z2V0Q29tcG9uZW50OiBmdW5jdGlvbiAoIGluZGV4ICkge1xyXG5cclxuXHRcdHN3aXRjaCAoIGluZGV4ICkge1xyXG5cclxuXHRcdFx0Y2FzZSAwOiByZXR1cm4gdGhpcy54O1xyXG5cdFx0XHRjYXNlIDE6IHJldHVybiB0aGlzLnk7XHJcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvciggJ2luZGV4IGlzIG91dCBvZiByYW5nZTogJyArIGluZGV4ICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRjbG9uZTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvciggdGhpcy54LCB0aGlzLnkgKTtcclxuXHJcblx0fSxcclxuXHJcblx0Y29weTogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHRoaXMueCA9IHYueDtcclxuXHRcdHRoaXMueSA9IHYueTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0YWRkOiBmdW5jdGlvbiAoIHYsIHcgKSB7XHJcblxyXG5cdFx0aWYgKCB3ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRjb25zb2xlLndhcm4oICdDT09MLlZlY3RvcjI6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nICk7XHJcblx0XHRcdHJldHVybiB0aGlzLmFkZFZlY3RvcnMoIHYsIHcgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy54ICs9IHYueDtcclxuXHRcdHRoaXMueSArPSB2Lnk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFkZFNjYWxhcjogZnVuY3Rpb24gKCBzICkge1xyXG5cclxuXHRcdHRoaXMueCArPSBzO1xyXG5cdFx0dGhpcy55ICs9IHM7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFkZFZlY3RvcnM6IGZ1bmN0aW9uICggYSwgYiApIHtcclxuXHJcblx0XHR0aGlzLnggPSBhLnggKyBiLng7XHJcblx0XHR0aGlzLnkgPSBhLnkgKyBiLnk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFkZFNjYWxlZFZlY3RvcjogZnVuY3Rpb24gKCB2LCBzICkge1xyXG5cclxuXHRcdHRoaXMueCArPSB2LnggKiBzO1xyXG5cdFx0dGhpcy55ICs9IHYueSAqIHM7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHN1YjogZnVuY3Rpb24gKCB2LCB3ICkge1xyXG5cclxuXHRcdGlmICggdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0Y29uc29sZS53YXJuKCAnQ09PTC5WZWN0b3IyOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyApO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKCB2LCB3ICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMueCAtPSB2Lng7XHJcblx0XHR0aGlzLnkgLT0gdi55O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzdWJTY2FsYXI6IGZ1bmN0aW9uICggcyApIHtcclxuXHJcblx0XHR0aGlzLnggLT0gcztcclxuXHRcdHRoaXMueSAtPSBzO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzdWJWZWN0b3JzOiBmdW5jdGlvbiAoIGEsIGIgKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gYS54IC0gYi54O1xyXG5cdFx0dGhpcy55ID0gYS55IC0gYi55O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtdWx0aXBseTogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHRoaXMueCAqPSB2Lng7XHJcblx0XHR0aGlzLnkgKj0gdi55O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRtdWx0aXBseVNjYWxhcjogZnVuY3Rpb24gKCBzY2FsYXIgKSB7XHJcblxyXG5cdFx0dGhpcy54ICo9IHNjYWxhcjtcclxuXHRcdHRoaXMueSAqPSBzY2FsYXI7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGRpdmlkZTogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHRoaXMueCAvPSB2Lng7XHJcblx0XHR0aGlzLnkgLz0gdi55O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRkaXZpZGVTY2FsYXI6IGZ1bmN0aW9uICggc2NhbGFyICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKCAxIC8gc2NhbGFyICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFwcGx5TWF0cml4MzogZnVuY3Rpb24gKCBtICkge1xyXG5cclxuXHRcdHZhciB4ID0gdGhpcy54LCB5ID0gdGhpcy55O1xyXG5cdFx0dmFyIGUgPSBtLmVsZW1lbnRzO1xyXG5cclxuXHRcdHRoaXMueCA9IGVbIDAgXSAqIHggKyBlWyAzIF0gKiB5ICsgZVsgNiBdO1xyXG5cdFx0dGhpcy55ID0gZVsgMSBdICogeCArIGVbIDQgXSAqIHkgKyBlWyA3IF07XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1pbjogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHRoaXMueCA9IE1hdGgubWluKCB0aGlzLngsIHYueCApO1xyXG5cdFx0dGhpcy55ID0gTWF0aC5taW4oIHRoaXMueSwgdi55ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1heDogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHRoaXMueCA9IE1hdGgubWF4KCB0aGlzLngsIHYueCApO1xyXG5cdFx0dGhpcy55ID0gTWF0aC5tYXgoIHRoaXMueSwgdi55ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdGNsYW1wOiBmdW5jdGlvbiAoIG1pbiwgbWF4ICkge1xyXG5cclxuXHRcdC8vIGFzc3VtZXMgbWluIDwgbWF4LCBjb21wb25lbnR3aXNlXHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5tYXgoIG1pbi54LCBNYXRoLm1pbiggbWF4LngsIHRoaXMueCApICk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLm1heCggbWluLnksIE1hdGgubWluKCBtYXgueSwgdGhpcy55ICkgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0Y2xhbXBTY2FsYXI6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgbWluID0gbmV3IFZlY3RvcjIoKTtcclxuXHRcdHZhciBtYXggPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiBjbGFtcFNjYWxhciggbWluVmFsLCBtYXhWYWwgKSB7XHJcblxyXG5cdFx0XHRtaW4uc2V0KCBtaW5WYWwsIG1pblZhbCApO1xyXG5cdFx0XHRtYXguc2V0KCBtYXhWYWwsIG1heFZhbCApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuY2xhbXAoIG1pbiwgbWF4ICk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSgpLFxyXG5cclxuXHRjbGFtcExlbmd0aDogZnVuY3Rpb24gKCBtaW4sIG1heCApIHtcclxuXHJcblx0XHR2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIoIGxlbmd0aCB8fCAxICkubXVsdGlwbHlTY2FsYXIoIE1hdGgubWF4KCBtaW4sIE1hdGgubWluKCBtYXgsIGxlbmd0aCApICkgKTtcclxuXHJcblx0fSxcclxuXHJcblx0Zmxvb3I6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR0aGlzLnggPSBNYXRoLmZsb29yKCB0aGlzLnggKTtcclxuXHRcdHRoaXMueSA9IE1hdGguZmxvb3IoIHRoaXMueSApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRjZWlsOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5jZWlsKCB0aGlzLnggKTtcclxuXHRcdHRoaXMueSA9IE1hdGguY2VpbCggdGhpcy55ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH0sXHJcblxyXG5cdHJvdW5kOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dGhpcy54ID0gTWF0aC5yb3VuZCggdGhpcy54ICk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLnJvdW5kKCB0aGlzLnkgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fSxcclxuXHJcblx0cm91bmRUb1plcm86IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR0aGlzLnggPSAoIHRoaXMueCA8IDAgKSA/IE1hdGguY2VpbCggdGhpcy54ICkgOiBNYXRoLmZsb29yKCB0aGlzLnggKTtcclxuXHRcdHRoaXMueSA9ICggdGhpcy55IDwgMCApID8gTWF0aC5jZWlsKCB0aGlzLnkgKSA6IE1hdGguZmxvb3IoIHRoaXMueSApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRuZWdhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR0aGlzLnggPSAtIHRoaXMueDtcclxuXHRcdHRoaXMueSA9IC0gdGhpcy55O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRkb3Q6IGZ1bmN0aW9uICggdiApIHtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG5cclxuXHR9LFxyXG5cclxuXHRjcm9zczogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnggKiB2LnkgLSB0aGlzLnkgKiB2Lng7XHJcblxyXG5cdH0sXHJcblxyXG5cdGxlbmd0aFNxOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueTtcclxuXHJcblx0fSxcclxuXHJcblx0bGVuZ3RoOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0cmV0dXJuIE1hdGguc3FydCggdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdG1hbmhhdHRhbkxlbmd0aDogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHJldHVybiBNYXRoLmFicyggdGhpcy54ICkgKyBNYXRoLmFicyggdGhpcy55ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdG5vcm1hbGl6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmRpdmlkZVNjYWxhciggdGhpcy5sZW5ndGgoKSB8fCAxICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGFuZ2xlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0Ly8gY29tcHV0ZXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMgd2l0aCByZXNwZWN0IHRvIHRoZSBwb3NpdGl2ZSB4LWF4aXNcclxuXHJcblx0XHR2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKCB0aGlzLnksIHRoaXMueCApO1xyXG5cclxuXHRcdGlmICggYW5nbGUgPCAwICkgYW5nbGUgKz0gMiAqIE1hdGguUEk7XHJcblxyXG5cdFx0cmV0dXJuIGFuZ2xlO1xyXG5cclxuXHR9LFxyXG5cclxuXHRkaXN0YW5jZVRvOiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0cmV0dXJuIE1hdGguc3FydCggdGhpcy5kaXN0YW5jZVRvU3F1YXJlZCggdiApICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdGRpc3RhbmNlVG9TcXVhcmVkOiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0dmFyIGR4ID0gdGhpcy54IC0gdi54LCBkeSA9IHRoaXMueSAtIHYueTtcclxuXHRcdHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcclxuXHJcblx0fSxcclxuXHJcblx0bWFuaGF0dGFuRGlzdGFuY2VUbzogZnVuY3Rpb24gKCB2ICkge1xyXG5cclxuXHRcdHJldHVybiBNYXRoLmFicyggdGhpcy54IC0gdi54ICkgKyBNYXRoLmFicyggdGhpcy55IC0gdi55ICk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNldExlbmd0aDogZnVuY3Rpb24gKCBsZW5ndGggKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoIGxlbmd0aCApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRsZXJwOiBmdW5jdGlvbiAoIHYsIGFscGhhICkge1xyXG5cclxuXHRcdHRoaXMueCArPSAoIHYueCAtIHRoaXMueCApICogYWxwaGE7XHJcblx0XHR0aGlzLnkgKz0gKCB2LnkgLSB0aGlzLnkgKSAqIGFscGhhO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRsZXJwVmVjdG9yczogZnVuY3Rpb24gKCB2MSwgdjIsIGFscGhhICkge1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnN1YlZlY3RvcnMoIHYyLCB2MSApLm11bHRpcGx5U2NhbGFyKCBhbHBoYSApLmFkZCggdjEgKTtcclxuXHJcblx0fSxcclxuXHJcblx0ZXF1YWxzOiBmdW5jdGlvbiAoIHYgKSB7XHJcblxyXG5cdFx0cmV0dXJuICggKCB2LnggPT09IHRoaXMueCApICYmICggdi55ID09PSB0aGlzLnkgKSApO1xyXG5cclxuXHR9LFxyXG5cclxuXHRmcm9tQXJyYXk6IGZ1bmN0aW9uICggYXJyYXksIG9mZnNldCApIHtcclxuXHJcblx0XHRpZiAoIG9mZnNldCA9PT0gdW5kZWZpbmVkICkgb2Zmc2V0ID0gMDtcclxuXHJcblx0XHR0aGlzLnggPSBhcnJheVsgb2Zmc2V0IF07XHJcblx0XHR0aGlzLnkgPSBhcnJheVsgb2Zmc2V0ICsgMSBdO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHR0b0FycmF5OiBmdW5jdGlvbiAoIGFycmF5LCBvZmZzZXQgKSB7XHJcblxyXG5cdFx0aWYgKCBhcnJheSA9PT0gdW5kZWZpbmVkICkgYXJyYXkgPSBbXTtcclxuXHRcdGlmICggb2Zmc2V0ID09PSB1bmRlZmluZWQgKSBvZmZzZXQgPSAwO1xyXG5cclxuXHRcdGFycmF5WyBvZmZzZXQgXSA9IHRoaXMueDtcclxuXHRcdGFycmF5WyBvZmZzZXQgKyAxIF0gPSB0aGlzLnk7XHJcblxyXG5cdFx0cmV0dXJuIGFycmF5O1xyXG5cclxuXHR9LFxyXG5cclxuXHRmcm9tQnVmZmVyQXR0cmlidXRlOiBmdW5jdGlvbiAoIGF0dHJpYnV0ZSwgaW5kZXgsIG9mZnNldCApIHtcclxuXHJcblx0XHRpZiAoIG9mZnNldCAhPT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0Y29uc29sZS53YXJuKCAnQ09PTC5WZWN0b3IyOiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuJyApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnggPSBhdHRyaWJ1dGUuZ2V0WCggaW5kZXggKTtcclxuXHRcdHRoaXMueSA9IGF0dHJpYnV0ZS5nZXRZKCBpbmRleCApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9LFxyXG5cclxuXHRyb3RhdGVBcm91bmQ6IGZ1bmN0aW9uICggY2VudGVyLCBhbmdsZSApIHtcclxuXHJcblx0XHR2YXIgYyA9IE1hdGguY29zKCBhbmdsZSApLCBzID0gTWF0aC5zaW4oIGFuZ2xlICk7XHJcblxyXG5cdFx0dmFyIHggPSB0aGlzLnggLSBjZW50ZXIueDtcclxuXHRcdHZhciB5ID0gdGhpcy55IC0gY2VudGVyLnk7XHJcblxyXG5cdFx0dGhpcy54ID0geCAqIGMgLSB5ICogcyArIGNlbnRlci54O1xyXG5cdFx0dGhpcy55ID0geCAqIHMgKyB5ICogYyArIGNlbnRlci55O1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9XHJcblxyXG59ICk7XHJcblxyXG5cclxuZXhwb3J0IHsgVmVjdG9yMiB9O1xyXG4iLCJcclxuaW1wb3J0IE1lc2ggZnJvbSBcIi4vTWVzaC5qc1wiO1xyXG5pbXBvcnQgVXRpbCBmcm9tIFwiLi4vdXRpbC9VdGlsXCI7XHJcbmltcG9ydCBBbWJpZW50TGlnaHQgZnJvbSBcIi4uL2xpZ2h0L0FtYmllbnRMaWdodFwiO1xyXG5pbXBvcnQgRGlyZWN0aW9uYWxMaWdodCBmcm9tIFwiLi4vbGlnaHQvRGlyZWN0aW9uYWxMaWdodFwiO1xyXG5pbXBvcnQge1ZlY3RvcjN9IGZyb20gXCIuLi9tYXRoL1ZlY3RvcjNcIjtcclxuaW1wb3J0IHtWZWN0b3I0fSBmcm9tIFwiLi4vbWF0aC9WZWN0b3I0XCI7XHJcbmltcG9ydCB7VmVjdG9yMn0gZnJvbSBcIi4uL21hdGgvVmVjdG9yMlwiO1xyXG5cclxuY2xhc3MgUmVuZGVyZXIge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW0pIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcGFyYW0gPSBwYXJhbSB8fCB7fTtcclxuICAgICAgICB0aGlzLmJ1ZmZlckxpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5wcm9ncmFtTGlzdCA9IHt9O1xyXG5cclxuICAgICAgICB0aGlzLmN1ckNhbWVyYVBvc2l0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlbmRlckxpc3QgPSB7XHJcbiAgICAgICAgICAgIG9wYWNpdHlMaXN0OltdLFxyXG4gICAgICAgICAgICB0cmFuc3BhcmVudExpc3Q6W11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmNhbWVyYSA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2ViZ2wnKTtcclxuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZW5kZXIoc2NlbmUsIGNhbWVyYSl7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHRoYXQuY2FtZXJhID0gY2FtZXJhO1xyXG4gICAgICAgIHRoYXQuY3VyQ2FtZXJhUG9zaXRpb24gPSBjYW1lcmEucG9zaXRpb247XHJcblxyXG4gICAgICAgIHZhciByZW5kZXJMaXN0ID0gdGhhdC5zb3J0UmVuZGVyTGlzdChzY2VuZSk7XHJcblxyXG4gICAgICAgIHZhciBnbCA9IHRoYXQuZ2w7XHJcblxyXG4gICAgICAgIC8vIGdsLmNsZWFyUmVjdCgwLDAsNjAwLDYwMCk7XHJcbiAgICAgICAgZ2wuZmlsbFN0eWxlPVwiYmxhY2tcIjtcclxuICAgICAgICBnbC5maWxsUmVjdCgwLDAsNjAwLDYwMCk7XHJcblxyXG4gICAgICAgIHZhciBhbWJpZW50TGlnaHQgPSBudWxsO1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb25hbExpZ2h0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgZm9yKHZhciBpIGluIHNjZW5lLmxpZ2h0cyl7XHJcbiAgICAgICAgICAgIGlmKHNjZW5lLmxpZ2h0c1tpXS50eXBlID09PSAnRGlyZWN0aW9uYWxMaWdodCcpe1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodCA9IHNjZW5lLmxpZ2h0c1tpXTtcclxuICAgICAgICAgICAgfWVsc2UgaWYoc2NlbmUubGlnaHRzW2ldLnR5cGUgPT09ICdBbWJpZW50TGlnaHQnKXtcclxuICAgICAgICAgICAgICAgIGFtYmllbnRMaWdodCA9IHNjZW5lLmxpZ2h0c1tpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYW1iaWVudExpZ2h0ID0gYW1iaWVudExpZ2h0IHx8IG5ldyBBbWJpZW50TGlnaHQoe2ludGVuc2l0eTowfSk7XHJcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHQgfHwgbmV3IERpcmVjdGlvbmFsTGlnaHQoe2ludGVuc2l0eTowfSk7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaSBpbiByZW5kZXJMaXN0KXtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJPbmVNZXNoKHJlbmRlckxpc3RbaV0sIGNhbWVyYSwgYW1iaWVudExpZ2h0LCBkaXJlY3Rpb25hbExpZ2h0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlck9uZU1lc2gobWVzaCwgY2FtZXJhLCBhbWJpZW50TGlnaHQsIGRpcmVjdGlvbmFsTGlnaHQpe1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIG1lc2ggPSBtZXNoIHx8IG5ldyBNZXNoKCk7XHJcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gbWVzaC5nZW9tZXRyeTtcclxuICAgICAgICB2YXIgaW5kaWNlcyA9IGdlb21ldHJ5LmluZGljZXM7XHJcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gZ2VvbWV0cnkudmVydGljZXM7XHJcbiAgICAgICAgdmFyIHV2ID0gZ2VvbWV0cnkudXY7XHJcblxyXG5cclxuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsO1xyXG4gICAgICAgIHZhciBtYXAgPSBtYXRlcmlhbC5tYXA7XHJcbiAgICAgICAgdmFyIGNvbG9yID0gbWF0ZXJpYWwuY29sb3I7XHJcblxyXG4gICAgICAgIHZhciBjdHggPSB0aGF0LmdsO1xyXG5cclxuICAgICAgICBmb3IobGV0IGk9MDsgaTxpbmRpY2VzLmxlbmd0aDsgaSs9Myl7XHJcbiAgICAgICAgICAgIGxldCBwb2ludDF4ID0gdmVydGljZXNbaW5kaWNlc1tpXSozXTtcclxuICAgICAgICAgICAgbGV0IHBvaW50MXkgPSB2ZXJ0aWNlc1tpbmRpY2VzW2ldKjMrMV07XHJcbiAgICAgICAgICAgIGxldCBwb2ludDF6ID0gdmVydGljZXNbaW5kaWNlc1tpXSozKzJdO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBvaW50MXMgPSB1dltpbmRpY2VzW2ldKjJdO1xyXG4gICAgICAgICAgICBsZXQgcG9pbnQxdCA9IHV2W2luZGljZXNbaV0qMisxXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwb2ludDEgPSBuZXcgVmVjdG9yMyhwb2ludDF4LHBvaW50MXkscG9pbnQxeik7XHJcbiAgICAgICAgICAgIHBvaW50MS51diA9IG5ldyBWZWN0b3IyKHBvaW50MXMscG9pbnQxdCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcG9pbnQyeCA9IHZlcnRpY2VzW2luZGljZXNbaSsxXSozXTtcclxuICAgICAgICAgICAgbGV0IHBvaW50MnkgPSB2ZXJ0aWNlc1tpbmRpY2VzW2krMV0qMysxXTtcclxuICAgICAgICAgICAgbGV0IHBvaW50MnogPSB2ZXJ0aWNlc1tpbmRpY2VzW2krMV0qMysyXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwb2ludDJzID0gdXZbaW5kaWNlc1tpKzFdKjJdO1xyXG4gICAgICAgICAgICBsZXQgcG9pbnQydCA9IHV2W2luZGljZXNbaSsxXSoyKzFdO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBvaW50MiA9IG5ldyBWZWN0b3IzKHBvaW50MngscG9pbnQyeSxwb2ludDJ6KTtcclxuICAgICAgICAgICAgcG9pbnQyLnV2ID0gbmV3IFZlY3RvcjIocG9pbnQycyxwb2ludDJ0KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwb2ludDN4ID0gdmVydGljZXNbaW5kaWNlc1tpKzJdKjNdO1xyXG4gICAgICAgICAgICBsZXQgcG9pbnQzeSA9IHZlcnRpY2VzW2luZGljZXNbaSsyXSozKzFdO1xyXG4gICAgICAgICAgICBsZXQgcG9pbnQzeiA9IHZlcnRpY2VzW2luZGljZXNbaSsyXSozKzJdO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBvaW50M3MgPSB1dltpbmRpY2VzW2krMl0qMl07XHJcbiAgICAgICAgICAgIGxldCBwb2ludDN0ID0gdXZbaW5kaWNlc1tpKzJdKjIrMV07XHJcblxyXG4gICAgICAgICAgICBsZXQgcG9pbnQzID0gbmV3IFZlY3RvcjMocG9pbnQzeCxwb2ludDN5LHBvaW50M3opO1xyXG4gICAgICAgICAgICBwb2ludDMudXYgPSBuZXcgVmVjdG9yMihwb2ludDNzLHBvaW50M3QpO1xyXG5cclxuICAgICAgICAgICAgdGhhdC5kcmF3VHJpYW5nbGUoXHJcbiAgICAgICAgICAgICAgICBwb2ludDEsXHJcbiAgICAgICAgICAgICAgICBwb2ludDIsXHJcbiAgICAgICAgICAgICAgICBwb2ludDMsXHJcbiAgICAgICAgICAgICAgICBtZXNoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICB2M1RvdjIodjMsIG1lc2gpe1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIHZwTWF0cml4ID0gdGhhdC5jYW1lcmEuVlBtYXRyaXguY2xvbmUoKTtcclxuICAgICAgICB2YXIgdjQgPSB2cE1hdHJpeC5jb25jYXQobWVzaC5tYXRyaXhXb3JsZCkubXVsdGlwbHlWZWN0b3I0KG5ldyBWZWN0b3I0KHYzLngsIHYzLnksIHYzLnosIDEpKTtcclxuICAgICAgICB2YXIgdjNHTCA9IG5ldyBWZWN0b3IzKHY0LngvdjQudywgdjQueS92NC53LCB2NC56L3Y0LncpO1xyXG4gICAgICAgIHZhciB2MkdMID0gbmV3IFZlY3RvcjIodjNHTC54LCB2M0dMLnkpO1xyXG4gICAgICAgIHZhciB2MiA9IG5ldyBWZWN0b3IyKCh2MkdMLngvMiswLjUpKjYwMCwgKDAuNS12MkdMLnkvMikqNjAwKTtcclxuXHJcbiAgICAgICAgdjIudXYgPSB2My51djtcclxuXHJcbiAgICAgICAgcmV0dXJuIHYyO1xyXG4gICAgfVxyXG5cclxuICAgIC8v6IOM6Z2i5YmU6ZmkXHJcbiAgICBjaGVja0Nsb2Nrd2lzZShwMSwgcDIsIHAzKXtcclxuICAgICAgICBsZXQgaXNUcmlhbmdsZVYyY2xvY2t3aXNlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICgocDIueCAtIHAxLngpICoocDMueSAtIHAxLnkpIC0ocDMueCAtIHAxLngpICoocDIueS1wMS55KSA8IDAuMCl7XHJcbiAgICAgICAgICAgIGlzVHJpYW5nbGVWMmNsb2Nrd2lzZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaXNUcmlhbmdsZVYyY2xvY2t3aXNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdUcmlhbmdsZShhLGIsYywgbWVzaCl7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjdHggPSB0aGF0LmdsO1xyXG5cclxuICAgICAgICB2YXIgYTEgPSB0aGF0LnYzVG92MihhLCBtZXNoKTtcclxuICAgICAgICB2YXIgYjEgPSB0aGF0LnYzVG92MihiLCBtZXNoKTtcclxuICAgICAgICB2YXIgYzEgPSB0aGF0LnYzVG92MihjLCBtZXNoKTtcclxuXHJcbiAgICAgICAgaWYoIXRoYXQuY2hlY2tDbG9ja3dpc2UoYTEsYjEsYzEpKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmYwMDAwJztcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZmMDAwMCc7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNvcnRUQnlZKGEsYikge1xyXG4gICAgICAgICAgICByZXR1cm4gYS55IC0gYi55O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRyaWFuZ2xlTGlzdCA9IFthMSxiMSxjMV0uc29ydChzb3J0VEJ5WSk7XHJcbiAgICAgICAgdmFyIGEyID0gdHJpYW5nbGVMaXN0WzBdO1xyXG4gICAgICAgIHZhciBiMiA9IHRyaWFuZ2xlTGlzdFsxXTtcclxuICAgICAgICB2YXIgYzIgPSB0cmlhbmdsZUxpc3RbMl07XHJcbiAgICAgICAgdmFyIGZsYXRUb3AsZmxhdEJvdHRvbTtcclxuICAgICAgICBpZihiMi55ID09PSBhMi55KXtcclxuICAgICAgICAgICAgZmxhdFRvcCA9IFtjMixhMixiMl07XHJcbiAgICAgICAgfWVsc2UgaWYoYjIueSA9PT0gYzIueSl7XHJcbiAgICAgICAgICAgIGZsYXRCb3R0b20gPSBbYTIsYjIsYzJdO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgYWxwaGEgPSAoYjIueS1hMi55KS8oYzIueS1hMi55KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBkID0gdGhhdC5nZXRWMkxpbmVhcihhMixjMixhbHBoYSk7XHJcblxyXG4gICAgICAgICAgICBmbGF0Qm90dG9tID0gW2EyLGIyLGRdO1xyXG4gICAgICAgICAgICBmbGF0VG9wID0gW2MyLGIyLGRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZmxhdEJvdHRvbSl7XHJcbiAgICAgICAgICAgIHRoYXQuZHJhd0ZsYXRUKGZsYXRCb3R0b20sbWVzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGZsYXRUb3Ape1xyXG4gICAgICAgICAgICB0aGF0LmRyYXdGbGF0VChmbGF0VG9wLG1lc2gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VjJMaW5lYXIoYTIsYzIsYWxwaGEpe1xyXG4gICAgICAgIGxldCBhYyA9IG5ldyBWZWN0b3IyKCkuc3ViVmVjdG9ycyhjMixhMik7XHJcbiAgICAgICAgbGV0IGQgPSBhMi5jbG9uZSgpLmFkZFNjYWxlZFZlY3RvcihhYywgYWxwaGEpO1xyXG5cclxuICAgICAgICBsZXQgYXV2ID0gYTIudXYuY2xvbmUoKTtcclxuICAgICAgICBsZXQgY3V2ID0gYzIudXYuY2xvbmUoKTtcclxuICAgICAgICBsZXQgZHV2ID0gbmV3IFZlY3RvcjIoKS5hZGRWZWN0b3JzKGF1di5tdWx0aXBseVNjYWxhcigxLWFscGhhKSwgY3V2Lm11bHRpcGx5U2NhbGFyKGFscGhhKSk7XHJcbiAgICAgICAgZC51diA9IGR1djtcclxuXHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1QodCl7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjdHggPSB0aGF0LmdsO1xyXG5cclxuICAgICAgICB2YXIgYTEgPSB0WzBdO1xyXG4gICAgICAgIHZhciBiMSA9IHRbMV07XHJcbiAgICAgICAgdmFyIGMxID0gdFsyXTtcclxuXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmYwMDAwJztcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZmMDAwMCc7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5tb3ZlVG8oYTEueCxhMS55KTtcclxuICAgICAgICBjdHgubGluZVRvKGIxLngsYjEueSk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhjMS54LGMxLnkpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0ZsYXRUKHQsIG1lc2gpe1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICBsZXQgY3R4ID0gdGhhdC5nbDtcclxuXHJcbiAgICAgICAgbGV0IGEgPSB0WzBdO1xyXG4gICAgICAgIGxldCBiO1xyXG4gICAgICAgIGxldCBjO1xyXG5cclxuICAgICAgICBpZih0WzFdLng8dFsyXS54KXtcclxuICAgICAgICAgICAgYiA9IHRbMV07XHJcbiAgICAgICAgICAgIGMgPSB0WzJdO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBjID0gdFsxXTtcclxuICAgICAgICAgICAgYiA9IHRbMl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3RhcnRZID0gTWF0aC5yb3VuZChhLnkpO1xyXG4gICAgICAgIGxldCBlbmRZID0gTWF0aC5yb3VuZChiLnkpO1xyXG4gICAgICAgIGxldCBoZWlnaHQgPSBNYXRoLmFicyhlbmRZIC0gc3RhcnRZKTtcclxuXHJcblxyXG4gICAgICAgIGxldCBkeSA9IDE7XHJcbiAgICAgICAgaWYoZW5kWTxzdGFydFkpe1xyXG4gICAgICAgICAgICBkeSA9IC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGxldCB5PXN0YXJ0WTsgKHktc3RhcnRZKSooeS1lbmRZKTw9MDsgeSs9ZHkpe1xyXG4gICAgICAgICAgICBpZih5PDB8fHk+NjAwKXtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgYWxwaGEgPSBNYXRoLmFicyh5LXN0YXJ0WSkvaGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgc3RhcnRWMiA9IHRoYXQuZ2V0VjJMaW5lYXIoYSxiLGFscGhhKTtcclxuICAgICAgICAgICAgbGV0IGVuZFYyID0gdGhhdC5nZXRWMkxpbmVhcihhLGMsYWxwaGEpO1xyXG4gICAgICAgICAgICBsZXQgc3RhcnRYID0gTWF0aC5yb3VuZChzdGFydFYyLngpO1xyXG4gICAgICAgICAgICBsZXQgZW5kWCA9IE1hdGgucm91bmQoZW5kVjIueCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgd2lkdGggPSBlbmRYIC0gc3RhcnRYO1xyXG4gICAgICAgICAgICBpZih3aWR0aCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yKGxldCB4PXN0YXJ0WDsgeDw9ZW5kWDsgeCsrKXtcclxuICAgICAgICAgICAgICAgIGlmKHg8MHx8eD42MDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBhbHBoYVggPSBNYXRoLmFicyh4LXN0YXJ0WCkvd2lkdGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnQgPSB0aGF0LmdldFYyTGluZWFyKHN0YXJ0VjIsZW5kVjIsYWxwaGFYKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSBtZXNoLm1hdGVyaWFsLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yMjU1O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGNvbG9yKXtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjI1NSA9IFtjb2xvclswXSoyNTUsY29sb3JbMV0qMjU1LGNvbG9yWzJdKjI1NSxjb2xvclszXV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRleCA9IG1lc2gubWF0ZXJpYWwubWFwO1xyXG4gICAgICAgICAgICAgICAgaWYodGV4ICYmIHRleC5yZWFkeSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3IyNTUgPSB0ZXguZ2V0Q29sb3JCeVVWKHBvaW50LnV2LngscG9pbnQudXYueSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHIgPSBjb2xvcjI1NVswXTtcclxuICAgICAgICAgICAgICAgIGxldCBnID0gY29sb3IyNTVbMV07XHJcbiAgICAgICAgICAgICAgICBsZXQgYiA9IGNvbG9yMjU1WzJdO1xyXG5cclxuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiKCcrcisnLCcrZysnLCcrYisnKSc7XHJcblxyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHgseSwxLDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxPYmpMaXN0KG9iaiwgYWxsT2JqTGlzdCl7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiBvYmouY2hpbGRyZW4pe1xyXG4gICAgICAgICAgICBpZihvYmouY2hpbGRyZW5baV0uZ2VvbWV0cnkpe1xyXG4gICAgICAgICAgICAgICAgYWxsT2JqTGlzdC5wdXNoKG9iai5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhhdC5nZXRBbGxPYmpMaXN0KG9iai5jaGlsZHJlbltpXSxhbGxPYmpMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFsbE9iakxpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgc29ydFJlbmRlckxpc3Qoc2NlbmUpe1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIGFsbE9iakxpc3QgPSB0aGF0LmdldEFsbE9iakxpc3Qoc2NlbmUgLFtdKTtcclxuXHJcbiAgICAgICAgZm9yKHZhciBpIGluIGFsbE9iakxpc3Qpe1xyXG4gICAgICAgICAgICB2YXIgcGEgPSBhbGxPYmpMaXN0W2ldLmdldFdvcmxkUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgdmFyIHBjID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkodGhhdC5jdXJDYW1lcmFQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHZhciBkYSA9IHBjLmRpc3RhbmNlVG8ocGEpO1xyXG4gICAgICAgICAgICBhbGxPYmpMaXN0W2ldLmRpc3RhbmNlVG9DYW1lcmEgPSBkYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFsbE9ialNvcnRlZExpc3QgPSBhbGxPYmpMaXN0LnNvcnQodGhhdC5zb3J0RnVuKTtcclxuICAgICAgICByZXR1cm4gYWxsT2JqU29ydGVkTGlzdDtcclxuICAgIH1cclxuXHJcbiAgICBzb3J0RnVuKGEsIGIpe1xyXG4gICAgICAgIHJldHVybiBiLmRpc3RhbmNlVG9DYW1lcmEgLSBhLmRpc3RhbmNlVG9DYW1lcmE7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJlcjtcclxuIiwiXHJcbmltcG9ydCB7TWF0cml4NH0gZnJvbSBcIi4uL21hdGgvTWF0cml4NFwiO1xyXG5pbXBvcnQge1ZlY3RvcjN9IGZyb20gXCIuLi9tYXRoL1ZlY3RvcjNcIjtcclxuaW1wb3J0IHtRdWF0ZXJuaW9ufSBmcm9tIFwiLi4vbWF0aC9RdWF0ZXJuaW9uXCI7XHJcblxyXG5jbGFzcyBDYW1lcmEge1xyXG4gICAgY29uc3RydWN0b3IoZm92LCBhc3BlY3QsIG5lYXIsIGZhcikge1xyXG4gICAgICAgIHRoaXMuZm92ID0gZm92O1xyXG4gICAgICAgIHRoaXMuYXNwZWN0ID0gYXNwZWN0O1xyXG4gICAgICAgIHRoaXMubmVhciA9IG5lYXI7XHJcbiAgICAgICAgdGhpcy5mYXIgPSBmYXI7XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBbMCwgMCwgMTBdO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gWzAsMCwwXTtcclxuICAgICAgICB0aGlzLnVwID0gWzAsMSwwXTtcclxuXHJcbiAgICAgICAgdGhpcy5WUG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gWzAsMCwtMV07XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IFsxLDAsMF07XHJcblxyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBbMSwxLDFdO1xyXG4gICAgICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIHRoaXMubWF0cml4V29ybGQgPSB0aGlzLm1hdHJpeDtcclxuICAgICAgICB0aGlzLnByb2plY3Rpb25NYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUFsbCgpe1xyXG4gICAgICAgIHRoaXMudXBkYXRlT3B0aW9uKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaXgoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVZQTWF0cml4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTWF0cml4KCl7XHJcbiAgICAgICAgdmFyIHF1YXRlcm5pb25EID0gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tVW5pdFZlY3RvcnMobmV3IFZlY3RvcjMoMCwwLC0xKSwgbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkodGhpcy5kaXJlY3Rpb24pKTtcclxuICAgICAgICB2YXIgcmlnaHQyID0gbmV3IFZlY3RvcjMoMSwwLDApLmFwcGx5UXVhdGVybmlvbihxdWF0ZXJuaW9uRCk7XHJcbiAgICAgICAgdmFyIHF1YXRlcm5pb25SID0gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tVW5pdFZlY3RvcnMocmlnaHQyLCBuZXcgVmVjdG9yMygpLmZyb21BcnJheSh0aGlzLnJpZ2h0KSk7XHJcbiAgICAgICAgdmFyIHF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpLm11bHRpcGx5UXVhdGVybmlvbnMocXVhdGVybmlvblIsIHF1YXRlcm5pb25EKTtcclxuICAgICAgICB0aGlzLnF1YXRlcm5pb24gPSBxdWF0ZXJuaW9uO1xyXG5cclxuICAgICAgICB0aGlzLm1hdHJpeC5jb21wb3NlKCBuZXcgVmVjdG9yMygpLmZyb21BcnJheSh0aGlzLnBvc2l0aW9uKSwgdGhpcy5xdWF0ZXJuaW9uLCBuZXcgVmVjdG9yMygpLmZyb21BcnJheSh0aGlzLnNjYWxlKSApO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXg0KCkuc2V0UGVyc3BlY3RpdmUodGhpcy5mb3YsIHRoaXMuYXNwZWN0LCB0aGlzLm5lYXIsIHRoaXMuZmFyKTtcclxuICAgICAgICAvLyB0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkICgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU9wdGlvbigpe1xyXG4gICAgICAgIHZhciB0YXJnZXRWMyA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHRoaXMudGFyZ2V0KTtcclxuICAgICAgICB2YXIgcG9zaXRpb25WMyA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHRoaXMucG9zaXRpb24pO1xyXG4gICAgICAgIHZhciB1cFYzID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkodGhpcy51cCk7XHJcblxyXG4gICAgICAgIHZhciBkaXJlY3Rpb25WMyA9IG5ldyBWZWN0b3IzKCkuc3ViVmVjdG9ycyh0YXJnZXRWMywgcG9zaXRpb25WMykubm9ybWFsaXplKCk7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb25WMy50b0FycmF5KCk7XHJcblxyXG4gICAgICAgIHZhciByaWdodFYzID0gbmV3IFZlY3RvcjMoKS5jcm9zc1ZlY3RvcnMoZGlyZWN0aW9uVjMsIHVwVjMpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodFYzLnRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy51cCA9IG5ldyBWZWN0b3IzKCkuY3Jvc3NWZWN0b3JzKHJpZ2h0VjMsIGRpcmVjdGlvblYzKS5ub3JtYWxpemUoKS50b0FycmF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UG9zaXRpb24ocG9zaXRpb24pe1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnVwZGF0ZUFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRhcmdldCh0YXJnZXQpe1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXAodXApe1xyXG4gICAgICAgIHRoaXMudXAgPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheSh1cCkubm9ybWFsaXplKCkudG9BcnJheSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWxsKCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICB1cGRhdGVWUE1hdHJpeCgpe1xyXG4gICAgICAgIHRoaXMuVlBtYXRyaXggPSBuZXcgTWF0cml4NCgpLnNldFBlcnNwZWN0aXZlKHRoaXMuZm92LCB0aGlzLmFzcGVjdCwgdGhpcy5uZWFyLCB0aGlzLmZhcik7XHJcbiAgICAgICAgdmFyIFZtYXRyaXggPSBuZXcgTWF0cml4NCgpLmdldEludmVyc2UodGhpcy5tYXRyaXgpO1xyXG4gICAgICAgIHRoaXMuVlBtYXRyaXguY29uY2F0KFZtYXRyaXgpO1xyXG4gICAgICAgIC8v562J5Lu3XHJcbiAgICAgICAgLy8gdGhpcy5WUG1hdHJpeC5sb29rQXQyKHRoaXMucG9zaXRpb25bMF0sdGhpcy5wb3NpdGlvblsxXSx0aGlzLnBvc2l0aW9uWzJdLCB0aGlzLnRhcmdldFswXSx0aGlzLnRhcmdldFsxXSx0aGlzLnRhcmdldFsyXSwgdGhpcy51cFswXSx0aGlzLnVwWzFdLHRoaXMudXBbMl0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FtZXJhO1xyXG5cclxuIiwiXHJcbmltcG9ydCB7VmVjdG9yM30gZnJvbSBcIi4uL21hdGgvVmVjdG9yM1wiO1xyXG5cclxuY2xhc3MgQ2FtZXJhQ29udHJvbGxlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihjYW1lcmEpIHtcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VzZTBTdGF0ZSA9ICd1cCc7XHJcbiAgICAgICAgdGhpcy5tb3VzZTFTdGF0ZSA9ICd1cCc7XHJcbiAgICAgICAgdGhpcy5tb3VzZTJTdGF0ZSA9ICd1cCc7XHJcblxyXG4gICAgICAgIHRoaXMueCA9IC0xO1xyXG4gICAgICAgIHRoaXMueSA9IC0xO1xyXG5cclxuICAgICAgICB0aGlzLm1pblRpbHQgPSAwLjE7XHJcbiAgICAgICAgdGhpcy5tYXhUaWx0ID0gMy4wNDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKXtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUuYnV0dG9uKycgZG93biAnK2UuY2xpZW50WCsnLCcrZS5jbGllbnRZKTtcclxuICAgICAgICAgICAgdmFyIGRvbSA9ICB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2NhbnZhcycpWzBdO1xyXG4gICAgICAgICAgICBpZighZG9tKXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgaWYoZS5jbGllbnRYIDwgcmVjdC5sZWZ0IHx8IGUuY2xpZW50WCA+IHJlY3QucmlnaHQgfHwgZS5jbGllbnRZIDwgcmVjdC50b3AgfHwgZS5jbGllbnRZID4gcmVjdC5ib3R0b20pe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGUuYnV0dG9uID09IDApe1xyXG4gICAgICAgICAgICAgICAgdGhhdC5tb3VzZTBTdGF0ZSA9ICdkb3duJztcclxuICAgICAgICAgICAgfWVsc2UgaWYoZS5idXR0b24gPT0gMSl7XHJcbiAgICAgICAgICAgICAgICB0aGF0Lm1vdXNlMVN0YXRlID0gJ2Rvd24nO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihlLmJ1dHRvbiA9PSAyKXtcclxuICAgICAgICAgICAgICAgIHRoYXQubW91c2UyU3RhdGUgPSAnZG93bic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUuYnV0dG9uKycgdXAgJytlLmNsaWVudFgrJywnK2UuY2xpZW50WSk7XHJcbiAgICAgICAgICAgIGlmKGUuYnV0dG9uID09IDApe1xyXG4gICAgICAgICAgICAgICAgdGhhdC5tb3VzZTBTdGF0ZSA9ICd1cCc7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGUuYnV0dG9uID09IDEpe1xyXG4gICAgICAgICAgICAgICAgdGhhdC5tb3VzZTFTdGF0ZSA9ICd1cCc7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGUuYnV0dG9uID09IDIpe1xyXG4gICAgICAgICAgICAgICAgdGhhdC5tb3VzZTJTdGF0ZSA9ICd1cCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5idXR0b24rJyBtb3ZlICcrZS5jbGllbnRYKycsJytlLmNsaWVudFkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhbWVyYSA9IHRoYXQuY2FtZXJhO1xyXG4gICAgICAgICAgICBpZih0aGF0Lm1vdXNlMFN0YXRlID09ICdkb3duJyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGFYID0gZS5jbGllbnRYIC0gdGhhdC54O1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhWSA9IGUuY2xpZW50WSAtIHRoYXQueTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgYW5nbGUgPSBNYXRoLnNxcnQoZGVsdGFYKmRlbHRhWCArIGRlbHRhWSpkZWx0YVkpLzgwO1xyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIHZhciB1cFYzID0gbmV3IFZlY3RvcjMoY2FtZXJhLnVwKTtcclxuICAgICAgICAgICAgICAgIC8vIHZhciByaWdodFYzID0gbmV3IFZlY3RvcjMoY2FtZXJhLnJpZ2h0KTtcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgYXhpc1YzID0gbmV3IFZlY3RvcjMoKS5hZGRWZWN0b3JzKCBuZXcgVmVjdG9yMygpLnNjYWxlVmVjdG9ycyh1cFYzLGRlbHRhWCkgLCBuZXcgVmVjdG9yMygpLnNjYWxlVmVjdG9ycyhyaWdodFYzLGRlbHRhWSkpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIHZhciBvbGRQb3NpdGlvblYzID0gbmV3IFZlY3RvcjMoY2FtZXJhLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBuZXdQb3NpdGlvblYzID0gbmV3IFZlY3RvcjMoKS5yb3RhdGVCeVZlY3RvcihvbGRQb3NpdGlvblYzLCBheGlzVjMsIGFuZ2xlKTtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBuZXdQb3NpdGlvbiA9IG5ld1Bvc2l0aW9uVjMudG9BcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIGNhbWVyYS5zZXRQb3NpdGlvbihuZXdQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGF4aXNZVjMgPSBuZXcgVmVjdG9yMygwLDEsMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGVZID0gZGVsdGFYLzIwMDtcclxuICAgICAgICAgICAgICAgIHZhciBvbGRQb3NpdGlvblYzID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkoY2FtZXJhLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdQb3NpdGlvblYzID0gbmV3IFZlY3RvcjMoKS5yb3RhdGVCeVZlY3RvcihvbGRQb3NpdGlvblYzLCBheGlzWVYzLCBhbmdsZVkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1Bvc2l0aW9uID0gbmV3UG9zaXRpb25WMy50b0FycmF5KCk7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24obmV3UG9zaXRpb24pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGVYID0gZGVsdGFZLzIwMDtcclxuICAgICAgICAgICAgICAgIHZhciB0aWx0ID0gdGhhdC5nZXRUaWx0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kVGlsdCA9IHRpbHQgLSBhbmdsZVg7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZW5kVGlsdDx0aGF0Lm1heFRpbHQgJiYgZW5kVGlsdD50aGF0Lm1pblRpbHQpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXhpc1hWMyA9IG5ldyBWZWN0b3IzKGNhbWVyYS5yaWdodFswXSwgY2FtZXJhLnJpZ2h0WzFdLCBjYW1lcmEucmlnaHRbMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG9sZFBvc2l0aW9uVjMgPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheShjYW1lcmEucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1Bvc2l0aW9uVjMgPSBuZXcgVmVjdG9yMygpLnJvdGF0ZUJ5VmVjdG9yKG9sZFBvc2l0aW9uVjMsIGF4aXNYVjMsIGFuZ2xlWCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBuZXdQb3NpdGlvblYzLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24obmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYodGhhdC5tb3VzZTJTdGF0ZSA9PSAnZG93bicpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhWCA9IGUuY2xpZW50WCAtIHRoYXQueDtcclxuICAgICAgICAgICAgICAgIHZhciBkZWx0YVkgPSBlLmNsaWVudFkgLSB0aGF0Lnk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBVcCA9IG5ldyBWZWN0b3IzKCkuY3Jvc3NWZWN0b3JzKG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KGNhbWVyYS5yaWdodCksIG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KGNhbWVyYS5kaXJlY3Rpb24pKTtcclxuICAgICAgICAgICAgICAgIHZhciBheGlzWVYzID0gdGVtcFVwO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvbGRUYXJnZXRWMyA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KGNhbWVyYS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1RhcmdldFYzID0gbmV3IFZlY3RvcjMoKS5hZGRWZWN0b3JzKG9sZFRhcmdldFYzLCBuZXcgVmVjdG9yMygpLnNjYWxlVmVjdG9ycyhheGlzWVYzLCBkZWx0YVkvMzApKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdUYXJnZXRWMyA9IG5ld1RhcmdldFYzLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5zZXRUYXJnZXQobmV3VGFyZ2V0VjMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvbGRQb3NpdGlvblYzID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkoY2FtZXJhLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdQb3NpdGlvblYzID0gbmV3IFZlY3RvcjMoKS5hZGRWZWN0b3JzKG9sZFBvc2l0aW9uVjMsIG5ldyBWZWN0b3IzKCkuc2NhbGVWZWN0b3JzKGF4aXNZVjMsIGRlbHRhWS8zMCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1Bvc2l0aW9uID0gbmV3UG9zaXRpb25WMy50b0FycmF5KCk7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24obmV3UG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBheGlzWFYzID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkoY2FtZXJhLnJpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBvbGRUYXJnZXRWMyA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KGNhbWVyYS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgbmV3VGFyZ2V0VjMgPSBuZXcgVmVjdG9yMygpLmFkZFZlY3RvcnMob2xkVGFyZ2V0VjMsIG5ldyBWZWN0b3IzKCkuc2NhbGVWZWN0b3JzKGF4aXNYVjMsIC1kZWx0YVgvMzApKTtcclxuICAgICAgICAgICAgICAgIG5ld1RhcmdldFYzID0gbmV3VGFyZ2V0VjMudG9BcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgY2FtZXJhLnNldFRhcmdldChuZXdUYXJnZXRWMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgb2xkUG9zaXRpb25WMyA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KGNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3UG9zaXRpb25WMyA9IG5ldyBWZWN0b3IzKCkuYWRkVmVjdG9ycyhvbGRQb3NpdGlvblYzLCBuZXcgVmVjdG9yMygpLnNjYWxlVmVjdG9ycyhheGlzWFYzLCAtZGVsdGFYLzMwKSk7XHJcbiAgICAgICAgICAgICAgICBuZXdQb3NpdGlvbiA9IG5ld1Bvc2l0aW9uVjMudG9BcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgY2FtZXJhLnNldFBvc2l0aW9uKG5ld1Bvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoYXQueCA9IGUuY2xpZW50WDtcclxuICAgICAgICAgICAgdGhhdC55ID0gZS5jbGllbnRZO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5idXR0b24rJyB3aGVlbCAnK2Uud2hlZWxEZWx0YSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FtZXJhID0gdGhhdC5jYW1lcmE7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBlLndoZWVsRGVsdGE7XHJcblxyXG4gICAgICAgICAgICBpZihkZWx0YSA9PSAwIHx8IHR5cGVvZihkZWx0YSkgIT0gJ251bWJlcicpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlbHRhID0gTWF0aC5hYnMoZGVsdGEpL2RlbHRhO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRpcmVjdGlvblYzID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkoY2FtZXJhLmRpcmVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2xkUG9zaXRpb25WMyA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KGNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHZhciBkaXMgPSBvbGRQb3NpdGlvblYzLmxlbmd0aFNxKCk7XHJcbiAgICAgICAgICAgIGRpcyA9IE1hdGguc3FydChkaXMpO1xyXG4gICAgICAgICAgICB2YXIgbmV3UG9zaXRpb25WMyA9IG5ldyBWZWN0b3IzKCkuYWRkVmVjdG9ycyhvbGRQb3NpdGlvblYzLCBuZXcgVmVjdG9yMygpLnNjYWxlVmVjdG9ycyhkaXJlY3Rpb25WMywgZGlzLzEwKmRlbHRhKSk7XHJcbiAgICAgICAgICAgIHZhciBuZXdQb3NpdGlvbiA9IG5ld1Bvc2l0aW9uVjMudG9BcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgY2FtZXJhLnNldFBvc2l0aW9uKG5ld1Bvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGlsdCgpe1xyXG4gICAgICAgIHZhciBjYW1lcmEgPSB0aGlzLmNhbWVyYTtcclxuICAgICAgICB2YXIgZGlyID0gY2FtZXJhLmRpcmVjdGlvbjtcclxuICAgICAgICB2YXIgYXhpeFkgPSBuZXcgVmVjdG9yMygwLC0xLDApO1xyXG4gICAgICAgIHZhciBkaXJWMyA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KGRpcik7XHJcblxyXG4gICAgICAgIHZhciB0aWx0ID0gYXhpeFkuYW5nbGVUbyhkaXJWMyk7XHJcbiAgICAgICAgcmV0dXJuIHRpbHQ7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYW1lcmFDb250cm9sbGVyO1xyXG4iLCJpbXBvcnQgTWVzaCBmcm9tIFwiLi9NZXNoLmpzXCI7XHJcbmltcG9ydCBBbWJpZW50TGlnaHQgZnJvbSBcIi4uL2xpZ2h0L0FtYmllbnRMaWdodFwiO1xyXG5cclxuY2xhc3MgU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW0pIHtcclxuICAgICAgICBwYXJhbSA9IHBhcmFtIHx8IHt9O1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcclxuICAgICAgICB0aGlzLmxpZ2h0cyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZChvYmope1xyXG4gICAgICAgIGlmKG9iai50eXBlID09ICdNZXNoJyl7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChvYmopO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLmxpZ2h0cy5wdXNoKG9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTY2VuZTsiLCJcclxuY2xhc3MgVGV4dHVyZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbSkge1xyXG4gICAgICAgIHBhcmFtID0gcGFyYW0gfHwge307XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IHBhcmFtLmltYWdlIHx8IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHRoaXMud3JhcFMgPSBwYXJhbS53cmFwUyB8fCBDT09MLlJFUEVBVDtcclxuICAgICAgICB0aGlzLndyYXBUID0gcGFyYW0ud3JhcFQgfHwgQ09PTC5SRVBFQVQ7XHJcbiAgICAgICAgdGhpcy5tYWdGaWx0ZXIgPSBwYXJhbS5tYWdGaWx0ZXIgfHwgQ09PTC5ORUFSRVNUO1xyXG4gICAgICAgIHRoaXMubWluRmlsdGVyID0gcGFyYW0ubWluRmlsdGVyIHx8IENPT0wuTkVBUkVTVDtcclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZURhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFkeSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRDYW52YXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0Q2FudmFzKCl7XHJcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHRoYXQuaW1hZ2Uub25sb2FkPWZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gdGhhdC5pbWFnZS53aWR0aDtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHRoYXQuaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGF0LmltYWdlLCAwLCAwKTtcclxuICAgICAgICAgICAgbGV0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCkuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHRoYXQud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgdGhhdC5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoYXQuaW1hZ2VEYXRhID0gaW1hZ2VEYXRhO1xyXG5cclxuICAgICAgICAgICAgdGhhdC5yZWFkeSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENvbG9yQnlVVihzLHQpe1xyXG5cclxuICAgICAgICBsZXQgdSA9IHM7XHJcbiAgICAgICAgbGV0IHYgPSB0O1xyXG5cclxuICAgICAgICBpZih1PjEpe1xyXG4gICAgICAgICAgICB1ID0gdSAtIE1hdGguZmxvb3IodSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHY+MSl7XHJcbiAgICAgICAgICAgIHYgPSB2IC0gTWF0aC5mbG9vcih2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3Iodip0aGlzLmhlaWdodCkqdGhpcy53aWR0aCo0ICsgTWF0aC5mbG9vcih1KnRoaXMud2lkdGgpKjQ7XHJcbiAgICAgICAgbGV0IHIgPSB0aGlzLmltYWdlRGF0YVtpbmRleF07XHJcbiAgICAgICAgbGV0IGcgPSB0aGlzLmltYWdlRGF0YVtpbmRleCsxXTtcclxuICAgICAgICBsZXQgYiA9IHRoaXMuaW1hZ2VEYXRhW2luZGV4KzJdO1xyXG4gICAgICAgIGxldCBhID0gdGhpcy5pbWFnZURhdGFbaW5kZXgrM107XHJcblxyXG4gICAgICAgIHJldHVybiBbcixnLGIsYV07XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKXtcclxuXHJcbiAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgaW1hZ2Uuc3JjID0gdGhpcy5pbWFnZS5zcmM7XHJcblxyXG4gICAgICAgIHZhciB0ZXh0dXJlID0gbmV3IFRleHR1cmUoe1xyXG4gICAgICAgICAgICBpbWFnZTogaW1hZ2UsXHJcbiAgICAgICAgICAgIHdyYXBTOiB0aGlzLndyYXBTLFxyXG4gICAgICAgICAgICB3cmFwVDogdGhpcy53cmFwVCxcclxuICAgICAgICAgICAgbWFnRmlsdGVyOiB0aGlzLm1hZ0ZpbHRlcixcclxuICAgICAgICAgICAgbWluRmlsdGVyOiB0aGlzLm1pbkZpbHRlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRleHR1cmU7XHJcbiIsImltcG9ydCBNYXRlcmlhbCBmcm9tIFwiLi9NYXRlcmlhbFwiO1xyXG5cclxuY2xhc3MgTWVzaEJhc2ljTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtKSB7XHJcbiAgICAgICAgc3VwZXIocGFyYW0pO1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICdNZXNoQmFzaWNNYXRlcmlhbCc7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNZXNoQmFzaWNNYXRlcmlhbDtcclxuIiwiaW1wb3J0IE1hdGVyaWFsIGZyb20gXCIuL01hdGVyaWFsXCI7XHJcblxyXG5jbGFzcyBNZXNoTGFtYmVydE1hdGVyaWFsIGV4dGVuZHMgTWF0ZXJpYWx7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbSkge1xyXG4gICAgICAgIHN1cGVyKHBhcmFtKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSAnTWVzaExhbWJlcnRNYXRlcmlhbCc7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNZXNoTGFtYmVydE1hdGVyaWFsO1xyXG4iLCJpbXBvcnQgTWF0ZXJpYWwgZnJvbSBcIi4vTWF0ZXJpYWxcIjtcclxuXHJcbmNsYXNzIE1lc2hTdGFuZGFyZE1hdGVyaWFsIGV4dGVuZHMgTWF0ZXJpYWx7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbSkge1xyXG4gICAgICAgIHN1cGVyKHBhcmFtKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSAnTWVzaFN0YW5kYXJkTWF0ZXJpYWwnO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWVzaFN0YW5kYXJkTWF0ZXJpYWw7XHJcbiIsImltcG9ydCB7VmVjdG9yM30gZnJvbSBcIi4uL21hdGgvVmVjdG9yM1wiO1xyXG5cclxuY2xhc3MgR2VvbWV0cnkge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW0pIHtcclxuICAgICAgICBwYXJhbSA9IHBhcmFtIHx8IHt9O1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSBjdWJlXHJcbiAgICAgICAgLy8gICAgdjYtLS0tLSB2NVxyXG4gICAgICAgIC8vICAgL3wgICAgICAvfFxyXG4gICAgICAgIC8vICB2MS0tLS0tLXYwfFxyXG4gICAgICAgIC8vICB8IHwgICAgIHwgfFxyXG4gICAgICAgIC8vICB8IHx2Ny0tLXwtfHY0XHJcbiAgICAgICAgLy8gIHwvICAgICAgfC9cclxuICAgICAgICAvLyAgdjItLS0tLS12M1xyXG5cclxuICAgICAgICB0aGlzLnV2ID0gcGFyYW0udXYgfHwgbmV3IEZsb2F0MzJBcnJheShbICAgLy8gVmVydGV4IGNvb3JkaW5hdGVzXHJcblxyXG4gICAgICAgICAgICAxLDEsIDAsMSwgMCwwLCAxLDAsICAvLyB2MC12MS12Mi12MyBmcm9udFxyXG4gICAgICAgICAgICAwLDEsIDAsMCwgMSwwLCAxLDEsICAvLyB2MC12My12NC12NSByaWdodFxyXG4gICAgICAgICAgICAxLDAsIDEsMSwgMCwxLCAwLDAsICAvLyB2MC12NS12Ni12MSB1cFxyXG4gICAgICAgICAgICAxLDEsIDAsMSwgMCwwLCAxLDAsICAvLyB2MS12Ni12Ny12MiBsZWZ0XHJcbiAgICAgICAgICAgIDAsMSwgMSwxLCAxLDAsIDAsMCwgIC8vIHY3LXY0LXYzLXYyIGRvd25cclxuICAgICAgICAgICAgMSwwLCAwLDAsIDAsMSwgMSwxICAgLy8gdjQtdjctdjYtdjUgYmFja1xyXG5cclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHBhcmFtLnZlcnRpY2VzIHx8IG5ldyBGbG9hdDMyQXJyYXkoWyAgIC8vIFZlcnRleCBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICAwLjUsIDAuNSwgMC41LCAgLTAuNSwgMC41LCAwLjUsICAtMC41LC0wLjUsIDAuNSwgICAwLjUsLTAuNSwgMC41LCAgLy8gdjAtdjEtdjItdjMgZnJvbnRcclxuICAgICAgICAgICAgMC41LCAwLjUsIDAuNSwgICAwLjUsLTAuNSwgMC41LCAgIDAuNSwtMC41LC0wLjUsICAgMC41LCAwLjUsLTAuNSwgIC8vIHYwLXYzLXY0LXY1IHJpZ2h0XHJcbiAgICAgICAgICAgIDAuNSwgMC41LCAwLjUsICAgMC41LCAwLjUsLTAuNSwgIC0wLjUsIDAuNSwtMC41LCAgLTAuNSwgMC41LCAwLjUsICAvLyB2MC12NS12Ni12MSB1cFxyXG4gICAgICAgICAgICAtMC41LCAwLjUsIDAuNSwgIC0wLjUsIDAuNSwtMC41LCAgLTAuNSwtMC41LC0wLjUsICAtMC41LC0wLjUsIDAuNSwgIC8vIHYxLXY2LXY3LXYyIGxlZnRcclxuICAgICAgICAgICAgLTAuNSwtMC41LC0wLjUsICAgMC41LC0wLjUsLTAuNSwgICAwLjUsLTAuNSwgMC41LCAgLTAuNSwtMC41LCAwLjUsICAvLyB2Ny12NC12My12MiBkb3duXHJcbiAgICAgICAgICAgIDAuNSwtMC41LC0wLjUsICAtMC41LC0wLjUsLTAuNSwgIC0wLjUsIDAuNSwtMC41LCAgIDAuNSwgMC41LC0wLjUgICAvLyB2NC12Ny12Ni12NSBiYWNrXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIHRoaXMubm9ybWFsID0gcGFyYW0ubm9ybWFsIHx8IHRoaXMudmVydGljZXM7XHJcblxyXG4gICAgICAgIGlmKHBhcmFtLmluZGljZXMpe1xyXG4gICAgICAgICAgICB0aGlzLmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkocGFyYW0uaW5kaWNlcyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciBpbmRpY2VzQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8cGFyYW0udmVydGljZXMubGVuZ3RoLzM7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2VzQXJyYXkucHVzaChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoaW5kaWNlc0FycmF5KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLm1vcnBoQXR0cmlidXRlcyA9IHBhcmFtLm1vcnBoQXR0cmlidXRlcztcclxuXHJcbiAgICAgICAgLy8gdGhpcy51cGRhdGVOb3JtYWwoKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGFCdWZmZXIoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRhQnVmZmVyKCl7XHJcbiAgICAgICAgdmFyIGJ1ZmZlciA9IFtdO1xyXG4gICAgICAgIHZhciB1diA9IHRoaXMudXY7XHJcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcztcclxuICAgICAgICB2YXIgbm9ybWFsID0gdGhpcy5ub3JtYWw7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8dmVydGljZXMubGVuZ3RoOyBpKz0zKXtcclxuICAgICAgICAgICAgYnVmZmVyLnB1c2godmVydGljZXNbaSswXSk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHZlcnRpY2VzW2krMV0pO1xyXG4gICAgICAgICAgICBidWZmZXIucHVzaCh2ZXJ0aWNlc1tpKzJdKTtcclxuXHJcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKG5vcm1hbFtpKzBdKTtcclxuICAgICAgICAgICAgYnVmZmVyLnB1c2gobm9ybWFsW2krMV0pO1xyXG4gICAgICAgICAgICBidWZmZXIucHVzaChub3JtYWxbaSsyXSk7XHJcblxyXG4gICAgICAgICAgICBidWZmZXIucHVzaCh1dltpLzMqMiswXSk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHV2W2kvMyoyKzFdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU5vcm1hbCgpe1xyXG4gICAgICAgIHZhciBub3JtYWwgPSBbXTtcclxuICAgICAgICB2YXIgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xyXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPHZlcnRpY2VzLmxlbmd0aDsgaSs9Myo0KXtcclxuICAgICAgICAgICAgdmFyIGxpbmUxID0gbmV3IFZlY3RvcjMoKS5zdWJWZWN0b3JzKFxyXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcjModmVydGljZXNbaSswXSwgdmVydGljZXNbaSsxXSwgdmVydGljZXNbaSsyXSksXHJcbiAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMyh2ZXJ0aWNlc1tpKzNdLCB2ZXJ0aWNlc1tpKzRdLCB2ZXJ0aWNlc1tpKzVdKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB2YXIgbGluZTIgPSBuZXcgVmVjdG9yMygpLnN1YlZlY3RvcnMoXHJcbiAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMyh2ZXJ0aWNlc1tpKzNdLCB2ZXJ0aWNlc1tpKzRdLCB2ZXJ0aWNlc1tpKzVdKSxcclxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IzKHZlcnRpY2VzW2krNl0sIHZlcnRpY2VzW2krN10sIHZlcnRpY2VzW2krOF0pLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB2YXIgY3VyX25vcm1hbCA9IG5ldyBWZWN0b3IzKCkuY3Jvc3NWZWN0b3JzKFxyXG4gICAgICAgICAgICAgICAgbGluZTEsXHJcbiAgICAgICAgICAgICAgICBsaW5lMlxyXG4gICAgICAgICAgICApLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgZm9yKHZhciBqPTAgO2o8NDsgaisrKXtcclxuICAgICAgICAgICAgICAgIG5vcm1hbC5wdXNoKGN1cl9ub3JtYWxbMF0sIGN1cl9ub3JtYWxbMV0sIGN1cl9ub3JtYWxbMl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm9ybWFsID0gbmV3IEZsb2F0MzJBcnJheShub3JtYWwpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBjbG9uZSgpe1xyXG4gICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBHZW9tZXRyeSh7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzOiB0aGlzLnZlcnRpY2VzLnNsaWNlKDApLFxyXG4gICAgICAgICAgICBpbmRpY2VzOiB0aGlzLmluZGljZXMuc2xpY2UoMClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGdlb21ldHJ5O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHZW9tZXRyeTtcclxuIiwiaW1wb3J0IHtWZWN0b3IzfSBmcm9tIFwiLi4vbWF0aC9WZWN0b3IzXCI7XHJcblxyXG5jbGFzcyBCb3hHZW9tZXRyeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbSkge1xyXG4gICAgICAgIHBhcmFtID0gcGFyYW0gfHwge307XHJcblxyXG4gICAgICAgIHRoaXMudXYgPSBwYXJhbS51diB8fCBuZXcgRmxvYXQzMkFycmF5KFsgICAvLyBWZXJ0ZXggY29vcmRpbmF0ZXNcclxuXHJcbiAgICAgICAgICAgIDEsMSwgMCwxLCAwLDAsIDEsMCwgIC8vIHYwLXYxLXYyLXYzIGZyb250XHJcbiAgICAgICAgICAgIDAsMSwgMCwwLCAxLDAsIDEsMSwgIC8vIHYwLXYzLXY0LXY1IHJpZ2h0XHJcbiAgICAgICAgICAgIDEsMCwgMSwxLCAwLDEsIDAsMCwgIC8vIHYwLXY1LXY2LXYxIHVwXHJcbiAgICAgICAgICAgIDEsMSwgMCwxLCAwLDAsIDEsMCwgIC8vIHYxLXY2LXY3LXYyIGxlZnRcclxuICAgICAgICAgICAgMCwxLCAxLDEsIDEsMCwgMCwwLCAgLy8gdjctdjQtdjMtdjIgZG93blxyXG4gICAgICAgICAgICAxLDAsIDAsMCwgMCwxLCAxLDEgICAvLyB2NC12Ny12Ni12NSBiYWNrXHJcblxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICB0aGlzLnZlcnRpY2VzID0gcGFyYW0uaW5kaWNlcyB8fCBuZXcgRmxvYXQzMkFycmF5KFsgICAvLyBWZXJ0ZXggY29vcmRpbmF0ZXNcclxuICAgICAgICAgICAgMC41LCAwLjUsIDAuNSwgIC0wLjUsIDAuNSwgMC41LCAgLTAuNSwtMC41LCAwLjUsICAgMC41LC0wLjUsIDAuNSwgIC8vIHYwLXYxLXYyLXYzIGZyb250XHJcbiAgICAgICAgICAgIDAuNSwgMC41LCAwLjUsICAgMC41LC0wLjUsIDAuNSwgICAwLjUsLTAuNSwtMC41LCAgIDAuNSwgMC41LC0wLjUsICAvLyB2MC12My12NC12NSByaWdodFxyXG4gICAgICAgICAgICAwLjUsIDAuNSwgMC41LCAgIDAuNSwgMC41LC0wLjUsICAtMC41LCAwLjUsLTAuNSwgIC0wLjUsIDAuNSwgMC41LCAgLy8gdjAtdjUtdjYtdjEgdXBcclxuICAgICAgICAgICAgLTAuNSwgMC41LCAwLjUsICAtMC41LCAwLjUsLTAuNSwgIC0wLjUsLTAuNSwtMC41LCAgLTAuNSwtMC41LCAwLjUsICAvLyB2MS12Ni12Ny12MiBsZWZ0XHJcbiAgICAgICAgICAgIC0wLjUsLTAuNSwtMC41LCAgIDAuNSwtMC41LC0wLjUsICAgMC41LC0wLjUsIDAuNSwgIC0wLjUsLTAuNSwgMC41LCAgLy8gdjctdjQtdjMtdjIgZG93blxyXG4gICAgICAgICAgICAwLjUsLTAuNSwtMC41LCAgLTAuNSwtMC41LC0wLjUsICAtMC41LCAwLjUsLTAuNSwgICAwLjUsIDAuNSwtMC41ICAgLy8gdjQtdjctdjYtdjUgYmFja1xyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICB0aGlzLm5vcm1hbCA9IHBhcmFtLm5vcm1hbCB8fCB0aGlzLnZlcnRpY2VzO1xyXG5cclxuICAgICAgICB0aGlzLmluZGljZXMgPSBwYXJhbS5pbmRpY2VzIHx8IG5ldyBVaW50MTZBcnJheShbICAgICAgIC8vIEluZGljZXMgb2YgdGhlIHZlcnRpY2VzXHJcbiAgICAgICAgICAgIDAsIDEsIDIsICAgMCwgMiwgMywgICAgLy8gZnJvbnRcclxuICAgICAgICAgICAgNCwgNSwgNiwgICA0LCA2LCA3LCAgICAvLyByaWdodFxyXG4gICAgICAgICAgICA4LCA5LDEwLCAgIDgsMTAsMTEsICAgIC8vIHVwXHJcbiAgICAgICAgICAgIDEyLDEzLDE0LCAgMTIsMTQsMTUsICAgIC8vIGxlZnRcclxuICAgICAgICAgICAgMTYsMTcsMTgsICAxNiwxOCwxOSwgICAgLy8gZG93blxyXG4gICAgICAgICAgICAyMCwyMSwyMiwgIDIwLDIyLDIzICAgICAvLyBiYWNrXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlTm9ybWFsKCk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRhQnVmZmVyKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0YUJ1ZmZlcigpe1xyXG4gICAgICAgIHZhciBidWZmZXIgPSBbXTtcclxuICAgICAgICB2YXIgdXYgPSB0aGlzLnV2O1xyXG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XHJcbiAgICAgICAgdmFyIG5vcm1hbCA9IHRoaXMubm9ybWFsO1xyXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPHZlcnRpY2VzLmxlbmd0aDsgaSs9Myl7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHZlcnRpY2VzW2krMF0pO1xyXG4gICAgICAgICAgICBidWZmZXIucHVzaCh2ZXJ0aWNlc1tpKzFdKTtcclxuICAgICAgICAgICAgYnVmZmVyLnB1c2godmVydGljZXNbaSsyXSk7XHJcblxyXG4gICAgICAgICAgICBidWZmZXIucHVzaChub3JtYWxbaSswXSk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKG5vcm1hbFtpKzFdKTtcclxuICAgICAgICAgICAgYnVmZmVyLnB1c2gobm9ybWFsW2krMl0pO1xyXG5cclxuICAgICAgICAgICAgYnVmZmVyLnB1c2godXZbaS8zKjIrMF0pO1xyXG4gICAgICAgICAgICBidWZmZXIucHVzaCh1dltpLzMqMisxXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVOb3JtYWwoKXtcclxuICAgICAgICB2YXIgbm9ybWFsID0gW107XHJcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcztcclxuICAgICAgICBmb3IodmFyIGk9MDsgaTx2ZXJ0aWNlcy5sZW5ndGg7IGkrPTMqNCl7XHJcbiAgICAgICAgICAgIHZhciBsaW5lMSA9IG5ldyBWZWN0b3IzKCkuc3ViVmVjdG9ycyhcclxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IzKHZlcnRpY2VzW2krMF0sIHZlcnRpY2VzW2krMV0sIHZlcnRpY2VzW2krMl0pLFxyXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcjModmVydGljZXNbaSszXSwgdmVydGljZXNbaSs0XSwgdmVydGljZXNbaSs1XSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdmFyIGxpbmUyID0gbmV3IFZlY3RvcjMoKS5zdWJWZWN0b3JzKFxyXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcjModmVydGljZXNbaSszXSwgdmVydGljZXNbaSs0XSwgdmVydGljZXNbaSs1XSksXHJcbiAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMyh2ZXJ0aWNlc1tpKzZdLCB2ZXJ0aWNlc1tpKzddLCB2ZXJ0aWNlc1tpKzhdKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdmFyIGN1cl9ub3JtYWwgPSBuZXcgVmVjdG9yMygpLmNyb3NzVmVjdG9ycyhcclxuICAgICAgICAgICAgICAgIGxpbmUxLFxyXG4gICAgICAgICAgICAgICAgbGluZTJcclxuICAgICAgICAgICAgKS50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaj0wIDtqPDQ7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBub3JtYWwucHVzaChjdXJfbm9ybWFsWzBdLCBjdXJfbm9ybWFsWzFdLCBjdXJfbm9ybWFsWzJdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vcm1hbCA9IG5ldyBGbG9hdDMyQXJyYXkobm9ybWFsKTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNsb25lKCl7XHJcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IEJveEdlb21ldHJ5KHtcclxuICAgICAgICAgICAgdmVydGljZXM6IHRoaXMudmVydGljZXMuc2xpY2UoMCksXHJcbiAgICAgICAgICAgIGluZGljZXM6IHRoaXMuaW5kaWNlcy5zbGljZSgwKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZ2VvbWV0cnk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJveEdlb21ldHJ5O1xyXG4iLCJpbXBvcnQge1ZlY3RvcjN9IGZyb20gXCIuLi9tYXRoL1ZlY3RvcjNcIjtcclxuXHJcbmNsYXNzIFNwaGVyZUdlb21ldHJ5IHtcclxuICAgIGNvbnN0cnVjdG9yKCByYWRpdXMsIHdpZHRoU2VnbWVudHMsIGhlaWdodFNlZ21lbnRzLCBwaGlTdGFydCwgcGhpTGVuZ3RoLCB0aGV0YVN0YXJ0LCB0aGV0YUxlbmd0aCApIHtcclxuXHJcbiAgICAgICAgcmFkaXVzID0gcmFkaXVzIHx8IDE7XHJcblxyXG4gICAgICAgIHdpZHRoU2VnbWVudHMgPSBNYXRoLm1heCggMywgTWF0aC5mbG9vciggd2lkdGhTZWdtZW50cyApIHx8IDggKTtcclxuICAgICAgICBoZWlnaHRTZWdtZW50cyA9IE1hdGgubWF4KCAyLCBNYXRoLmZsb29yKCBoZWlnaHRTZWdtZW50cyApIHx8IDYgKTtcclxuXHJcbiAgICAgICAgcGhpU3RhcnQgPSBwaGlTdGFydCAhPT0gdW5kZWZpbmVkID8gcGhpU3RhcnQgOiAwO1xyXG4gICAgICAgIHBoaUxlbmd0aCA9IHBoaUxlbmd0aCAhPT0gdW5kZWZpbmVkID8gcGhpTGVuZ3RoIDogTWF0aC5QSSAqIDI7XHJcblxyXG4gICAgICAgIHRoZXRhU3RhcnQgPSB0aGV0YVN0YXJ0ICE9PSB1bmRlZmluZWQgPyB0aGV0YVN0YXJ0IDogMDtcclxuICAgICAgICB0aGV0YUxlbmd0aCA9IHRoZXRhTGVuZ3RoICE9PSB1bmRlZmluZWQgPyB0aGV0YUxlbmd0aCA6IE1hdGguUEk7XHJcblxyXG4gICAgICAgIHZhciB0aGV0YUVuZCA9IHRoZXRhU3RhcnQgKyB0aGV0YUxlbmd0aDtcclxuXHJcbiAgICAgICAgdmFyIGl4LCBpeTtcclxuXHJcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgICAgICB2YXIgZ3JpZCA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgdmVydGV4ID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICB2YXIgbm9ybWFsID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICAgICAgLy8gYnVmZmVyc1xyXG5cclxuICAgICAgICB2YXIgaW5kaWNlcyA9IFtdO1xyXG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IFtdO1xyXG4gICAgICAgIHZhciBub3JtYWxzID0gW107XHJcbiAgICAgICAgdmFyIHV2cyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBnZW5lcmF0ZSB2ZXJ0aWNlcywgbm9ybWFscyBhbmQgdXZzXHJcblxyXG4gICAgICAgIGZvciAoIGl5ID0gMDsgaXkgPD0gaGVpZ2h0U2VnbWVudHM7IGl5ICsrICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHZlcnRpY2VzUm93ID0gW107XHJcblxyXG4gICAgICAgICAgICB2YXIgdiA9IGl5IC8gaGVpZ2h0U2VnbWVudHM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBpeCA9IDA7IGl4IDw9IHdpZHRoU2VnbWVudHM7IGl4ICsrICkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB1ID0gaXggLyB3aWR0aFNlZ21lbnRzO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHZlcnRleFxyXG5cclxuICAgICAgICAgICAgICAgIHZlcnRleCA9IG5ldyBWZWN0b3IzKFxyXG4gICAgICAgICAgICAgICAgICAgIC0gcmFkaXVzICogTWF0aC5jb3MoIHBoaVN0YXJ0ICsgdSAqIHBoaUxlbmd0aCApICogTWF0aC5zaW4oIHRoZXRhU3RhcnQgKyB2ICogdGhldGFMZW5ndGggKSxcclxuICAgICAgICAgICAgICAgICAgICByYWRpdXMgKiBNYXRoLmNvcyggdGhldGFTdGFydCArIHYgKiB0aGV0YUxlbmd0aCApLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1cyAqIE1hdGguc2luKCBwaGlTdGFydCArIHUgKiBwaGlMZW5ndGggKSAqIE1hdGguc2luKCB0aGV0YVN0YXJ0ICsgdiAqIHRoZXRhTGVuZ3RoIClcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVydGljZXMucHVzaCggdmVydGV4LngsIHZlcnRleC55LCB2ZXJ0ZXgueiApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIG5vcm1hbFxyXG5cclxuICAgICAgICAgICAgICAgIG5vcm1hbCA9IHZlcnRleC5jbG9uZSgpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgbm9ybWFscy5wdXNoKCBub3JtYWwueCwgbm9ybWFsLnksIG5vcm1hbC56ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdXZcclxuXHJcbiAgICAgICAgICAgICAgICB1dnMucHVzaCggdSwgMSAtIHYgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlc1Jvdy5wdXNoKCBpbmRleCArKyApO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ3JpZC5wdXNoKCB2ZXJ0aWNlc1JvdyApO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGluZGljZXNcclxuXHJcbiAgICAgICAgZm9yICggaXkgPSAwOyBpeSA8IGhlaWdodFNlZ21lbnRzOyBpeSArKyApIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAoIGl4ID0gMDsgaXggPCB3aWR0aFNlZ21lbnRzOyBpeCArKyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGdyaWRbIGl5IF1bIGl4ICsgMSBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBncmlkWyBpeSBdWyBpeCBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBncmlkWyBpeSArIDEgXVsgaXggXTtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gZ3JpZFsgaXkgKyAxIF1bIGl4ICsgMSBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggaXkgIT09IDAgfHwgdGhldGFTdGFydCA+IDAgKSBpbmRpY2VzLnB1c2goIGEsIGIsIGQgKTtcclxuICAgICAgICAgICAgICAgIGlmICggaXkgIT09IGhlaWdodFNlZ21lbnRzIC0gMSB8fCB0aGV0YUVuZCA8IE1hdGguUEkgKSBpbmRpY2VzLnB1c2goIGIsIGMsIGQgKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcyk7XHJcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBuZXcgRmxvYXQzMkFycmF5KG5vcm1hbHMpO1xyXG4gICAgICAgIHRoaXMudXYgPSBuZXcgRmxvYXQzMkFycmF5KHV2cyk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShpbmRpY2VzKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1ZmZlciA9IFtdO1xyXG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XHJcbiAgICAgICAgdmFyIG5vcm1hbCA9IHRoaXMubm9ybWFsO1xyXG4gICAgICAgIHZhciB1diA9IHRoaXMudXY7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8dmVydGljZXMubGVuZ3RoOyBpKz0zKXtcclxuICAgICAgICAgICAgYnVmZmVyLnB1c2godmVydGljZXNbaSswXSk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHZlcnRpY2VzW2krMV0pO1xyXG4gICAgICAgICAgICBidWZmZXIucHVzaCh2ZXJ0aWNlc1tpKzJdKTtcclxuXHJcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKG5vcm1hbFtpKzBdKTtcclxuICAgICAgICAgICAgYnVmZmVyLnB1c2gobm9ybWFsW2krMV0pO1xyXG4gICAgICAgICAgICBidWZmZXIucHVzaChub3JtYWxbaSsyXSk7XHJcblxyXG4gICAgICAgICAgICBidWZmZXIucHVzaCh1dltpLzMqMiswXSk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHV2W2kvMyoyKzFdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIpO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNwaGVyZUdlb21ldHJ5O1xyXG4iLCJpbXBvcnQgU2NlbmUgZnJvbSBcIi4vU2NlbmVcIjtcclxuaW1wb3J0IE1lc2ggZnJvbSBcIi4vTWVzaFwiO1xyXG5pbXBvcnQgR2VvbWV0cnkgZnJvbSBcIi4vR2VvbWV0cnlcIjtcclxuaW1wb3J0IE1lc2hMYW1iZXJ0TWF0ZXJpYWwgZnJvbSBcIi4uL21hdGVyaWFsL01lc2hMYW1iZXJ0TWF0ZXJpYWxcIjtcclxuaW1wb3J0IHtRdWF0ZXJuaW9ufSBmcm9tIFwiLi4vbWF0aC9RdWF0ZXJuaW9uXCI7XHJcbmltcG9ydCB7TWF0cml4NH0gZnJvbSBcIi4uL21hdGgvTWF0cml4NFwiO1xyXG5cclxuY2xhc3MgR0xURkxvYWRlcntcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5nbHRmT2JqID0gbnVsbDtcclxuICAgICAgICB0aGlzLnVybEJhc2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmFycmF5QnVmZmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYXJyYXlCdWZmZXJDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhVXJpUmVnZXggPSAvXmRhdGE6KC4qPykoO2Jhc2U2NCk/LCguKikkLztcclxuICAgIH1cclxuXHJcbiAgICBsb2FkKHVybCwgb25Mb2FkU3VjY2Vzcyl7XHJcbiAgICAgICAgdGhpcy5nbHRmT2JqID0gbnVsbDtcclxuICAgICAgICB0aGlzLnVybEJhc2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmFycmF5QnVmZmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYXJyYXlCdWZmZXJDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgdXJsQXJyYXkgPSB1cmwuc3BsaXQoJy8nKTtcclxuICAgICAgICB2YXIganNvbk5hbWUgPSB1cmxBcnJheVt1cmxBcnJheS5sZW5ndGgtMV07XHJcbiAgICAgICAgdGhhdC51cmxCYXNlID0gdXJsLnNwbGl0KGpzb25OYW1lKVswXTtcclxuXHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0Lm9wZW4oXCJnZXRcIiwgdXJsKTtcclxuICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdsdGZPYmogPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIHRoYXQuZ2x0Zk9iaiA9IGdsdGZPYmo7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhnbHRmT2JqKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGF0LmFycmF5QnVmZmVyQ291bnQgPSBnbHRmT2JqLmJ1ZmZlcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvYWRCdWZmZXJDb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIGdsdGZPYmouYnVmZmVycyl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXIgPSBnbHRmT2JqLmJ1ZmZlcnNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhVXJpUmVnZXhSZXN1bHQgPSBidWZmZXIudXJpLm1hdGNoKCB0aGF0LmRhdGFVcmlSZWdleCApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGFVcmlSZWdleFJlc3VsdCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gdGhhdC5iYXNlNjRUb0FycmF5QnVmZmVyKGRhdGFVcmlSZWdleFJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJ1ZmZlcil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFycmF5QnVmZmVyc1tpXSA9IGJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdWZmZXJDb3VudCArKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsb2FkQnVmZmVyQ291bnQgPT09IHRoYXQuYXJyYXlCdWZmZXJDb3VudCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY2VuZU9iaiA9IGdsdGZPYmouc2NlbmVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY2VuZSA9IG5ldyBTY2VuZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgbm9kZWluZGV4IGluIHNjZW5lT2JqLm5vZGVzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVzSW5kZXggPSBzY2VuZU9iai5ub2Rlc1tub2RlaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZXNPYmogPSBnbHRmT2JqLm5vZGVzW25vZGVzSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VyX21lc2ggPSB0aGF0Lm5vZGVUb01lc2gobm9kZXNPYmopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5hZGQoY3VyX21lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkxvYWRTdWNjZXNzKHNjZW5lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1ZmZlckRhdGFVcmkgPSB0aGF0LnVybEJhc2UgKyBidWZmZXIudXJpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIub3BlbiggJ0dFVCcsIGJ1ZmZlckRhdGFVcmksIHRydWUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgZnVuY3Rpb24gKCBldmVudCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5yZXNwb25zZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYXJyYXlCdWZmZXJzW2ldID0gYnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEJ1ZmZlckNvdW50ICsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxvYWRCdWZmZXJDb3VudCA9PT0gdGhhdC5hcnJheUJ1ZmZlckNvdW50KXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjZW5lT2JqID0gZ2x0Zk9iai5zY2VuZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjZW5lID0gbmV3IFNjZW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBub2RlaW5kZXggaW4gc2NlbmVPYmoubm9kZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZXNJbmRleCA9IHNjZW5lT2JqLm5vZGVzW25vZGVpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2Rlc09iaiA9IGdsdGZPYmoubm9kZXNbbm9kZXNJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJfbWVzaCA9IHRoYXQubm9kZVRvTWVzaChub2Rlc09iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmFkZChjdXJfbWVzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZFN1Y2Nlc3Moc2NlbmUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoIG51bGwgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxdWVzdC5zZW5kKG51bGwpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBub2RlVG9NZXNoKG5vZGUpe1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIG1lc2hJbmRleCA9IG5vZGUubWVzaDtcclxuICAgICAgICB2YXIgbWVzaCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmKG1lc2hJbmRleCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB2YXIgbWVzaE9iaiA9IHRoYXQuZ2x0Zk9iai5tZXNoZXNbbWVzaEluZGV4XTtcclxuICAgICAgICAgICAgdmFyIGdlb21ldHJ5QW5kTWF0ZXJpYWwgPSB0aGF0Lm1lc2hUb0dlb21ldHJ5KG1lc2hPYmopO1xyXG4gICAgICAgICAgICBtZXNoID0gbmV3IE1lc2goe1xyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6Z2VvbWV0cnlBbmRNYXRlcmlhbFswXSxcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsOmdlb21ldHJ5QW5kTWF0ZXJpYWxbMV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG1lc2ggPSBuZXcgTWVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNjYWxlID0gbm9kZS5zY2FsZTtcclxuICAgICAgICBpZihzY2FsZSl7XHJcbiAgICAgICAgICAgIG1lc2guc2V0U2NhbGUoc2NhbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gbm9kZS5yb3RhdGlvbjtcclxuICAgICAgICBpZihyb3RhdGlvbil7XHJcbiAgICAgICAgICAgIHZhciBxdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKS5mcm9tQXJyYXkocm90YXRpb24pO1xyXG4gICAgICAgICAgICBtZXNoLnNldFF1YXRlcm5pb24ocXVhdGVybmlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdHJhbnNsYXRpb24gPSBub2RlLnRyYW5zbGF0aW9uO1xyXG4gICAgICAgIGlmKHRyYW5zbGF0aW9uKXtcclxuICAgICAgICAgICAgbWVzaC5zZXRQb3NpdGlvbih0cmFuc2xhdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbWF0cml4ID0gbm9kZS5tYXRyaXg7XHJcbiAgICAgICAgaWYobWF0cml4KXtcclxuICAgICAgICAgICAgbWVzaC5zZXRNYXRyaXgobmV3IE1hdHJpeDQoKS5mcm9tQXJyYXkobWF0cml4KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IodmFyIGkgaW4gbm9kZS5jaGlsZHJlbil7XHJcbiAgICAgICAgICAgIHZhciBub2RlQ2hpbGQgPSB0aGF0LmdsdGZPYmoubm9kZXNbbm9kZS5jaGlsZHJlbltpXV07XHJcbiAgICAgICAgICAgIHZhciBtZXNoQ2hpbGQgPSB0aGF0Lm5vZGVUb01lc2gobm9kZUNoaWxkKTtcclxuICAgICAgICAgICAgbWVzaC5hZGQobWVzaENoaWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG5cclxuICAgIG1lc2hUb0dlb21ldHJ5KG1lc2gpe1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIHByaW1pdGl2ZTAgPSBtZXNoLnByaW1pdGl2ZXNbMF07XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUwLmF0dHJpYnV0ZXM7XHJcblxyXG4gICAgICAgIHZhciBwb3NpdGlvbkFjY2Vzc29ySW5kZXggPSBhdHRyaWJ1dGVzLlBPU0lUSU9OO1xyXG4gICAgICAgIHZhciBwb3NpdGlvbkFjY2Vzc29yID0gdGhhdC5nbHRmT2JqLmFjY2Vzc29yc1twb3NpdGlvbkFjY2Vzc29ySW5kZXhdO1xyXG4gICAgICAgIHZhciBwb3NpdGlvbkJ1ZmZlclZpZXdJbmRleCA9IHBvc2l0aW9uQWNjZXNzb3IuYnVmZmVyVmlldztcclxuICAgICAgICB2YXIgcG9zaXRpb25CdWZmZXJWaWV3ID0gdGhhdC5nbHRmT2JqLmJ1ZmZlclZpZXdzW3Bvc2l0aW9uQnVmZmVyVmlld0luZGV4XTtcclxuICAgICAgICB2YXIgcG9zaXRpb25EYXRhID0gdGhhdC5nZXREYXRhQnlCdWZmZXJWaWV3KHBvc2l0aW9uQnVmZmVyVmlldyxwb3NpdGlvbkFjY2Vzc29yKTtcclxuXHJcbiAgICAgICAgdmFyIG5vcm1hbEFjY2Vzc29ySW5kZXggPSBhdHRyaWJ1dGVzLk5PUk1BTDtcclxuICAgICAgICB2YXIgbm9ybWFsQWNjZXNzb3IgPSB0aGF0LmdsdGZPYmouYWNjZXNzb3JzW25vcm1hbEFjY2Vzc29ySW5kZXhdO1xyXG4gICAgICAgIHZhciBub3JtYWxCdWZmZXJWaWV3SW5kZXggPSBub3JtYWxBY2Nlc3Nvci5idWZmZXJWaWV3O1xyXG4gICAgICAgIHZhciBub3JtYWxCdWZmZXJWaWV3ID0gdGhhdC5nbHRmT2JqLmJ1ZmZlclZpZXdzW25vcm1hbEJ1ZmZlclZpZXdJbmRleF07XHJcbiAgICAgICAgdmFyIG5vcm1hbERhdGEgPSB0aGF0LmdldERhdGFCeUJ1ZmZlclZpZXcobm9ybWFsQnVmZmVyVmlldyxub3JtYWxBY2Nlc3Nvcik7XHJcblxyXG4gICAgICAgIC8vVEVYQ09PUkRfMFxyXG4gICAgICAgIHZhciB1djBBY2Nlc3NvckluZGV4ID0gYXR0cmlidXRlcy5URVhDT09SRF8wO1xyXG4gICAgICAgIHZhciB1djBBY2Nlc3NvciA9IHRoYXQuZ2x0Zk9iai5hY2Nlc3NvcnNbdXYwQWNjZXNzb3JJbmRleF07XHJcbiAgICAgICAgdmFyIHV2MEJ1ZmZlclZpZXdJbmRleCA9IHV2MEFjY2Vzc29yLmJ1ZmZlclZpZXc7XHJcbiAgICAgICAgdmFyIHV2MEJ1ZmZlclZpZXcgPSB0aGF0LmdsdGZPYmouYnVmZmVyVmlld3NbdXYwQnVmZmVyVmlld0luZGV4XTtcclxuICAgICAgICB2YXIgdXYwRGF0YSA9IHRoYXQuZ2V0RGF0YUJ5QnVmZmVyVmlldyh1djBCdWZmZXJWaWV3LHV2MEFjY2Vzc29yKTtcclxuXHJcbiAgICAgICAgdmFyIGluZGljZXNEYXRhID0gbnVsbDtcclxuICAgICAgICB2YXIgaW5kaWNlc0FjY2Vzc29ySW5kZXggPSBwcmltaXRpdmUwLmluZGljZXM7XHJcblxyXG4gICAgICAgIGlmKGluZGljZXNBY2Nlc3NvckluZGV4ICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHZhciBpbmRpY2VzQWNjZXNzb3IgPSB0aGF0LmdsdGZPYmouYWNjZXNzb3JzW2luZGljZXNBY2Nlc3NvckluZGV4XTtcclxuICAgICAgICAgICAgdmFyIGluZGljZXNCdWZmZXJWaWV3SW5kZXggPSBpbmRpY2VzQWNjZXNzb3IuYnVmZmVyVmlldztcclxuICAgICAgICAgICAgdmFyIGluZGljZXNCdWZmZXJWaWV3ID0gdGhhdC5nbHRmT2JqLmJ1ZmZlclZpZXdzW2luZGljZXNCdWZmZXJWaWV3SW5kZXhdO1xyXG4gICAgICAgICAgICBpbmRpY2VzRGF0YSA9IHRoYXQuZ2V0RGF0YUJ5QnVmZmVyVmlldyhpbmRpY2VzQnVmZmVyVmlldyxpbmRpY2VzQWNjZXNzb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG1hdGVyaWFsSW5kZXggPSBwcmltaXRpdmUwLm1hdGVyaWFsO1xyXG4gICAgICAgIHZhciBtYXRlcmlhbE9iaiA9IHRoYXQuZ2x0Zk9iai5tYXRlcmlhbHNbbWF0ZXJpYWxJbmRleF07XHJcblxyXG4gICAgICAgIGlmKG1hdGVyaWFsT2JqLnBick1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvclRleHR1cmUpe1xyXG4gICAgICAgICAgICB2YXIgYmFzZUNvbG9yVGV4dHVyZUluZGV4ID0gbWF0ZXJpYWxPYmoucGJyTWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZS5pbmRleDtcclxuICAgICAgICAgICAgdmFyIHRleHR1cmVPYmogPSB0aGF0LmdsdGZPYmoudGV4dHVyZXNbYmFzZUNvbG9yVGV4dHVyZUluZGV4XTtcclxuICAgICAgICAgICAgdmFyIGltYWdlSW5kZXggPSB0ZXh0dXJlT2JqLnNvdXJjZTtcclxuICAgICAgICAgICAgdmFyIGltYWdlT2JqID0gdGhhdC5nbHRmT2JqLmltYWdlc1tpbWFnZUluZGV4XTtcclxuICAgICAgICAgICAgdmFyIGltYWdlVXJpID0gaW1hZ2VPYmoudXJpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGFVcmlSZWdleFJlc3VsdCA9IGltYWdlT2JqLnVyaS5tYXRjaCggdGhhdC5kYXRhVXJpUmVnZXggKTtcclxuICAgICAgICAgICAgaWYoIWRhdGFVcmlSZWdleFJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpbWFnZVVyaSA9IHRoYXQudXJsQmFzZSArIGltYWdlT2JqLnVyaTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHNhbXBsZXJJbmRleCA9IHRleHR1cmVPYmouc2FtcGxlcjtcclxuICAgICAgICAgICAgdmFyIHNhbXBsZXIgPSB0aGF0LmdsdGZPYmouc2FtcGxlcnNbc2FtcGxlckluZGV4XTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICBpbWFnZS5jcm9zc09yaWdpbiA9IFwiYW5vbnltb3VzXCI7XHJcbiAgICAgICAgICAgIGltYWdlLnNyYz0gaW1hZ2VVcmk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBDT09MLlRleHR1cmUoe1xyXG4gICAgICAgICAgICAgICAgaW1hZ2U6aW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAvL+i/meS4pOS4quWPguaVsOaciemXrumimO+8jOacieeahDk3MjkgOTk4NuaYr+S7gOS5iOS4nOilv1xyXG4gICAgICAgICAgICAgICAgLy8gbWFnRmlsdGVyOiBzYW1wbGVyLm1hZ0ZpbHRlcixcclxuICAgICAgICAgICAgICAgIC8vIG1pbkZpbHRlcjogc2FtcGxlci5taW5GaWx0ZXIsXHJcbiAgICAgICAgICAgICAgICB3cmFwUzogc2FtcGxlci53cmFwUyxcclxuICAgICAgICAgICAgICAgIHdyYXBUOiBzYW1wbGVyLndyYXBULFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgQ09PTC5NZXNoTGFtYmVydE1hdGVyaWFsKHttYXA6dGV4dHVyZX0pO1xyXG5cclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBuZXcgR2VvbWV0cnkoe1xyXG4gICAgICAgICAgICAgICAgdmVydGljZXM6IHBvc2l0aW9uRGF0YSxcclxuICAgICAgICAgICAgICAgIGluZGljZXM6IGluZGljZXNEYXRhLFxyXG4gICAgICAgICAgICAgICAgbm9ybWFsOm5vcm1hbERhdGEsXHJcbiAgICAgICAgICAgICAgICB1djp1djBEYXRhXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtYXRlcmlhbFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YUJ5QnVmZmVyVmlldyhidWZmZXJWaWV3LCBhY2Nlc3Nvcil7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBidWZmZXJJbmRleCA9IGJ1ZmZlclZpZXcuYnVmZmVyO1xyXG5cclxuICAgICAgICB2YXIgYnl0ZUxlbmd0aCA9IGJ1ZmZlclZpZXcuYnl0ZUxlbmd0aCB8fCAwO1xyXG4gICAgICAgIHZhciBieXRlT2Zmc2V0ID0gYnVmZmVyVmlldy5ieXRlT2Zmc2V0IHx8IDA7XHJcblxyXG4gICAgICAgIHZhciBidWZmZXIgPSB0aGF0LmdsdGZPYmouYnVmZmVyc1tidWZmZXJJbmRleF07XHJcbiAgICAgICAgdmFyIGJ1ZmZlckRhdGFVcmkgPSB0aGF0LnVybEJhc2UgKyBidWZmZXIudXJpO1xyXG5cclxuICAgICAgICB2YXIgYXJyYXlCdWZmZXIgPSB0aGF0LmFycmF5QnVmZmVyc1tidWZmZXJJbmRleF07XHJcblxyXG4gICAgICAgIHZhciBjdXJfYnVmZmVyID0gYXJyYXlCdWZmZXIuc2xpY2UoIGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoICk7XHJcblxyXG4gICAgICAgIHZhciBhcnJheSA9IG51bGw7XHJcbiAgICAgICAgdmFyIGl0ZW1TaXplID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIGFjY2Vzc29yQnl0ZU9mZnNldCA9IGFjY2Vzc29yLmJ5dGVPZmZzZXQgfHwgMDtcclxuXHJcbiAgICAgICAgaWYoYWNjZXNzb3IudHlwZSA9PSAnU0NBTEFSJyl7XHJcbiAgICAgICAgICAgIGl0ZW1TaXplID0gMTtcclxuICAgICAgICB9ZWxzZSBpZihhY2Nlc3Nvci50eXBlID09ICdWRUMyJyl7XHJcbiAgICAgICAgICAgIGl0ZW1TaXplID0gMjtcclxuICAgICAgICB9ZWxzZSBpZihhY2Nlc3Nvci50eXBlID09ICdWRUMzJyl7XHJcbiAgICAgICAgICAgIGl0ZW1TaXplID0gMztcclxuICAgICAgICB9ZWxzZSBpZihhY2Nlc3Nvci50eXBlID09ICdWRUM0Jyl7XHJcbiAgICAgICAgICAgIGl0ZW1TaXplID0gNDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdhY2Nlc3Nvci50eXBlIHVuZGVmaW5lZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoYWNjZXNzb3IuY29tcG9uZW50VHlwZSA9PSA1MTI2KXtcclxuICAgICAgICAgICAgYXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KCBjdXJfYnVmZmVyLCBhY2Nlc3NvckJ5dGVPZmZzZXQsIGFjY2Vzc29yLmNvdW50ICogaXRlbVNpemUgKTtcclxuICAgICAgICB9ZWxzZSBpZihhY2Nlc3Nvci5jb21wb25lbnRUeXBlID09IDUxMjMpe1xyXG4gICAgICAgICAgICBhcnJheSA9IG5ldyBVaW50MTZBcnJheSggY3VyX2J1ZmZlciwgYWNjZXNzb3JCeXRlT2Zmc2V0LCBhY2Nlc3Nvci5jb3VudCAqIGl0ZW1TaXplICk7XHJcbiAgICAgICAgfWVsc2UgaWYoYWNjZXNzb3IuY29tcG9uZW50VHlwZSA9PSA1MTIwKXtcclxuICAgICAgICAgICAgYXJyYXkgPSBuZXcgSW50OEFycmF5KCBjdXJfYnVmZmVyLCBhY2Nlc3NvckJ5dGVPZmZzZXQsIGFjY2Vzc29yLmNvdW50ICogaXRlbVNpemUgKTtcclxuICAgICAgICB9ZWxzZSBpZihhY2Nlc3Nvci5jb21wb25lbnRUeXBlID09IDUxMjEpe1xyXG4gICAgICAgICAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KCBjdXJfYnVmZmVyLCBhY2Nlc3NvckJ5dGVPZmZzZXQsIGFjY2Vzc29yLmNvdW50ICogaXRlbVNpemUgKTtcclxuICAgICAgICB9ZWxzZSBpZihhY2Nlc3Nvci5jb21wb25lbnRUeXBlID09IDUxMjIpe1xyXG4gICAgICAgICAgICBhcnJheSA9IG5ldyBJbnQxNkFycmF5KCBjdXJfYnVmZmVyLCBhY2Nlc3NvckJ5dGVPZmZzZXQsIGFjY2Vzc29yLmNvdW50ICogaXRlbVNpemUgKTtcclxuICAgICAgICB9ZWxzZSBpZihhY2Nlc3Nvci5jb21wb25lbnRUeXBlID09IDUxMjUpe1xyXG4gICAgICAgICAgICBhcnJheSA9IG5ldyBVaW50MzJBcnJheSggY3VyX2J1ZmZlciwgYWNjZXNzb3JCeXRlT2Zmc2V0LCBhY2Nlc3Nvci5jb3VudCAqIGl0ZW1TaXplICk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignYWNjZXNzb3IuY29tcG9uZW50VHlwZSB1bmRlZmluZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhcnJheTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGJhc2U2NFRvQXJyYXlCdWZmZXIoZGF0YVVyaVJlZ2V4UmVzdWx0KXtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSBkYXRhVXJpUmVnZXhSZXN1bHRbIDMgXTtcclxuICAgICAgICBkYXRhID0gZGVjb2RlVVJJQ29tcG9uZW50KCBkYXRhICk7XHJcbiAgICAgICAgZGF0YSA9IGF0b2IoIGRhdGEgKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuXHJcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoIGRhdGEubGVuZ3RoICk7XHJcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICsrICkge1xyXG4gICAgICAgICAgICAgICAgdmlld1sgaSBdID0gZGF0YS5jaGFyQ29kZUF0KCBpICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBhcnJheUJ1ZmZlciA9IHZpZXcuYnVmZmVyO1xyXG4gICAgICAgICAgICByZXR1cm4gYXJyYXlCdWZmZXI7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKCBlcnJvciApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR0xURkxvYWRlcjtcclxuIiwiXHJcbmltcG9ydCB7TWF0cml4NH0gZnJvbSBcIi4uL21hdGgvTWF0cml4NFwiO1xyXG5pbXBvcnQge1ZlY3RvcjN9IGZyb20gXCIuLi9tYXRoL1ZlY3RvcjNcIjtcclxuXHJcbmNsYXNzIE9ydGhvQ2FtZXJhIHtcclxuICAgIGNvbnN0cnVjdG9yKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XHJcbiAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdDtcclxuICAgICAgICB0aGlzLl9yaWdodCA9IHJpZ2h0O1xyXG4gICAgICAgIHRoaXMuYm90dG9tID0gYm90dG9tO1xyXG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xyXG4gICAgICAgIHRoaXMubmVhciA9IG5lYXI7XHJcbiAgICAgICAgdGhpcy5mYXIgPSBmYXI7XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBbMCwgMCwgMTBdO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gWzAsMCwwXTtcclxuICAgICAgICB0aGlzLnVwID0gWzAsMSwwXTtcclxuXHJcbiAgICAgICAgdGhpcy5WUG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gWzAsMCwtMV07XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IFsxLDAsMF07XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlQWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQWxsKCl7XHJcbiAgICAgICAgdGhpcy51cGRhdGVPcHRpb24oKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVZQTWF0cml4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlT3B0aW9uKCl7XHJcbiAgICAgICAgdmFyIHRhcmdldFYzID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkodGhpcy50YXJnZXQpO1xyXG4gICAgICAgIHZhciBwb3NpdGlvblYzID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkodGhpcy5wb3NpdGlvbik7XHJcbiAgICAgICAgdmFyIHVwVjMgPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheSh0aGlzLnVwKTtcclxuXHJcbiAgICAgICAgdmFyIGRpcmVjdGlvblYzID0gbmV3IFZlY3RvcjMoKS5zdWJWZWN0b3JzKHRhcmdldFYzLCBwb3NpdGlvblYzKS5ub3JtYWxpemUoKTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvblYzLnRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgdmFyIHJpZ2h0VjMgPSBuZXcgVmVjdG9yMygpLmNyb3NzVmVjdG9ycyhkaXJlY3Rpb25WMywgdXBWMykubm9ybWFsaXplKCk7XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0VjMudG9BcnJheSgpO1xyXG5cclxuICAgICAgICAvLyB0aGlzLnVwID0gbmV3IFZlY3RvcjMoKS5jcm9zc1ZlY3RvcnMocmlnaHRWMywgZGlyZWN0aW9uVjMpLm5vcm1hbGl6ZSgpLnRvQXJyYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRQb3NpdGlvbihwb3NpdGlvbil7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGFyZ2V0KHRhcmdldCl7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVcCh1cCl7XHJcbiAgICAgICAgdGhpcy51cCA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHVwKS5ub3JtYWxpemUoKS50b0FycmF5KCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGwoKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHVwZGF0ZVZQTWF0cml4KCl7XHJcbiAgICAgICAgdGhpcy5WUG1hdHJpeCA9IG5ldyBNYXRyaXg0KCkuc2V0T3J0aG8odGhpcy5sZWZ0LCB0aGlzLl9yaWdodCwgdGhpcy5ib3R0b20sIHRoaXMudG9wLCB0aGlzLm5lYXIsIHRoaXMuZmFyKTtcclxuICAgICAgICB0aGlzLlZQbWF0cml4Lmxvb2tBdDIodGhpcy5wb3NpdGlvblswXSx0aGlzLnBvc2l0aW9uWzFdLHRoaXMucG9zaXRpb25bMl0sIHRoaXMudGFyZ2V0WzBdLHRoaXMudGFyZ2V0WzFdLHRoaXMudGFyZ2V0WzJdLCB0aGlzLnVwWzBdLHRoaXMudXBbMV0sdGhpcy51cFsyXSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBPcnRob0NhbWVyYTtcclxuXHJcbiIsImltcG9ydCBSZW5kZXJlciBmcm9tICcuL2NvcmUvUmVuZGVyZXIuanMnO1xyXG5pbXBvcnQgTWVzaCBmcm9tIFwiLi9jb3JlL01lc2guanNcIjtcclxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi9jYW1lcmEvQ2FtZXJhLmpzXCI7XHJcbmltcG9ydCBDYW1lcmFDb250cm9sbGVyIGZyb20gXCIuL2NhbWVyYS9DYW1lcmFDb250cm9sbGVyLmpzXCI7XHJcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi9jb3JlL1NjZW5lLmpzXCI7XHJcbmltcG9ydCBNYXRlcmlhbCBmcm9tIFwiLi9tYXRlcmlhbC9NYXRlcmlhbFwiO1xyXG5pbXBvcnQgVGV4dHVyZSBmcm9tIFwiLi9tYXRlcmlhbC9UZXh0dXJlXCI7XHJcbmltcG9ydCBNZXNoQmFzaWNNYXRlcmlhbCBmcm9tIFwiLi9tYXRlcmlhbC9NZXNoQmFzaWNNYXRlcmlhbFwiO1xyXG5pbXBvcnQgTWVzaExhbWJlcnRNYXRlcmlhbCBmcm9tIFwiLi9tYXRlcmlhbC9NZXNoTGFtYmVydE1hdGVyaWFsXCI7XHJcbmltcG9ydCBBbWJpZW50TGlnaHQgZnJvbSBcIi4vbGlnaHQvQW1iaWVudExpZ2h0XCI7XHJcbmltcG9ydCBEaXJlY3Rpb25hbExpZ2h0IGZyb20gXCIuL2xpZ2h0L0RpcmVjdGlvbmFsTGlnaHRcIjtcclxuaW1wb3J0IE1lc2hTdGFuZGFyZE1hdGVyaWFsIGZyb20gXCIuL21hdGVyaWFsL01lc2hTdGFuZGFyZE1hdGVyaWFsXCI7XHJcbmltcG9ydCBHZW9tZXRyeSBmcm9tIFwiLi9jb3JlL0dlb21ldHJ5XCI7XHJcbmltcG9ydCBCb3hHZW9tZXRyeSBmcm9tIFwiLi9jb3JlL0JveEdlb21ldHJ5XCI7XHJcbmltcG9ydCBTcGhlcmVHZW9tZXRyeSBmcm9tIFwiLi9jb3JlL1NwaGVyZUdlb21ldHJ5XCI7XHJcblxyXG4vLyBpbXBvcnQgX0dMVEZMb2FkZXIgZnJvbSBcIi4vY29yZS9HTFRGTG9hZGVyXCI7XHJcbmltcG9ydCBHTFRGTG9hZGVyIGZyb20gXCIuL2NvcmUvR0xURkxvYWRlcjJcIjtcclxuXHJcbmltcG9ydCBPcnRob0NhbWVyYSBmcm9tIFwiLi9jYW1lcmEvT3J0aG9DYW1lcmFcIjtcclxuXHJcbmltcG9ydCB7VmVjdG9yMn0gZnJvbSBcIi4vbWF0aC9WZWN0b3IyXCI7XHJcbmltcG9ydCB7VmVjdG9yM30gZnJvbSBcIi4vbWF0aC9WZWN0b3IzXCI7XHJcblxyXG52YXIgQ09PTCA9IHdpbmRvdy5DT09MID0ge307XHJcblxyXG5DT09MLkxJTkVBUiA9IDk3Mjk7XHJcbkNPT0wuTkVBUkVTVCA9IDk3Mjg7XHJcblxyXG5DT09MLkNMQU1QX1RPX0VER0UgPSAzMzA3MTtcclxuQ09PTC5SRVBFQVQgPSAxMDQ5NztcclxuQ09PTC5NSVJST1JFRF9SRVBFQVQgPSAzMzY0ODtcclxuXHJcbkNPT0wuUmVuZGVyZXIgPSBSZW5kZXJlcjtcclxuQ09PTC5NZXNoID0gTWVzaDtcclxuQ09PTC5DYW1lcmEgPSBDYW1lcmE7XHJcbkNPT0wuT3J0aG9DYW1lcmEgPSBPcnRob0NhbWVyYTtcclxuQ09PTC5DYW1lcmFDb250cm9sbGVyID0gQ2FtZXJhQ29udHJvbGxlcjtcclxuQ09PTC5TY2VuZSA9IFNjZW5lO1xyXG5DT09MLk1hdGVyaWFsID0gTWF0ZXJpYWw7XHJcbkNPT0wuTWVzaEJhc2ljTWF0ZXJpYWwgPSBNZXNoQmFzaWNNYXRlcmlhbDtcclxuQ09PTC5NZXNoTGFtYmVydE1hdGVyaWFsID0gTWVzaExhbWJlcnRNYXRlcmlhbDtcclxuQ09PTC5NZXNoU3RhbmRhcmRNYXRlcmlhbCA9IE1lc2hTdGFuZGFyZE1hdGVyaWFsO1xyXG5cclxuQ09PTC5UZXh0dXJlID0gVGV4dHVyZTtcclxuXHJcbkNPT0wuQW1iaWVudExpZ2h0ID0gQW1iaWVudExpZ2h0O1xyXG5DT09MLkRpcmVjdGlvbmFsTGlnaHQgPSBEaXJlY3Rpb25hbExpZ2h0O1xyXG5cclxuQ09PTC5HZW9tZXRyeSA9IEdlb21ldHJ5O1xyXG5DT09MLkJveEdlb21ldHJ5ID0gQm94R2VvbWV0cnk7XHJcbkNPT0wuU3BoZXJlR2VvbWV0cnkgPSBTcGhlcmVHZW9tZXRyeTtcclxuXHJcbi8vIENPT0wuR0xURkxvYWRlciA9IF9HTFRGTG9hZGVyO1xyXG5DT09MLkdMVEZMb2FkZXIyID0gR0xURkxvYWRlcjtcclxuXHJcbkNPT0wuVmVjdG9yMiA9IFZlY3RvcjI7XHJcbkNPT0wuVmVjdG9yMyA9IFZlY3RvcjM7XHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1bkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN3VCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDLzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeFVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);